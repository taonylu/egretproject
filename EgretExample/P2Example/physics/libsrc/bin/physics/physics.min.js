!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof __global?t=__global:"undefined"!=typeof self&&(t=self),t.p2=e()}}(function(){return function e(t,o,s){function n(r,a){if(!o[r]){if(!t[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=o[r]={exports:{}};t[r][0].call(l.exports,function(e){var o=t[r][1][e];return n(o?o:e)},l,l.exports,e,t,o,s)}return o[r].exports}for(var i="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,t,o){(function(t,s,n){function n(e,t,o){if(!(this instanceof n))return new n(e,t,o);var s=typeof e;if("base64"===t&&"string"===s)for(e=P(e);e.length%4!==0;)e+="=";var i;if("number"===s)i=x(e);else if("string"===s)i=n.byteLength(e,t);else{if("object"!==s)throw new Error("First argument needs to be a number, array or string.");i=x(e.length)}var r;n._useTypedArrays?r=j(new Uint8Array(i)):(r=this,r.length=i,r._isBuffer=!0);var a;if(n._useTypedArrays&&"function"==typeof Uint8Array&&e instanceof Uint8Array)r._set(e);else if(M(e))for(a=0;i>a;a++)r[a]=n.isBuffer(e)?e.readUInt8(a):e[a];else if("string"===s)r.write(e,0,t);else if("number"===s&&!n._useTypedArrays&&!o)for(a=0;i>a;a++)r[a]=0;return r}function i(e,t,o,s){o=Number(o)||0;var i=e.length-o;s?(s=Number(s),s>i&&(s=i)):s=i;var r=t.length;W(r%2===0,"Invalid hex string"),s>r/2&&(s=r/2);for(var a=0;s>a;a++){var u=parseInt(t.substr(2*a,2),16);W(!isNaN(u),"Invalid hex string"),e[o+a]=u}return n._charsWritten=2*a,a}function r(e,t,o,s){var i=n._charsWritten=G(N(t),e,o,s);return i}function a(e,t,o,s){var i=n._charsWritten=G(V(t),e,o,s);return i}function u(e,t,o,s){return a(e,t,o,s)}function l(e,t,o,s){var i=n._charsWritten=G(R(t),e,o,s);return i}function c(e,t,o,s){var i=n._charsWritten=G(T(t),e,o,s);return i}function d(e,t,o){return Y.fromByteArray(0===t&&o===e.length?e:e.slice(t,o))}function p(e,t,o){var s="",n="";o=Math.min(e.length,o);for(var i=t;o>i;i++)e[i]<=127?(s+=O(n)+String.fromCharCode(e[i]),n=""):n+="%"+e[i].toString(16);return s+O(n)}function h(e,t,o){var s="";o=Math.min(e.length,o);for(var n=t;o>n;n++)s+=String.fromCharCode(e[n]);return s}function f(e,t,o){return h(e,t,o)}function m(e,t,o){var s=e.length;(!t||0>t)&&(t=0),(!o||0>o||o>s)&&(o=s);for(var n="",i=t;o>i;i++)n+=F(e[i]);return n}function g(e,t,o){for(var s=e.slice(t,o),n="",i=0;i<s.length;i+=2)n+=String.fromCharCode(s[i]+256*s[i+1]);return n}function y(e,t,o,s){s||(W("boolean"==typeof o,"missing or invalid endian"),W(void 0!==t&&null!==t,"missing offset"),W(t+1<e.length,"Trying to read beyond buffer length"));var n=e.length;if(!(t>=n)){var i;return o?(i=e[t],n>t+1&&(i|=e[t+1]<<8)):(i=e[t]<<8,n>t+1&&(i|=e[t+1])),i}}function b(e,t,o,s){s||(W("boolean"==typeof o,"missing or invalid endian"),W(void 0!==t&&null!==t,"missing offset"),W(t+3<e.length,"Trying to read beyond buffer length"));var n=e.length;if(!(t>=n)){var i;return o?(n>t+2&&(i=e[t+2]<<16),n>t+1&&(i|=e[t+1]<<8),i|=e[t],n>t+3&&(i+=e[t+3]<<24>>>0)):(n>t+1&&(i=e[t+1]<<16),n>t+2&&(i|=e[t+2]<<8),n>t+3&&(i|=e[t+3]),i+=e[t]<<24>>>0),i}}function v(e,t,o,s){s||(W("boolean"==typeof o,"missing or invalid endian"),W(void 0!==t&&null!==t,"missing offset"),W(t+1<e.length,"Trying to read beyond buffer length"));var n=e.length;if(!(t>=n)){var i=y(e,t,o,!0),r=32768&i;return r?-1*(65535-i+1):i}}function w(e,t,o,s){s||(W("boolean"==typeof o,"missing or invalid endian"),W(void 0!==t&&null!==t,"missing offset"),W(t+3<e.length,"Trying to read beyond buffer length"));var n=e.length;if(!(t>=n)){var i=b(e,t,o,!0),r=2147483648&i;return r?-1*(4294967295-i+1):i}}function A(e,t,o,s){return s||(W("boolean"==typeof o,"missing or invalid endian"),W(t+3<e.length,"Trying to read beyond buffer length")),z.read(e,t,o,23,4)}function E(e,t,o,s){return s||(W("boolean"==typeof o,"missing or invalid endian"),W(t+7<e.length,"Trying to read beyond buffer length")),z.read(e,t,o,52,8)}function _(e,t,o,s,n){n||(W(void 0!==t&&null!==t,"missing value"),W("boolean"==typeof s,"missing or invalid endian"),W(void 0!==o&&null!==o,"missing offset"),W(o+1<e.length,"trying to write beyond buffer length"),k(t,65535));var i=e.length;if(!(o>=i))for(var r=0,a=Math.min(i-o,2);a>r;r++)e[o+r]=(t&255<<8*(s?r:1-r))>>>8*(s?r:1-r)}function B(e,t,o,s,n){n||(W(void 0!==t&&null!==t,"missing value"),W("boolean"==typeof s,"missing or invalid endian"),W(void 0!==o&&null!==o,"missing offset"),W(o+3<e.length,"trying to write beyond buffer length"),k(t,4294967295));var i=e.length;if(!(o>=i))for(var r=0,a=Math.min(i-o,4);a>r;r++)e[o+r]=t>>>8*(s?r:3-r)&255}function q(e,t,o,s,n){n||(W(void 0!==t&&null!==t,"missing value"),W("boolean"==typeof s,"missing or invalid endian"),W(void 0!==o&&null!==o,"missing offset"),W(o+1<e.length,"Trying to write beyond buffer length"),D(t,32767,-32768));var i=e.length;o>=i||(t>=0?_(e,t,o,s,n):_(e,65535+t+1,o,s,n))}function C(e,t,o,s,n){n||(W(void 0!==t&&null!==t,"missing value"),W("boolean"==typeof s,"missing or invalid endian"),W(void 0!==o&&null!==o,"missing offset"),W(o+3<e.length,"Trying to write beyond buffer length"),D(t,2147483647,-2147483648));var i=e.length;o>=i||(t>=0?B(e,t,o,s,n):B(e,4294967295+t+1,o,s,n))}function S(e,t,o,s,n){n||(W(void 0!==t&&null!==t,"missing value"),W("boolean"==typeof s,"missing or invalid endian"),W(void 0!==o&&null!==o,"missing offset"),W(o+3<e.length,"Trying to write beyond buffer length"),X(t,3.4028234663852886e38,-3.4028234663852886e38));var i=e.length;o>=i||z.write(e,t,o,s,23,4)}function L(e,t,o,s,n){n||(W(void 0!==t&&null!==t,"missing value"),W("boolean"==typeof s,"missing or invalid endian"),W(void 0!==o&&null!==o,"missing offset"),W(o+7<e.length,"Trying to write beyond buffer length"),X(t,1.7976931348623157e308,-1.7976931348623157e308));var i=e.length;o>=i||z.write(e,t,o,s,52,8)}function P(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function j(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=K.get,e.set=K.set,e.write=K.write,e.toString=K.toString,e.toLocaleString=K.toString,e.toJSON=K.toJSON,e.copy=K.copy,e.slice=K.slice,e.readUInt8=K.readUInt8,e.readUInt16LE=K.readUInt16LE,e.readUInt16BE=K.readUInt16BE,e.readUInt32LE=K.readUInt32LE,e.readUInt32BE=K.readUInt32BE,e.readInt8=K.readInt8,e.readInt16LE=K.readInt16LE,e.readInt16BE=K.readInt16BE,e.readInt32LE=K.readInt32LE,e.readInt32BE=K.readInt32BE,e.readFloatLE=K.readFloatLE,e.readFloatBE=K.readFloatBE,e.readDoubleLE=K.readDoubleLE,e.readDoubleBE=K.readDoubleBE,e.writeUInt8=K.writeUInt8,e.writeUInt16LE=K.writeUInt16LE,e.writeUInt16BE=K.writeUInt16BE,e.writeUInt32LE=K.writeUInt32LE,e.writeUInt32BE=K.writeUInt32BE,e.writeInt8=K.writeInt8,e.writeInt16LE=K.writeInt16LE,e.writeInt16BE=K.writeInt16BE,e.writeInt32LE=K.writeInt32LE,e.writeInt32BE=K.writeInt32BE,e.writeFloatLE=K.writeFloatLE,e.writeFloatBE=K.writeFloatBE,e.writeDoubleLE=K.writeDoubleLE,e.writeDoubleBE=K.writeDoubleBE,e.fill=K.fill,e.inspect=K.inspect,e.toArrayBuffer=K.toArrayBuffer,e}function U(e,t,o){return"number"!=typeof e?o:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function x(e){return e=~~Math.ceil(+e),0>e?0:e}function I(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function M(e){return I(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function F(e){return 16>e?"0"+e.toString(16):e.toString(16)}function N(e){for(var t=[],o=0;o<e.length;o++){var s=e.charCodeAt(o);if(127>=s)t.push(e.charCodeAt(o));else{var n=o;s>=55296&&57343>=s&&o++;for(var i=encodeURIComponent(e.slice(n,o+1)).substr(1).split("%"),r=0;r<i.length;r++)t.push(parseInt(i[r],16))}}return t}function V(e){for(var t=[],o=0;o<e.length;o++)t.push(255&e.charCodeAt(o));return t}function T(e){for(var t,o,s,n=[],i=0;i<e.length;i++)t=e.charCodeAt(i),o=t>>8,s=t%256,n.push(s),n.push(o);return n}function R(e){return Y.toByteArray(e)}function G(e,t,o,s){for(var n=0;s>n&&!(n+o>=t.length||n>=e.length);n++)t[n+o]=e[n];return n}function O(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function k(e,t){W("number"==typeof e,"cannot write a non-number as a number"),W(e>=0,"specified a negative value for writing an unsigned value"),W(t>=e,"value is larger than maximum value for type"),W(Math.floor(e)===e,"value has a fractional component")}function D(e,t,o){W("number"==typeof e,"cannot write a non-number as a number"),W(t>=e,"value larger than maximum allowed value"),W(e>=o,"value smaller than minimum allowed value"),W(Math.floor(e)===e,"value has a fractional component")}function X(e,t,o){W("number"==typeof e,"cannot write a non-number as a number"),W(t>=e,"value larger than maximum allowed value"),W(e>=o,"value smaller than minimum allowed value")}function W(e,t){if(!e)throw new Error(t||"Failed assertion")}var Y=e("base64-js"),z=e("ieee754");o.Buffer=n,o.SlowBuffer=n,o.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){if("function"!=typeof Uint8Array||"function"!=typeof ArrayBuffer)return!1;try{var e=new Uint8Array(0);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},n.byteLength=function(e,t){var o;switch(e+="",t||"utf8"){case"hex":o=e.length/2;break;case"utf8":case"utf-8":o=N(e).length;break;case"ascii":case"binary":case"raw":o=e.length;break;case"base64":o=R(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=2*e.length;break;default:throw new Error("Unknown encoding")}return o},n.concat=function(e,t){if(W(I(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new n(0);if(1===e.length)return e[0];var o;if("number"!=typeof t)for(t=0,o=0;o<e.length;o++)t+=e[o].length;var s=new n(t),i=0;for(o=0;o<e.length;o++){var r=e[o];r.copy(s,i),i+=r.length}return s},n.prototype.write=function(e,t,o,s){if(isFinite(t))isFinite(o)||(s=o,o=void 0);else{var n=s;s=t,t=o,o=n}t=Number(t)||0;var d=this.length-t;o?(o=Number(o),o>d&&(o=d)):o=d,s=String(s||"utf8").toLowerCase();var p;switch(s){case"hex":p=i(this,e,t,o);break;case"utf8":case"utf-8":p=r(this,e,t,o);break;case"ascii":p=a(this,e,t,o);break;case"binary":p=u(this,e,t,o);break;case"base64":p=l(this,e,t,o);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=c(this,e,t,o);break;default:throw new Error("Unknown encoding")}return p},n.prototype.toString=function(e,t,o){var s=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,o=void 0!==o?Number(o):o=s.length,o===t)return"";var n;switch(e){case"hex":n=m(s,t,o);break;case"utf8":case"utf-8":n=p(s,t,o);break;case"ascii":n=h(s,t,o);break;case"binary":n=f(s,t,o);break;case"base64":n=d(s,t,o);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=g(s,t,o);break;default:throw new Error("Unknown encoding")}return n},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.copy=function(e,t,o,s){var n=this;if(o||(o=0),s||0===s||(s=this.length),t||(t=0),s!==o&&0!==e.length&&0!==n.length){W(s>=o,"sourceEnd < sourceStart"),W(t>=0&&t<e.length,"targetStart out of bounds"),W(o>=0&&o<n.length,"sourceStart out of bounds"),W(s>=0&&s<=n.length,"sourceEnd out of bounds"),s>this.length&&(s=this.length),e.length-t<s-o&&(s=e.length-t+o);for(var i=0;s-o>i;i++)e[i+t]=this[i+o]}},n.prototype.slice=function(e,t){var o=this.length;if(e=U(e,o,0),t=U(t,o,o),n._useTypedArrays)return j(this.subarray(e,t));for(var s=t-e,i=new n(s,void 0,!0),r=0;s>r;r++)i[r]=this[r+e];return i},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.readUInt8=function(e,t){return t||(W(void 0!==e&&null!==e,"missing offset"),W(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},n.prototype.readUInt16LE=function(e,t){return y(this,e,!0,t)},n.prototype.readUInt16BE=function(e,t){return y(this,e,!1,t)},n.prototype.readUInt32LE=function(e,t){return b(this,e,!0,t)},n.prototype.readUInt32BE=function(e,t){return b(this,e,!1,t)},n.prototype.readInt8=function(e,t){if(t||(W(void 0!==e&&null!==e,"missing offset"),W(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var o=128&this[e];return o?-1*(255-this[e]+1):this[e]}},n.prototype.readInt16LE=function(e,t){return v(this,e,!0,t)},n.prototype.readInt16BE=function(e,t){return v(this,e,!1,t)},n.prototype.readInt32LE=function(e,t){return w(this,e,!0,t)},n.prototype.readInt32BE=function(e,t){return w(this,e,!1,t)},n.prototype.readFloatLE=function(e,t){return A(this,e,!0,t)},n.prototype.readFloatBE=function(e,t){return A(this,e,!1,t)},n.prototype.readDoubleLE=function(e,t){return E(this,e,!0,t)},n.prototype.readDoubleBE=function(e,t){return E(this,e,!1,t)},n.prototype.writeUInt8=function(e,t,o){o||(W(void 0!==e&&null!==e,"missing value"),W(void 0!==t&&null!==t,"missing offset"),W(t<this.length,"trying to write beyond buffer length"),k(e,255)),t>=this.length||(this[t]=e)},n.prototype.writeUInt16LE=function(e,t,o){_(this,e,t,!0,o)},n.prototype.writeUInt16BE=function(e,t,o){_(this,e,t,!1,o)},n.prototype.writeUInt32LE=function(e,t,o){B(this,e,t,!0,o)},n.prototype.writeUInt32BE=function(e,t,o){B(this,e,t,!1,o)},n.prototype.writeInt8=function(e,t,o){o||(W(void 0!==e&&null!==e,"missing value"),W(void 0!==t&&null!==t,"missing offset"),W(t<this.length,"Trying to write beyond buffer length"),D(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,o):this.writeUInt8(255+e+1,t,o))},n.prototype.writeInt16LE=function(e,t,o){q(this,e,t,!0,o)},n.prototype.writeInt16BE=function(e,t,o){q(this,e,t,!1,o)},n.prototype.writeInt32LE=function(e,t,o){C(this,e,t,!0,o)},n.prototype.writeInt32BE=function(e,t,o){C(this,e,t,!1,o)},n.prototype.writeFloatLE=function(e,t,o){S(this,e,t,!0,o)},n.prototype.writeFloatBE=function(e,t,o){S(this,e,t,!1,o)},n.prototype.writeDoubleLE=function(e,t,o){L(this,e,t,!0,o)},n.prototype.writeDoubleBE=function(e,t,o){L(this,e,t,!1,o)},n.prototype.fill=function(e,t,o){if(e||(e=0),t||(t=0),o||(o=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),W("number"==typeof e&&!isNaN(e),"value is not a number"),W(o>=t,"end < start"),o!==t&&0!==this.length){W(t>=0&&t<this.length,"start out of bounds"),W(o>=0&&o<=this.length,"end out of bounds");for(var s=t;o>s;s++)this[s]=e}},n.prototype.inspect=function(){for(var e=[],t=this.length,s=0;t>s;s++)if(e[s]=F(this[s]),s===o.INSPECT_MAX_BYTES){e[s+1]="...";break}return"<Buffer "+e.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("function"==typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,o=e.length;o>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var K=n.prototype}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/index.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,"base64-js":2,buffer:1,ieee754:3}],2:[function(e,t){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function o(e){var t=e.charCodeAt(0);return t===r?62:t===a?63:u>t?-1:u+10>t?t-u+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function s(e){function t(e){l[d++]=e}var s,n,r,a,u,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;u="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new i(3*e.length/4-u),r=u>0?e.length-4:e.length;var d=0;for(s=0,n=0;r>s;s+=4,n+=3)a=o(e.charAt(s))<<18|o(e.charAt(s+1))<<12|o(e.charAt(s+2))<<6|o(e.charAt(s+3)),t((16711680&a)>>16),t((65280&a)>>8),t(255&a);return 2===u?(a=o(e.charAt(s))<<2|o(e.charAt(s+1))>>4,t(255&a)):1===u&&(a=o(e.charAt(s))<<10|o(e.charAt(s+1))<<4|o(e.charAt(s+2))>>2,t(a>>8&255),t(255&a)),l}function n(t){function o(t){return e.charAt(t)}function s(e){return o(e>>18&63)+o(e>>12&63)+o(e>>6&63)+o(63&e)}var n,i,r,a=t.length%3,u="";for(n=0,r=t.length-a;r>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],u+=s(i);switch(a){case 1:i=t[t.length-1],u+=o(i>>2),u+=o(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=o(i>>10),u+=o(i>>4&63),u+=o(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,r=("0".charCodeAt(0),"+".charCodeAt(0)),a="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0);t.exports.toByteArray=s,t.exports.fromByteArray=n}()}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],3:[function(e,t,o){(function(){o.read=function(e,t,o,s,n){var i,r,a=8*n-s-1,u=(1<<a)-1,l=u>>1,c=-7,d=o?n-1:0,p=o?-1:1,h=e[t+d];for(d+=p,i=h&(1<<-c)-1,h>>=-c,c+=a;c>0;i=256*i+e[t+d],d+=p,c-=8);for(r=i&(1<<-c)-1,i>>=-c,c+=s;c>0;r=256*r+e[t+d],d+=p,c-=8);if(0===i)i=1-l;else{if(i===u)return r?0/0:1/0*(h?-1:1);r+=Math.pow(2,s),i-=l}return(h?-1:1)*r*Math.pow(2,i-s)},o.write=function(e,t,o,s,n,i){var r,a,u,l=8*i-n-1,c=(1<<l)-1,d=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=s?0:i-1,f=s?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,r=c):(r=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-r))<1&&(r--,u*=2),t+=r+d>=1?p/u:p*Math.pow(2,1-d),t*u>=2&&(r++,u/=2),r+d>=c?(a=0,r=c):r+d>=1?(a=(t*u-1)*Math.pow(2,n),r+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),r=0));n>=8;e[o+h]=255&a,h+=f,a/=256,n-=8);for(r=r<<n|a,l+=n;l>0;e[o+h]=255&r,h+=f,r/=256,l-=8);e[o+h-f]|=128*m}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],4:[function(e,t){(function(e){function o(){}var e=t.exports={};e.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var o=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),o.length>0)){var s=o.shift();s()}},!0),function(e){o.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=o,e.once=o,e.off=o,e.emit=o,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],5:[function(e,t){(function(){function o(){}var s=e("./Scalar");t.exports=o,o.lineInt=function(e,t,o){o=o||0;var n,i,r,a,u,l,c,d=[0,0];return n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],r=n*e[0][0]+i*e[0][1],a=t[1][1]-t[0][1],u=t[0][0]-t[1][0],l=a*t[0][0]+u*t[0][1],c=n*u-a*i,s.eq(c,0,o)||(d[0]=(u*r-i*l)/c,d[1]=(n*l-a*r)/c),d},o.segmentsIntersect=function(e,t,o,s){var n=t[0]-e[0],i=t[1]-e[1],r=s[0]-o[0],a=s[1]-o[1];if(r*i-a*n==0)return!1;var u=(n*(o[1]-e[1])+i*(e[0]-o[0]))/(r*i-a*n),l=(r*(e[1]-o[1])+a*(o[0]-e[0]))/(a*n-r*i);return u>=0&&1>=u&&l>=0&&1>=l}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/poly-decomp/src/Line.js","/../node_modules/poly-decomp/src")},{"./Scalar":8,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],6:[function(e,t){(function(){function e(){}t.exports=e,e.area=function(e,t,o){return(t[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(t[1]-e[1])},e.left=function(t,o,s){return e.area(t,o,s)>0},e.leftOn=function(t,o,s){return e.area(t,o,s)>=0},e.right=function(t,o,s){return e.area(t,o,s)<0},e.rightOn=function(t,o,s){return e.area(t,o,s)<=0};var o=[],s=[];e.collinear=function(t,n,i,r){if(r){var a=o,u=s;a[0]=n[0]-t[0],a[1]=n[1]-t[1],u[0]=i[0]-n[0],u[1]=i[1]-n[1];var l=a[0]*u[0]+a[1]*u[1],c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),d=Math.sqrt(u[0]*u[0]+u[1]*u[1]),p=Math.acos(l/(c*d));return r>p}return 0==e.area(t,n,i)},e.sqdist=function(e,t){var o=t[0]-e[0],s=t[1]-e[1];return o*o+s*s}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/poly-decomp/src/Point.js","/../node_modules/poly-decomp/src")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],7:[function(e,t){(function(){function o(){this.vertices=[]}function s(e,t,o,s,n){n=n||0;var i=t[1]-e[1],a=e[0]-t[0],u=i*e[0]+a*e[1],l=s[1]-o[1],c=o[0]-s[0],d=l*o[0]+c*o[1],p=i*c-l*a;return r.eq(p,0,n)?[0,0]:[(c*u-a*d)/p,(i*d-l*u)/p]}var n=e("./Line"),i=e("./Point"),r=e("./Scalar");t.exports=o,o.prototype.at=function(e){var t=this.vertices,o=t.length;return t[0>e?e%o+o:e%o]},o.prototype.first=function(){return this.vertices[0]},o.prototype.last=function(){return this.vertices[this.vertices.length-1]},o.prototype.clear=function(){this.vertices.length=0},o.prototype.append=function(e,t,o){if("undefined"==typeof t)throw new Error("From is not given!");if("undefined"==typeof o)throw new Error("To is not given!");if(t>o-1)throw new Error("lol1");if(o>e.vertices.length)throw new Error("lol2");if(0>t)throw new Error("lol3");for(var s=t;o>s;s++)this.vertices.push(e.vertices[s])},o.prototype.makeCCW=function(){for(var e=0,t=this.vertices,o=1;o<this.vertices.length;++o)(t[o][1]<t[e][1]||t[o][1]==t[e][1]&&t[o][0]>t[e][0])&&(e=o);i.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},o.prototype.reverse=function(){for(var e=[],t=0,o=this.vertices.length;t!==o;t++)e.push(this.vertices.pop());this.vertices=e},o.prototype.isReflex=function(e){return i.right(this.at(e-1),this.at(e),this.at(e+1))};var a=[],u=[];o.prototype.canSee=function(e,t){var o,s,r=a,l=u;if(i.leftOn(this.at(e+1),this.at(e),this.at(t))&&i.rightOn(this.at(e-1),this.at(e),this.at(t)))return!1;s=i.sqdist(this.at(e),this.at(t));for(var c=0;c!==this.vertices.length;++c)if((c+1)%this.vertices.length!==e&&c!==e&&i.leftOn(this.at(e),this.at(t),this.at(c+1))&&i.rightOn(this.at(e),this.at(t),this.at(c))&&(r[0]=this.at(e),r[1]=this.at(t),l[0]=this.at(c),l[1]=this.at(c+1),o=n.lineInt(r,l),i.sqdist(this.at(e),o)<s))return!1;return!0},o.prototype.copy=function(e,t,s){var n=s||new o;if(n.clear(),t>e)for(var i=e;t>=i;i++)n.vertices.push(this.vertices[i]);else{for(var i=0;t>=i;i++)n.vertices.push(this.vertices[i]);for(var i=e;i<this.vertices.length;i++)n.vertices.push(this.vertices[i])}return n},o.prototype.getCutEdges=function(){for(var e=[],t=[],s=[],n=new o,i=Number.MAX_VALUE,r=0;r<this.vertices.length;++r)if(this.isReflex(r))for(var a=0;a<this.vertices.length;++a)if(this.canSee(r,a)){t=this.copy(r,a,n).getCutEdges(),s=this.copy(a,r,n).getCutEdges();for(var u=0;u<s.length;u++)t.push(s[u]);t.length<i&&(e=t,i=t.length,e.push([this.at(r),this.at(a)]))}return e},o.prototype.decomp=function(){var e=this.getCutEdges();return e.length>0?this.slice(e):[this]},o.prototype.slice=function(e){if(0==e.length)return[this];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2==e[0].length&&e[0][0]instanceof Array){for(var t=[this],o=0;o<e.length;o++)for(var s=e[o],n=0;n<t.length;n++){var i=t[n],r=i.slice(s);if(r){t.splice(n,1),t.push(r[0],r[1]);break}}return t}var s=e,o=this.vertices.indexOf(s[0]),n=this.vertices.indexOf(s[1]);return-1!=o&&-1!=n?[this.copy(o,n),this.copy(n,o)]:!1},o.prototype.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var o=0;t-1>o;o++)if(n.segmentsIntersect(e[t],e[t+1],e[o],e[o+1]))return!1;for(var t=1;t<e.length-2;t++)if(n.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},o.prototype.quickDecomp=function(e,t,n,r,a,u){a=a||100,u=u||0,r=r||25,e="undefined"!=typeof e?e:[],t=t||[],n=n||[];var l=[0,0],c=[0,0],d=[0,0],p=0,h=0,f=0,m=0,g=0,y=0,b=0,v=new o,w=new o,A=this,E=this.vertices;if(E.length<3)return e;if(u++,u>a)return console.warn("quickDecomp: max level ("+a+") reached."),e;for(var _=0;_<this.vertices.length;++_)if(A.isReflex(_)){t.push(A.vertices[_]),p=h=Number.MAX_VALUE;for(var B=0;B<this.vertices.length;++B)i.left(A.at(_-1),A.at(_),A.at(B))&&i.rightOn(A.at(_-1),A.at(_),A.at(B-1))&&(d=s(A.at(_-1),A.at(_),A.at(B),A.at(B-1)),i.right(A.at(_+1),A.at(_),d)&&(f=i.sqdist(A.vertices[_],d),h>f&&(h=f,c=d,y=B))),i.left(A.at(_+1),A.at(_),A.at(B+1))&&i.rightOn(A.at(_+1),A.at(_),A.at(B))&&(d=s(A.at(_+1),A.at(_),A.at(B),A.at(B+1)),i.left(A.at(_-1),A.at(_),d)&&(f=i.sqdist(A.vertices[_],d),p>f&&(p=f,l=d,g=B)));if(y==(g+1)%this.vertices.length)d[0]=(c[0]+l[0])/2,d[1]=(c[1]+l[1])/2,n.push(d),g>_?(v.append(A,_,g+1),v.vertices.push(d),w.vertices.push(d),0!=y&&w.append(A,y,A.vertices.length),w.append(A,0,_+1)):(0!=_&&v.append(A,_,A.vertices.length),v.append(A,0,g+1),v.vertices.push(d),w.vertices.push(d),w.append(A,y,_+1));else{if(y>g&&(g+=this.vertices.length),m=Number.MAX_VALUE,y>g)return e;for(var B=y;g>=B;++B)i.leftOn(A.at(_-1),A.at(_),A.at(B))&&i.rightOn(A.at(_+1),A.at(_),A.at(B))&&(f=i.sqdist(A.at(_),A.at(B)),m>f&&(m=f,b=B%this.vertices.length));b>_?(v.append(A,_,b+1),0!=b&&w.append(A,b,E.length),w.append(A,0,_+1)):(0!=_&&v.append(A,_,E.length),v.append(A,0,b+1),w.append(A,b,_+1))}return v.vertices.length<w.vertices.length?(v.quickDecomp(e,t,n,r,a,u),w.quickDecomp(e,t,n,r,a,u)):(w.quickDecomp(e,t,n,r,a,u),v.quickDecomp(e,t,n,r,a,u)),e}return e.push(this),e},o.prototype.removeCollinearPoints=function(e){for(var t=0,o=this.vertices.length-1;this.vertices.length>3&&o>=0;--o)i.collinear(this.at(o-1),this.at(o),this.at(o+1),e)&&(this.vertices.splice(o%this.vertices.length,1),o--,t++);return t}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/poly-decomp/src/Polygon.js","/../node_modules/poly-decomp/src")},{"./Line":5,"./Point":6,"./Scalar":8,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],8:[function(e,t){(function(){function e(){}t.exports=e,e.eq=function(e,t,o){return o=o||0,Math.abs(e-t)<o}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/poly-decomp/src/Scalar.js","/../node_modules/poly-decomp/src")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],9:[function(e,t){(function(){t.exports={Polygon:e("./Polygon"),Point:e("./Point")}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/poly-decomp/src/index.js","/../node_modules/poly-decomp/src")},{"./Point":6,"./Polygon":7,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],10:[function(e,t){t.exports={name:"p2",version:"0.6.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"~0.4.0","grunt-contrib-jshint":"~0.9.2","grunt-contrib-nodeunit":"~0.1.2","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],11:[function(e,t){(function(){function o(e){this.lowerBound=s.create(),e&&e.lowerBound&&s.copy(this.lowerBound,e.lowerBound),this.upperBound=s.create(),e&&e.upperBound&&s.copy(this.upperBound,e.upperBound)}var s=e("../math/vec2");e("../utils/Utils"),t.exports=o;var n=s.create();o.prototype.setFromPoints=function(e,t,o,i){var r=this.lowerBound,a=this.upperBound;"number"!=typeof o&&(o=0),0!==o?s.rotate(r,e[0],o):s.copy(r,e[0]),s.copy(a,r);for(var u=Math.cos(o),l=Math.sin(o),c=1;c<e.length;c++){var d=e[c];if(0!==o){var p=d[0],h=d[1];n[0]=u*p-l*h,n[1]=l*p+u*h,d=n}for(var f=0;2>f;f++)d[f]>a[f]&&(a[f]=d[f]),d[f]<r[f]&&(r[f]=d[f])}t&&(s.add(this.lowerBound,this.lowerBound,t),s.add(this.upperBound,this.upperBound,t)),i&&(this.lowerBound[0]-=i,this.lowerBound[1]-=i,this.upperBound[0]+=i,this.upperBound[1]+=i)},o.prototype.copy=function(e){s.copy(this.lowerBound,e.lowerBound),s.copy(this.upperBound,e.upperBound)
},o.prototype.extend=function(e){for(var t=2;t--;){var o=e.lowerBound[t];this.lowerBound[t]>o&&(this.lowerBound[t]=o);var s=e.upperBound[t];this.upperBound[t]<s&&(this.upperBound[t]=s)}},o.prototype.overlaps=function(e){var t=this.lowerBound,o=this.upperBound,s=e.lowerBound,n=e.upperBound;return(s[0]<=o[0]&&o[0]<=n[0]||t[0]<=n[0]&&n[0]<=o[0])&&(s[1]<=o[1]&&o[1]<=n[1]||t[1]<=n[1]&&n[1]<=o[1])}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/collision/AABB.js","/collision")},{"../math/vec2":33,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],12:[function(e,t){(function(){function o(e){this.type=e,this.result=[],this.world=null,this.boundingVolumeType=o.AABB}var s=e("../math/vec2"),n=e("../objects/Body");t.exports=o,o.AABB=1,o.BOUNDING_CIRCLE=2,o.prototype.setWorld=function(e){this.world=e},o.prototype.getCollisionPairs=function(){throw new Error("getCollisionPairs must be implemented in a subclass!")};var i=s.create();o.boundingRadiusCheck=function(e,t){s.sub(i,e.position,t.position);var o=s.squaredLength(i),n=e.boundingRadius+t.boundingRadius;return n*n>=o},o.aabbCheck=function(e,t){return e.aabbNeedsUpdate&&e.updateAABB(),t.aabbNeedsUpdate&&t.updateAABB(),e.aabb.overlaps(t.aabb)},o.prototype.boundingVolumeCheck=function(e,t){var s;switch(this.boundingVolumeType){case o.BOUNDING_CIRCLE:s=o.boundingRadiusCheck(e,t);break;case o.AABB:s=o.aabbCheck(e,t);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return s},o.canCollide=function(e,t){return e.type===n.STATIC&&t.type===n.STATIC?!1:e.type===n.KINEMATIC&&t.type===n.STATIC||e.type===n.STATIC&&t.type===n.KINEMATIC?!1:e.type===n.KINEMATIC&&t.type===n.KINEMATIC?!1:e.sleepState===n.SLEEPING&&t.sleepState===n.SLEEPING?!1:e.sleepState===n.SLEEPING&&t.type===n.STATIC||t.sleepState===n.SLEEPING&&e.type===n.STATIC?!1:!0},o.NAIVE=1,o.SAP=2}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/collision/Broadphase.js","/collision")},{"../math/vec2":33,"../objects/Body":34,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],13:[function(e,t){(function(){function o(e){s.apply(this),e=n.defaults(e,{xmin:-100,xmax:100,ymin:-100,ymax:100,nx:10,ny:10}),this.xmin=e.xmin,this.ymin=e.ymin,this.xmax=e.xmax,this.ymax=e.ymax,this.nx=e.nx,this.ny=e.ny,this.binsizeX=(this.xmax-this.xmin)/this.nx,this.binsizeY=(this.ymax-this.ymin)/this.ny}var s=(e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Particle"),e("../collision/Broadphase")),n=(e("../math/vec2"),e("../utils/Utils"));t.exports=o,o.prototype=new s,o.prototype.getCollisionPairs=function(e){for(var t=[],o=e.bodies,n=o.length,i=(this.binsizeX,this.binsizeY,this.nx),r=this.ny,a=this.xmin,u=this.ymin,l=this.xmax,c=this.ymax,d=[],p=i*r,h=0;p>h;h++)d.push([]);for(var f=i/(l-a),m=r/(c-u),h=0;h!==n;h++)for(var g=o[h],y=g.aabb,b=Math.max(y.lowerBound[0],a),v=Math.max(y.lowerBound[1],u),w=Math.min(y.upperBound[0],l),A=Math.min(y.upperBound[1],c),E=Math.floor(f*(b-a)),_=Math.floor(m*(v-u)),B=Math.floor(f*(w-a)),q=Math.floor(m*(A-u)),C=E;B>=C;C++)for(var S=_;q>=S;S++){var L=C,P=S,j=L*(r-1)+P;j>=0&&p>j&&d[j].push(g)}for(var h=0;h!==p;h++)for(var U=d[h],C=0,x=U.length;C!==x;C++)for(var g=U[C],S=0;S!==C;S++){var I=U[S];s.canCollide(g,I)&&this.boundingVolumeCheck(g,I)&&t.push(g,I)}return t}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/collision/GridBroadphase.js","/collision")},{"../collision/Broadphase":12,"../math/vec2":33,"../shapes/Circle":40,"../shapes/Particle":44,"../shapes/Plane":45,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],14:[function(e,t){(function(){function o(){s.call(this,s.NAIVE)}var s=(e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Shape"),e("../shapes/Particle"),e("../collision/Broadphase"));e("../math/vec2"),t.exports=o,o.prototype=new s,o.prototype.getCollisionPairs=function(e){var t=e.bodies,o=this.result;o.length=0;for(var n=0,i=t.length;n!==i;n++)for(var r=t[n],a=0;n>a;a++){var u=t[a];s.canCollide(r,u)&&this.boundingVolumeCheck(r,u)&&o.push(r,u)}return o}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/collision/NaiveBroadphase.js","/collision")},{"../collision/Broadphase":12,"../math/vec2":33,"../shapes/Circle":40,"../shapes/Particle":44,"../shapes/Plane":45,"../shapes/Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],15:[function(e,t){(function(){function o(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.reuseObjects=!0,this.reusableContactEquations=[],this.reusableFrictionEquations=[],this.restitution=0,this.stiffness=d.DEFAULT_STIFFNESS,this.relaxation=d.DEFAULT_RELAXATION,this.frictionStiffness=d.DEFAULT_STIFFNESS,this.frictionRelaxation=d.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new c,this.contactSkinSize=.01}function s(e,t){i.set(e.vertices[0],.5*-t.length,-t.radius),i.set(e.vertices[1],.5*t.length,-t.radius),i.set(e.vertices[2],.5*t.length,t.radius),i.set(e.vertices[3],.5*-t.length,t.radius)}function n(e,t,o,s){for(var n=D,u=X,l=W,c=Y,d=e,p=t.vertices,h=null,f=0;f!==p.length+1;f++){var m=p[f%p.length],g=p[(f+1)%p.length];i.rotate(n,m,s),i.rotate(u,g,s),a(n,n,o),a(u,u,o),r(l,n,d),r(c,u,d);var y=i.crossLength(l,c);if(null===h&&(h=y),0>=y*h)return!1;h=y}return!0}var i=e("../math/vec2"),r=i.sub,a=i.add,u=i.dot,l=e("../utils/Utils"),c=e("../utils/TupleDictionary"),d=e("../equations/Equation"),p=e("../equations/ContactEquation"),h=e("../equations/FrictionEquation"),f=e("../shapes/Circle"),m=e("../shapes/Convex"),g=e("../shapes/Shape"),y=(e("../objects/Body"),e("../shapes/Rectangle"));t.exports=o;var b=i.fromValues(0,1),v=i.fromValues(0,0),w=i.fromValues(0,0),A=i.fromValues(0,0),E=i.fromValues(0,0),_=i.fromValues(0,0),B=i.fromValues(0,0),q=i.fromValues(0,0),C=i.fromValues(0,0),S=i.fromValues(0,0),L=i.fromValues(0,0),P=i.fromValues(0,0),j=i.fromValues(0,0),U=i.fromValues(0,0),x=i.fromValues(0,0),I=i.fromValues(0,0),M=i.fromValues(0,0),F=i.fromValues(0,0),N=i.fromValues(0,0),V=[];o.prototype.collidedLastStep=function(e,t){var o=0|e.id,s=0|t.id;return!!this.collidingBodiesLastStep.get(o,s)},o.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var e=this.contactEquations,t=e.length;t--;){var o=e[t],s=o.bodyA.id,n=o.bodyB.id;this.collidingBodiesLastStep.set(s,n,!0)}if(this.reuseObjects){var i=this.contactEquations,r=this.frictionEquations,a=this.reusableFrictionEquations,u=this.reusableContactEquations;l.appendArray(u,i),l.appendArray(a,r)}this.contactEquations.length=this.frictionEquations.length=0},o.prototype.createContactEquation=function(e,t,o,s){var n=this.reusableContactEquations.length?this.reusableContactEquations.pop():new p(e,t);return n.bodyA=e,n.bodyB=t,n.shapeA=o,n.shapeB=s,n.restitution=this.restitution,n.firstImpact=!this.collidedLastStep(e,t),n.stiffness=this.stiffness,n.relaxation=this.relaxation,n.needsUpdate=!0,n.enabled=!0,n.offset=this.contactSkinSize,n},o.prototype.createFrictionEquation=function(e,t,o,s){var n=this.reusableFrictionEquations.length?this.reusableFrictionEquations.pop():new h(e,t);return n.bodyA=e,n.bodyB=t,n.shapeA=o,n.shapeB=s,n.setSlipForce(this.slipForce),n.frictionCoefficient=this.frictionCoefficient,n.relativeVelocity=this.surfaceVelocity,n.enabled=!0,n.needsUpdate=!0,n.stiffness=this.frictionStiffness,n.relaxation=this.frictionRelaxation,n.contactEquations.length=0,n},o.prototype.createFrictionFromContact=function(e){var t=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB);return i.copy(t.contactPointA,e.contactPointA),i.copy(t.contactPointB,e.contactPointB),i.rotate90cw(t.t,e.normalA),t.contactEquations.push(e),t},o.prototype.createFrictionFromAverage=function(e){if(!e)throw new Error("numContacts == 0!");var t=this.contactEquations[this.contactEquations.length-1],o=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB),s=t.bodyA;t.bodyB,i.set(o.contactPointA,0,0),i.set(o.contactPointB,0,0),i.set(o.t,0,0);for(var n=0;n!==e;n++)t=this.contactEquations[this.contactEquations.length-1-n],t.bodyA===s?(i.add(o.t,o.t,t.normalA),i.add(o.contactPointA,o.contactPointA,t.contactPointA),i.add(o.contactPointB,o.contactPointB,t.contactPointB)):(i.sub(o.t,o.t,t.normalA),i.add(o.contactPointA,o.contactPointA,t.contactPointB),i.add(o.contactPointB,o.contactPointB,t.contactPointA)),o.contactEquations.push(t);var r=1/e;return i.scale(o.contactPointA,o.contactPointA,r),i.scale(o.contactPointB,o.contactPointB,r),i.normalize(o.t,o.t),i.rotate90cw(o.t,o.t),o},o.prototype[g.LINE|g.CONVEX]=o.prototype.convexLine=function(e,t,o,s,n,i,r,a,u){return u?!1:0},o.prototype[g.LINE|g.RECTANGLE]=o.prototype.lineRectangle=function(e,t,o,s,n,i,r,a,u){return u?!1:0};var T=new y(1,1),R=i.create();o.prototype[g.CAPSULE|g.CONVEX]=o.prototype[g.CAPSULE|g.RECTANGLE]=o.prototype.convexCapsule=function(e,t,o,n,r,a,u,l,c){var d=R;i.set(d,a.length/2,0),i.rotate(d,d,l),i.add(d,d,u);var p=this.circleConvex(r,a,d,l,e,t,o,n,c,a.radius);i.set(d,-a.length/2,0),i.rotate(d,d,l),i.add(d,d,u);var h=this.circleConvex(r,a,d,l,e,t,o,n,c,a.radius);if(c&&(p||h))return!0;var f=T;s(f,a);var m=this.convexConvex(e,t,o,n,r,f,u,l,c);return m+p+h},o.prototype[g.CAPSULE|g.LINE]=o.prototype.lineCapsule=function(e,t,o,s,n,i,r,a,u){return u?!1:0};var G=i.create(),O=i.create(),k=new y(1,1);o.prototype[g.CAPSULE|g.CAPSULE]=o.prototype.capsuleCapsule=function(e,t,o,n,r,a,u,l,c){for(var d,p=G,h=O,f=0,m=0;2>m;m++){i.set(p,(0===m?-1:1)*t.length/2,0),i.rotate(p,p,n),i.add(p,p,o);for(var g=0;2>g;g++){i.set(h,(0===g?-1:1)*a.length/2,0),i.rotate(h,h,l),i.add(h,h,u),this.enableFrictionReduction&&(d=this.enableFriction,this.enableFriction=!1);var y=this.circleCircle(e,t,p,n,r,a,h,l,c,t.radius,a.radius);if(this.enableFrictionReduction&&(this.enableFriction=d),c&&y)return!0;f+=y}}this.enableFrictionReduction&&(d=this.enableFriction,this.enableFriction=!1);var b=k;s(b,t);var v=this.convexCapsule(e,b,o,n,r,a,u,l,c);if(this.enableFrictionReduction&&(this.enableFriction=d),c&&v)return!0;if(f+=v,this.enableFrictionReduction){var d=this.enableFriction;this.enableFriction=!1}s(b,a);var w=this.convexCapsule(r,b,u,l,e,t,o,n,c);return this.enableFrictionReduction&&(this.enableFriction=d),c&&w?!0:(f+=w,this.enableFrictionReduction&&f&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f)},o.prototype[g.LINE|g.LINE]=o.prototype.lineLine=function(e,t,o,s,n,i,r,a,u){return u?!1:0},o.prototype[g.PLANE|g.LINE]=o.prototype.planeLine=function(e,t,o,s,n,l,c,d,p){var h=v,f=w,m=A,g=E,y=_,L=B,P=q,j=C,U=S,x=V,I=0;i.set(h,-l.length/2,0),i.set(f,l.length/2,0),i.rotate(m,h,d),i.rotate(g,f,d),a(m,m,c),a(g,g,c),i.copy(h,m),i.copy(f,g),r(y,f,h),i.normalize(L,y),i.rotate90cw(U,L),i.rotate(j,b,s),x[0]=h,x[1]=f;for(var M=0;M<x.length;M++){var F=x[M];r(P,F,o);var N=u(P,j);if(0>N){if(p)return!0;var T=this.createContactEquation(e,n,t,l);I++,i.copy(T.normalA,j),i.normalize(T.normalA,T.normalA),i.scale(P,j,N),r(T.contactPointA,F,P),r(T.contactPointA,T.contactPointA,e.position),r(T.contactPointB,F,c),a(T.contactPointB,T.contactPointB,c),r(T.contactPointB,T.contactPointB,n.position),this.contactEquations.push(T),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(T))}}return p?!1:(this.enableFrictionReduction||I&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(I)),I)},o.prototype[g.PARTICLE|g.CAPSULE]=o.prototype.particleCapsule=function(e,t,o,s,n,i,r,a,u){return this.circleLine(e,t,o,s,n,i,r,a,u,i.radius,0)},o.prototype[g.CIRCLE|g.LINE]=o.prototype.circleLine=function(e,t,o,s,n,l,c,d,p,h,f){var h=h||0,f="undefined"!=typeof f?f:t.radius,m=v,g=w,y=A,b=E,I=_,M=B,F=q,N=C,T=S,R=L,G=P,O=j,k=U,D=x,X=V;i.set(N,-l.length/2,0),i.set(T,l.length/2,0),i.rotate(R,N,d),i.rotate(G,T,d),a(R,R,c),a(G,G,c),i.copy(N,R),i.copy(T,G),r(M,T,N),i.normalize(F,M),i.rotate90cw(I,F),r(O,o,N);var W=u(O,I);r(b,N,c),r(k,o,c);var Y=f+h;if(Math.abs(W)<Y){i.scale(m,I,W),r(y,o,m),i.scale(g,I,u(I,k)),i.normalize(g,g),i.scale(g,g,h),a(y,y,g);var z=u(F,y),K=u(F,N),H=u(F,T);if(z>K&&H>z){if(p)return!0;var Z=this.createContactEquation(e,n,t,l);return i.scale(Z.normalA,m,-1),i.normalize(Z.normalA,Z.normalA),i.scale(Z.contactPointA,Z.normalA,f),a(Z.contactPointA,Z.contactPointA,o),r(Z.contactPointA,Z.contactPointA,e.position),r(Z.contactPointB,y,c),a(Z.contactPointB,Z.contactPointB,c),r(Z.contactPointB,Z.contactPointB,n.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}X[0]=N,X[1]=T;for(var J=0;J<X.length;J++){var Q=X[J];if(r(O,Q,o),i.squaredLength(O)<Math.pow(Y,2)){if(p)return!0;var Z=this.createContactEquation(e,n,t,l);return i.copy(Z.normalA,O),i.normalize(Z.normalA,Z.normalA),i.scale(Z.contactPointA,Z.normalA,f),a(Z.contactPointA,Z.contactPointA,o),r(Z.contactPointA,Z.contactPointA,e.position),r(Z.contactPointB,Q,c),i.scale(D,Z.normalA,-h),a(Z.contactPointB,Z.contactPointB,D),a(Z.contactPointB,Z.contactPointB,c),r(Z.contactPointB,Z.contactPointB,n.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}return 0},o.prototype[g.CIRCLE|g.CAPSULE]=o.prototype.circleCapsule=function(e,t,o,s,n,i,r,a,u){return this.circleLine(e,t,o,s,n,i,r,a,u,i.radius)},o.prototype[g.CIRCLE|g.CONVEX]=o.prototype[g.CIRCLE|g.RECTANGLE]=o.prototype.circleConvex=function(e,t,o,s,u,l,c,d,p,h){for(var h="number"==typeof h?h:t.radius,f=v,m=w,g=A,y=E,b=_,B=L,q=P,C=U,S=x,j=I,F=M,N=!1,V=Number.MAX_VALUE,T=l.vertices,R=0;R!==T.length+1;R++){var G=T[R%T.length],O=T[(R+1)%T.length];if(i.rotate(f,G,d),i.rotate(m,O,d),a(f,f,c),a(m,m,c),r(g,m,f),i.normalize(y,g),i.rotate90cw(b,y),i.scale(S,b,-t.radius),a(S,S,o),n(S,l,c,d)){i.sub(j,f,S);var k=Math.abs(i.dot(j,b));V>k&&(i.copy(F,S),V=k,i.scale(C,b,k),i.add(C,C,S),N=!0)}}if(N){if(p)return!0;var D=this.createContactEquation(e,u,t,l);return i.sub(D.normalA,F,o),i.normalize(D.normalA,D.normalA),i.scale(D.contactPointA,D.normalA,h),a(D.contactPointA,D.contactPointA,o),r(D.contactPointA,D.contactPointA,e.position),r(D.contactPointB,C,c),a(D.contactPointB,D.contactPointB,c),r(D.contactPointB,D.contactPointB,u.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}if(h>0)for(var R=0;R<T.length;R++){var X=T[R];if(i.rotate(q,X,d),a(q,q,c),r(B,q,o),i.squaredLength(B)<Math.pow(h,2)){if(p)return!0;var D=this.createContactEquation(e,u,t,l);return i.copy(D.normalA,B),i.normalize(D.normalA,D.normalA),i.scale(D.contactPointA,D.normalA,h),a(D.contactPointA,D.contactPointA,o),r(D.contactPointA,D.contactPointA,e.position),r(D.contactPointB,q,c),a(D.contactPointB,D.contactPointB,c),r(D.contactPointB,D.contactPointB,u.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}}return 0};var D=i.create(),X=i.create(),W=i.create(),Y=i.create();o.prototype[g.PARTICLE|g.CONVEX]=o.prototype[g.PARTICLE|g.RECTANGLE]=o.prototype.particleConvex=function(e,t,o,s,l,c,d,p,h){var f=v,m=w,g=A,y=E,b=_,C=B,S=q,P=L,j=U,x=F,I=N,M=Number.MAX_VALUE,V=!1,T=c.vertices;if(!n(o,c,d,p))return 0;if(h)return!0;for(var R=0;R!==T.length+1;R++){var G=T[R%T.length],O=T[(R+1)%T.length];i.rotate(f,G,p),i.rotate(m,O,p),a(f,f,d),a(m,m,d),r(g,m,f),i.normalize(y,g),i.rotate90cw(b,y),r(P,o,f),u(P,b),r(C,f,d),r(S,o,d),i.sub(x,f,o);var k=Math.abs(i.dot(x,b));M>k&&(M=k,i.scale(j,b,k),i.add(j,j,o),i.copy(I,b),V=!0)}if(V){var D=this.createContactEquation(e,l,t,c);return i.scale(D.normalA,I,-1),i.normalize(D.normalA,D.normalA),i.set(D.contactPointA,0,0),a(D.contactPointA,D.contactPointA,o),r(D.contactPointA,D.contactPointA,e.position),r(D.contactPointB,j,d),a(D.contactPointB,D.contactPointB,d),r(D.contactPointB,D.contactPointB,l.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}return 0},o.prototype[g.CIRCLE]=o.prototype.circleCircle=function(e,t,o,s,n,u,l,c,d,p,h){var f=v,p=p||t.radius,h=h||u.radius;r(f,o,l);var m=p+h;if(i.squaredLength(f)>Math.pow(m,2))return 0;if(d)return!0;var g=this.createContactEquation(e,n,t,u);return r(g.normalA,l,o),i.normalize(g.normalA,g.normalA),i.scale(g.contactPointA,g.normalA,p),i.scale(g.contactPointB,g.normalA,-h),a(g.contactPointA,g.contactPointA,o),r(g.contactPointA,g.contactPointA,e.position),a(g.contactPointB,g.contactPointB,l),r(g.contactPointB,g.contactPointB,n.position),this.contactEquations.push(g),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g)),1},o.prototype[g.PLANE|g.CONVEX]=o.prototype[g.PLANE|g.RECTANGLE]=o.prototype.planeConvex=function(e,t,o,s,n,l,c,d,p){var h=v,f=w,m=A,g=0;i.rotate(f,b,s);for(var y=0;y!==l.vertices.length;y++){var E=l.vertices[y];if(i.rotate(h,E,d),a(h,h,c),r(m,h,o),u(m,f)<=0){if(p)return!0;g++;var _=this.createContactEquation(e,n,t,l);r(m,h,o),i.copy(_.normalA,f);var B=u(m,_.normalA);i.scale(m,_.normalA,B),r(_.contactPointB,h,n.position),r(_.contactPointA,h,m),r(_.contactPointA,_.contactPointA,e.position),this.contactEquations.push(_),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(_))}}return this.enableFrictionReduction&&this.enableFriction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g},o.prototype[g.PARTICLE|g.PLANE]=o.prototype.particlePlane=function(e,t,o,s,n,a,l,c,d){var p=v,h=w;c=c||0,r(p,o,l),i.rotate(h,b,c);var f=u(p,h);if(f>0)return 0;if(d)return!0;var m=this.createContactEquation(n,e,a,t);return i.copy(m.normalA,h),i.scale(p,m.normalA,f),r(m.contactPointA,o,p),r(m.contactPointA,m.contactPointA,n.position),r(m.contactPointB,o,e.position),this.contactEquations.push(m),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m)),1},o.prototype[g.CIRCLE|g.PARTICLE]=o.prototype.circleParticle=function(e,t,o,s,n,u,l,c,d){var p=v;if(r(p,l,o),i.squaredLength(p)>Math.pow(t.radius,2))return 0;if(d)return!0;var h=this.createContactEquation(e,n,t,u);return i.copy(h.normalA,p),i.normalize(h.normalA,h.normalA),i.scale(h.contactPointA,h.normalA,t.radius),a(h.contactPointA,h.contactPointA,o),r(h.contactPointA,h.contactPointA,e.position),r(h.contactPointB,l,n.position),this.contactEquations.push(h),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(h)),1};var z=new f(1),K=i.create(),H=i.create();i.create(),o.prototype[g.PLANE|g.CAPSULE]=o.prototype.planeCapsule=function(e,t,o,s,n,r,u,l,c){var d=K,p=H,h=z;i.set(d,-r.length/2,0),i.rotate(d,d,l),a(d,d,u),i.set(p,r.length/2,0),i.rotate(p,p,l),a(p,p,u),h.radius=r.radius;var f;this.enableFrictionReduction&&(f=this.enableFriction,this.enableFriction=!1);var m=this.circlePlane(n,h,d,0,e,t,o,s,c),g=this.circlePlane(n,h,p,0,e,t,o,s,c);if(this.enableFrictionReduction&&(this.enableFriction=f),c)return m||g;var y=m+g;return this.enableFrictionReduction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},o.prototype[g.CIRCLE|g.PLANE]=o.prototype.circlePlane=function(e,t,o,s,n,l,c,d,p){var h=e,f=t,m=o,g=n,y=c,E=d;E=E||0;var _=v,B=w,q=A;r(_,m,y),i.rotate(B,b,E);var C=u(B,_);if(C>f.radius)return 0;if(p)return!0;var S=this.createContactEquation(g,h,l,t);return i.copy(S.normalA,B),i.scale(S.contactPointB,S.normalA,-f.radius),a(S.contactPointB,S.contactPointB,m),r(S.contactPointB,S.contactPointB,h.position),i.scale(q,S.normalA,C),r(S.contactPointA,_,q),a(S.contactPointA,S.contactPointA,y),r(S.contactPointA,S.contactPointA,g.position),this.contactEquations.push(S),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(S)),1},o.prototype[g.CONVEX]=o.prototype[g.CONVEX|g.RECTANGLE]=o.prototype[g.RECTANGLE]=o.prototype.convexConvex=function(e,t,s,n,l,c,d,p,h,f){var m=v,g=w,y=A,b=E,B=_,L=q,P=C,j=S,U=0,f="number"==typeof f?f:0,x=o.findSeparatingAxis(t,s,n,c,d,p,m);if(!x)return 0;r(P,d,s),u(m,P)>0&&i.scale(m,m,-1);var I=o.getClosestEdge(t,n,m,!0),M=o.getClosestEdge(c,p,m);if(-1===I||-1===M)return 0;for(var F=0;2>F;F++){var N=I,V=M,T=t,R=c,G=s,O=d,k=n,D=p,X=e,W=l;if(0===F){var Y;Y=N,N=V,V=Y,Y=T,T=R,R=Y,Y=G,G=O,O=Y,Y=k,k=D,D=Y,Y=X,X=W,W=Y}for(var z=V;V+2>z;z++){var K=R.vertices[(z+R.vertices.length)%R.vertices.length];i.rotate(g,K,D),a(g,g,O);for(var H=0,Z=N-1;N+2>Z;Z++){var J=T.vertices[(Z+T.vertices.length)%T.vertices.length],Q=T.vertices[(Z+1+T.vertices.length)%T.vertices.length];i.rotate(y,J,k),i.rotate(b,Q,k),a(y,y,G),a(b,b,G),r(B,b,y),i.rotate90cw(j,B),i.normalize(j,j),r(P,g,y);var $=u(j,P);(Z===N&&f>=$||Z!==N&&0>=$)&&H++}if(H>=3){if(h)return!0;var et=this.createContactEquation(X,W,T,R);U++;var J=T.vertices[N%T.vertices.length],Q=T.vertices[(N+1)%T.vertices.length];i.rotate(y,J,k),i.rotate(b,Q,k),a(y,y,G),a(b,b,G),r(B,b,y),i.rotate90cw(et.normalA,B),i.normalize(et.normalA,et.normalA),r(P,g,y);var $=u(et.normalA,P);i.scale(L,et.normalA,$),r(et.contactPointA,g,G),r(et.contactPointA,et.contactPointA,L),a(et.contactPointA,et.contactPointA,G),r(et.contactPointA,et.contactPointA,X.position),r(et.contactPointB,g,O),a(et.contactPointB,et.contactPointB,O),r(et.contactPointB,et.contactPointB,W.position),this.contactEquations.push(et),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(et))}}}return this.enableFrictionReduction&&this.enableFriction&&U&&this.frictionEquations.push(this.createFrictionFromAverage(U)),U};var Z=i.fromValues(0,0);o.projectConvexOntoAxis=function(e,t,o,s,n){var r,a,l=null,c=null,d=Z;i.rotate(d,s,-o);for(var p=0;p<e.vertices.length;p++)r=e.vertices[p],a=u(r,d),(null===l||a>l)&&(l=a),(null===c||c>a)&&(c=a);if(c>l){var h=c;c=l,l=h}var f=u(t,s);i.set(n,c+f,l+f)};var J=i.fromValues(0,0),Q=i.fromValues(0,0),$=i.fromValues(0,0),et=i.fromValues(0,0),tt=i.fromValues(0,0),ot=i.fromValues(0,0);o.findSeparatingAxis=function(e,t,s,n,a,u,l){var c=null,d=!1,p=!1,h=J,f=Q,m=$,g=et,b=tt,v=ot;if(e instanceof y&&n instanceof y)for(var w=0;2!==w;w++){var A=e,E=s;1===w&&(A=n,E=u);for(var _=0;2!==_;_++){0===_?i.set(g,0,1):1===_&&i.set(g,1,0),0!==E&&i.rotate(g,g,E),o.projectConvexOntoAxis(e,t,s,g,b),o.projectConvexOntoAxis(n,a,u,g,v);var B=b,q=v,C=!1;b[0]>v[0]&&(q=b,B=v,C=!0);var S=q[0]-B[1];d=0>=S,(null===c||S>c)&&(i.copy(l,g),c=S,p=d)}}else for(var w=0;2!==w;w++){var A=e,E=s;1===w&&(A=n,E=u);for(var _=0;_!==A.vertices.length;_++){i.rotate(f,A.vertices[_],E),i.rotate(m,A.vertices[(_+1)%A.vertices.length],E),r(h,m,f),i.rotate90cw(g,h),i.normalize(g,g),o.projectConvexOntoAxis(e,t,s,g,b),o.projectConvexOntoAxis(n,a,u,g,v);var B=b,q=v,C=!1;b[0]>v[0]&&(q=b,B=v,C=!0);var S=q[0]-B[1];d=0>=S,(null===c||S>c)&&(i.copy(l,g),c=S,p=d)}}return p};var st=i.fromValues(0,0),nt=i.fromValues(0,0),it=i.fromValues(0,0);o.getClosestEdge=function(e,t,o,s){var n=st,a=nt,l=it;i.rotate(n,o,-t),s&&i.scale(n,n,-1);for(var c=-1,d=e.vertices.length,p=-1,h=0;h!==d;h++){r(a,e.vertices[(h+1)%d],e.vertices[h%d]),i.rotate90cw(l,a),i.normalize(l,l);var f=u(l,n);(-1===c||f>p)&&(c=h%d,p=f)}return c};var rt=i.create(),at=i.create(),ut=i.create(),lt=i.create(),ct=i.create(),dt=i.create(),pt=i.create();o.prototype[g.CIRCLE|g.HEIGHTFIELD]=o.prototype.circleHeightfield=function(e,t,o,s,n,u,l,c,d,p){var h=u.data,p=p||t.radius,f=u.elementWidth,m=at,g=rt,y=ct,b=pt,v=dt,w=ut,A=lt,E=Math.floor((o[0]-p-l[0])/f),_=Math.ceil((o[0]+p-l[0])/f);0>E&&(E=0),_>=h.length&&(_=h.length-1);for(var B=h[E],q=h[_],C=E;_>C;C++)h[C]<q&&(q=h[C]),h[C]>B&&(B=h[C]);if(o[1]-p>B)return d?!1:0;o[1]+p<q;for(var S=!1,C=E;_>C;C++){i.set(w,C*f,h[C]),i.set(A,(C+1)*f,h[C+1]),i.add(w,w,l),i.add(A,A,l),i.sub(v,A,w),i.rotate(v,v,Math.PI/2),i.normalize(v,v),i.scale(g,v,-p),i.add(g,g,o),i.sub(m,g,w);var L=i.dot(m,v);if(g[0]>=w[0]&&g[0]<A[0]&&0>=L){if(d)return!0;S=!0,i.scale(m,v,-L),i.add(y,g,m),i.copy(b,v);var P=this.createContactEquation(n,e,u,t);i.copy(P.normalA,b),i.scale(P.contactPointB,P.normalA,-p),a(P.contactPointB,P.contactPointB,o),r(P.contactPointB,P.contactPointB,e.position),i.copy(P.contactPointA,y),i.sub(P.contactPointA,P.contactPointA,n.position),this.contactEquations.push(P),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P))}}if(S=!1,p>0)for(var C=E;_>=C;C++)if(i.set(w,C*f,h[C]),i.add(w,w,l),i.sub(m,o,w),i.squaredLength(m)<Math.pow(p,2)){if(d)return!0;S=!0;var P=this.createContactEquation(n,e,u,t);i.copy(P.normalA,m),i.normalize(P.normalA,P.normalA),i.scale(P.contactPointB,P.normalA,-p),a(P.contactPointB,P.contactPointB,o),r(P.contactPointB,P.contactPointB,e.position),r(P.contactPointA,w,l),a(P.contactPointA,P.contactPointA,l),r(P.contactPointA,P.contactPointA,n.position),this.contactEquations.push(P),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P))}return S?1:0};var ht=i.create(),ft=i.create(),mt=i.create(),gt=new m([i.create(),i.create(),i.create(),i.create()]);o.prototype[g.RECTANGLE|g.HEIGHTFIELD]=o.prototype[g.CONVEX|g.HEIGHTFIELD]=o.prototype.convexHeightfield=function(e,t,o,s,n,r,a,u,l){var c=r.data,d=r.elementWidth,p=ht,h=ft,f=mt,m=gt,g=Math.floor((e.aabb.lowerBound[0]-a[0])/d),y=Math.ceil((e.aabb.upperBound[0]-a[0])/d);0>g&&(g=0),y>=c.length&&(y=c.length-1);for(var b=c[g],v=c[y],w=g;y>w;w++)c[w]<v&&(v=c[w]),c[w]>b&&(b=c[w]);if(e.aabb.lowerBound[1]>b)return l?!1:0;for(var A=0,w=g;y>w;w++){i.set(p,w*d,c[w]),i.set(h,(w+1)*d,c[w+1]),i.add(p,p,a),i.add(h,h,a);var E=100;i.set(f,.5*(h[0]+p[0]),.5*(h[1]+p[1]-E)),i.sub(m.vertices[0],h,f),i.sub(m.vertices[1],p,f),i.copy(m.vertices[2],m.vertices[1]),i.copy(m.vertices[3],m.vertices[0]),m.vertices[2][1]-=E,m.vertices[3][1]-=E,A+=this.convexConvex(e,t,o,s,n,m,f,0,l)}return A}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/collision/Narrowphase.js","/collision")},{"../equations/ContactEquation":24,"../equations/Equation":25,"../equations/FrictionEquation":26,"../math/vec2":33,"../objects/Body":34,"../shapes/Circle":40,"../shapes/Convex":41,"../shapes/Rectangle":46,"../shapes/Shape":47,"../utils/TupleDictionary":51,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],16:[function(e,t){(function(){function o(){n.call(this,n.SAP),this.axisList=[],this.world=null,this.axisIndex=0;var e=this.axisList;this._addBodyHandler=function(t){e.push(t.body)},this._removeBodyHandler=function(t){var o=e.indexOf(t.body);-1!==o&&e.splice(o,1)}}var s=e("../utils/Utils"),n=e("../collision/Broadphase");t.exports=o,o.prototype=new n,o.prototype.setWorld=function(e){this.axisList.length=0,s.appendArray(this.axisList,e.bodies),e.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),e.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=e},o.sortAxisList=function(e,t){t=0|t;for(var o=1,s=e.length;s>o;o++){for(var n=e[o],i=o-1;i>=0&&!(e[i].aabb.lowerBound[t]<=n.aabb.lowerBound[t]);i--)e[i+1]=e[i];e[i+1]=n}return e},o.prototype.getCollisionPairs=function(){var e=this.axisList,t=this.result,s=this.axisIndex;t.length=0;for(var i=e.length;i--;){var r=e[i];r.aabbNeedsUpdate&&r.updateAABB()}o.sortAxisList(e,s);for(var a=0,u=0|e.length;a!==u;a++)for(var l=e[a],c=a+1;u>c;c++){var d=e[c],p=d.aabb.lowerBound[s]<=l.aabb.upperBound[s];if(!p)break;n.canCollide(l,d)&&this.boundingVolumeCheck(l,d)&&t.push(l,d)}return t}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/collision/SAPBroadphase.js","/collision")},{"../collision/Broadphase":12,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],17:[function(e,t){(function(){function o(e,t,o,n){this.type=o,n=s.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}t.exports=o;var s=e("../utils/Utils");o.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},o.DISTANCE=1,o.GEAR=2,o.LOCK=3,o.PRISMATIC=4,o.REVOLUTE=5,o.prototype.setStiffness=function(e){for(var t=this.equations,o=0;o!==t.length;o++){var s=t[o];s.stiffness=e,s.needsUpdate=!0}},o.prototype.setRelaxation=function(e){for(var t=this.equations,o=0;o!==t.length;o++){var s=t[o];s.relaxation=e,s.needsUpdate=!0}}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/constraints/Constraint.js","/constraints")},{"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],18:[function(e,t){(function(){function o(e,t,o){o=r.defaults(o,{localAnchorA:[0,0],localAnchorB:[0,0]}),s.call(this,e,t,s.DISTANCE,o),this.localAnchorA=i.fromValues(o.localAnchorA[0],o.localAnchorA[1]),this.localAnchorB=i.fromValues(o.localAnchorB[0],o.localAnchorB[1]);var a=this.localAnchorA,u=this.localAnchorB;if(this.distance=0,"number"==typeof o.distance)this.distance=o.distance;else{var l=i.create(),c=i.create(),d=i.create();i.rotate(l,a,e.angle),i.rotate(c,u,t.angle),i.add(d,t.position,c),i.sub(d,d,l),i.sub(d,d,e.position),this.distance=i.length(d)}var p;p="undefined"==typeof o.maxForce?Number.MAX_VALUE:o.maxForce;var h=new n(e,t,-p,p);this.equations=[h],this.maxForce=p;var d=i.create(),f=i.create(),m=i.create(),g=this;h.computeGq=function(){var e=this.bodyA,t=this.bodyB,o=e.position,s=t.position;return i.rotate(f,a,e.angle),i.rotate(m,u,t.angle),i.add(d,s,m),i.sub(d,d,f),i.sub(d,d,o),i.length(d)-g.distance},this.setMaxForce(p),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var s=e("./Constraint"),n=e("../equations/Equation"),i=e("../math/vec2"),r=e("../utils/Utils");
t.exports=o,o.prototype=new s;var a=i.create(),u=i.create(),l=i.create();o.prototype.update=function(){var e=this.equations[0],t=this.bodyA,o=this.bodyB,s=(this.distance,t.position),n=o.position,r=this.equations[0],c=e.G;i.rotate(u,this.localAnchorA,t.angle),i.rotate(l,this.localAnchorB,o.angle),i.add(a,n,l),i.sub(a,a,u),i.sub(a,a,s),this.position=i.length(a);var d=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(r.maxForce=0,r.minForce=-this.maxForce,this.distance=this.upperLimit,d=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(r.maxForce=this.maxForce,r.minForce=0,this.distance=this.lowerLimit,d=!0),(this.lowerLimitEnabled||this.upperLimitEnabled)&&!d)return void(r.enabled=!1);r.enabled=!0,i.normalize(a,a);var p=i.crossLength(u,a),h=i.crossLength(l,a);c[0]=-a[0],c[1]=-a[1],c[2]=-p,c[3]=a[0],c[4]=a[1],c[5]=h},o.prototype.setMaxForce=function(e){var t=this.equations[0];t.minForce=-e,t.maxForce=e},o.prototype.getMaxForce=function(){var e=this.equations[0];return e.maxForce}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/constraints/DistanceConstraint.js","/constraints")},{"../equations/Equation":25,"../math/vec2":33,"../utils/Utils":52,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],19:[function(e,t){(function(){function o(e,t,o){o=o||{},s.call(this,e,t,s.GEAR,o),this.ratio="number"==typeof o.ratio?o.ratio:1,this.angle="number"==typeof o.angle?o.angle:t.angle-this.ratio*e.angle,o.angle=this.angle,o.ratio=this.ratio,this.equations=[new n(e,t,o)],"number"==typeof o.maxTorque&&this.setMaxTorque(o.maxTorque)}var s=e("./Constraint"),n=(e("../equations/Equation"),e("../equations/AngleLockEquation"));e("../math/vec2"),t.exports=o,o.prototype=new s,o.prototype.update=function(){var e=this.equations[0];e.ratio!==this.ratio&&e.setRatio(this.ratio),e.angle=this.angle},o.prototype.setMaxTorque=function(e){this.equations[0].setMaxTorque(e)},o.prototype.getMaxTorque=function(){return this.equations[0].maxForce}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/constraints/GearConstraint.js","/constraints")},{"../equations/AngleLockEquation":23,"../equations/Equation":25,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],20:[function(e,t){(function(){function o(e,t,o){o=o||{},s.call(this,e,t,s.LOCK,o);var r="undefined"==typeof o.maxForce?Number.MAX_VALUE:o.maxForce,a=(o.localAngleB||0,new i(e,t,-r,r)),u=new i(e,t,-r,r),l=new i(e,t,-r,r),c=n.create(),d=n.create(),p=this;a.computeGq=function(){return n.rotate(c,p.localOffsetB,e.angle),n.sub(d,t.position,e.position),n.sub(d,d,c),d[0]},u.computeGq=function(){return n.rotate(c,p.localOffsetB,e.angle),n.sub(d,t.position,e.position),n.sub(d,d,c),d[1]};var h=n.create(),f=n.create();l.computeGq=function(){return n.rotate(h,p.localOffsetB,t.angle-p.localAngleB),n.scale(h,h,-1),n.sub(d,e.position,t.position),n.add(d,d,h),n.rotate(f,h,-Math.PI/2),n.normalize(f,f),n.dot(d,f)},this.localOffsetB=n.create(),o.localOffsetB?n.copy(this.localOffsetB,o.localOffsetB):(n.sub(this.localOffsetB,t.position,e.position),n.rotate(this.localOffsetB,this.localOffsetB,-e.angle)),this.localAngleB=0,this.localAngleB="number"==typeof o.localAngleB?o.localAngleB:t.angle-e.angle,this.equations.push(a,u,l),this.setMaxForce(r)}var s=e("./Constraint"),n=e("../math/vec2"),i=e("../equations/Equation");t.exports=o,o.prototype=new s,o.prototype.setMaxForce=function(e){for(var t=this.equations,o=0;o<this.equations.length;o++)t[o].maxForce=e,t[o].minForce=-e},o.prototype.getMaxForce=function(){return this.equations[0].maxForce};var r=n.create(),a=n.create(),u=n.create(),l=n.fromValues(1,0),c=n.fromValues(0,1);o.prototype.update=function(){var e=this.equations[0],t=this.equations[1],o=this.equations[2],s=this.bodyA,i=this.bodyB;n.rotate(r,this.localOffsetB,s.angle),n.rotate(a,this.localOffsetB,i.angle-this.localAngleB),n.scale(a,a,-1),n.rotate(u,a,Math.PI/2),n.normalize(u,u),e.G[0]=-1,e.G[1]=0,e.G[2]=-n.crossLength(r,l),e.G[3]=1,t.G[0]=0,t.G[1]=-1,t.G[2]=-n.crossLength(r,c),t.G[4]=1,o.G[0]=-u[0],o.G[1]=-u[1],o.G[3]=u[0],o.G[4]=u[1],o.G[5]=n.crossLength(a,u)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/constraints/LockConstraint.js","/constraints")},{"../equations/Equation":25,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],21:[function(e,t){(function(){function o(e,t,o){o=o||{},s.call(this,e,t,s.PRISMATIC,o);var u=r.fromValues(0,0),l=r.fromValues(1,0),c=r.fromValues(0,0);o.localAnchorA&&r.copy(u,o.localAnchorA),o.localAxisA&&r.copy(l,o.localAxisA),o.localAnchorB&&r.copy(c,o.localAnchorB),this.localAnchorA=u,this.localAnchorB=c,this.localAxisA=l;var d=this.maxForce="undefined"!=typeof o.maxForce?o.maxForce:Number.MAX_VALUE,p=new i(e,t,-d,d),h=new r.create,f=new r.create,m=new r.create,g=new r.create;if(p.computeGq=function(){return r.dot(m,g)},p.updateJacobian=function(){var o=this.G,s=e.position,n=t.position;r.rotate(h,u,e.angle),r.rotate(f,c,t.angle),r.add(m,n,f),r.sub(m,m,s),r.sub(m,m,h),r.rotate(g,l,e.angle+Math.PI/2),o[0]=-g[0],o[1]=-g[1],o[2]=-r.crossLength(h,g)+r.crossLength(g,m),o[3]=g[0],o[4]=g[1],o[5]=r.crossLength(f,g)},this.equations.push(p),!o.disableRotationalLock){var y=new a(e,t,-d,d);this.equations.push(y)}this.position=0,this.velocity=0,this.lowerLimitEnabled="undefined"!=typeof o.lowerLimit?!0:!1,this.upperLimitEnabled="undefined"!=typeof o.upperLimit?!0:!1,this.lowerLimit="undefined"!=typeof o.lowerLimit?o.lowerLimit:0,this.upperLimit="undefined"!=typeof o.upperLimit?o.upperLimit:1,this.upperLimitEquation=new n(e,t),this.lowerLimitEquation=new n(e,t),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=d,this.motorEquation=new i(e,t),this.motorEnabled=!1,this.motorSpeed=0;var b=this,v=this.motorEquation;v.computeGW,v.computeGq=function(){return 0},v.computeGW=function(){var e=this.G,t=this.bodyA,o=this.bodyB,s=t.velocity,n=o.velocity,i=t.angularVelocity,r=o.angularVelocity;return this.gmult(e,s,i,n,r)+b.motorSpeed}}var s=e("./Constraint"),n=e("../equations/ContactEquation"),i=e("../equations/Equation"),r=e("../math/vec2"),a=e("../equations/RotationalLockEquation");t.exports=o,o.prototype=new s;var u=r.create(),l=r.create(),c=r.create(),d=r.create(),p=r.create(),h=r.create();o.prototype.update=function(){var e=this.equations,t=e[0],o=this.upperLimit,s=this.lowerLimit,n=this.upperLimitEquation,i=this.lowerLimitEquation,a=this.bodyA,f=this.bodyB,m=this.localAxisA,g=this.localAnchorA,y=this.localAnchorB;t.updateJacobian(),r.rotate(u,m,a.angle),r.rotate(d,g,a.angle),r.add(l,d,a.position),r.rotate(p,y,f.angle),r.add(c,p,f.position);var b=this.position=r.dot(c,u)-r.dot(l,u);if(this.motorEnabled){var v=this.motorEquation.G;v[0]=u[0],v[1]=u[1],v[2]=r.crossLength(u,p),v[3]=-u[0],v[4]=-u[1],v[5]=-r.crossLength(u,d)}if(this.upperLimitEnabled&&b>o)r.scale(n.normalA,u,-1),r.sub(n.contactPointA,l,a.position),r.sub(n.contactPointB,c,f.position),r.scale(h,u,o),r.add(n.contactPointA,n.contactPointA,h),-1===e.indexOf(n)&&e.push(n);else{var w=e.indexOf(n);-1!==w&&e.splice(w,1)}if(this.lowerLimitEnabled&&s>b)r.scale(i.normalA,u,1),r.sub(i.contactPointA,l,a.position),r.sub(i.contactPointB,c,f.position),r.scale(h,u,s),r.sub(i.contactPointB,i.contactPointB,h),-1===e.indexOf(i)&&e.push(i);else{var w=e.indexOf(i);-1!==w&&e.splice(w,1)}},o.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},o.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},o.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/constraints/PrismaticConstraint.js","/constraints")},{"../equations/ContactEquation":24,"../equations/Equation":25,"../equations/RotationalLockEquation":27,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],22:[function(e,t){(function(){function o(e,t,o){o=o||{},s.call(this,e,t,s.REVOLUTE,o);var h=this.maxForce="undefined"!=typeof o.maxForce?o.maxForce:Number.MAX_VALUE;this.pivotA=a.create(),this.pivotB=a.create(),o.worldPivot?(a.sub(this.pivotA,o.worldPivot,e.position),a.sub(this.pivotB,o.worldPivot,t.position),a.rotate(this.pivotA,this.pivotA,-e.angle),a.rotate(this.pivotB,this.pivotB,-t.angle)):(a.copy(this.pivotA,o.localPivotA),a.copy(this.pivotB,o.localPivotB));var f=this.equations=[new n(e,t,-h,h),new n(e,t,-h,h)],m=f[0],g=f[1],y=this;m.computeGq=function(){return a.rotate(u,y.pivotA,e.angle),a.rotate(l,y.pivotB,t.angle),a.add(p,t.position,l),a.sub(p,p,e.position),a.sub(p,p,u),a.dot(p,c)},g.computeGq=function(){return a.rotate(u,y.pivotA,e.angle),a.rotate(l,y.pivotB,t.angle),a.add(p,t.position,l),a.sub(p,p,e.position),a.sub(p,p,u),a.dot(p,d)},g.minForce=m.minForce=-h,g.maxForce=m.maxForce=h,this.motorEquation=new i(e,t),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new r(e,t),this.lowerLimitEquation=new r(e,t),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var s=e("./Constraint"),n=e("../equations/Equation"),i=e("../equations/RotationalVelocityEquation"),r=e("../equations/RotationalLockEquation"),a=e("../math/vec2");t.exports=o;var u=a.create(),l=a.create(),c=a.fromValues(1,0),d=a.fromValues(0,1),p=a.create();o.prototype=new s,o.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)},o.prototype.update=function(){var e=this.bodyA,t=this.bodyB,o=this.pivotA,s=this.pivotB,n=this.equations,i=(n[0],n[1],n[0]),r=n[1],p=this.upperLimit,h=this.lowerLimit,f=this.upperLimitEquation,m=this.lowerLimitEquation,g=this.angle=t.angle-e.angle;if(this.upperLimitEnabled&&g>p)f.angle=p,-1===n.indexOf(f)&&n.push(f);else{var y=n.indexOf(f);-1!==y&&n.splice(y,1)}if(this.lowerLimitEnabled&&h>g)m.angle=h,-1===n.indexOf(m)&&n.push(m);else{var y=n.indexOf(m);-1!==y&&n.splice(y,1)}a.rotate(u,o,e.angle),a.rotate(l,s,t.angle),i.G[0]=-1,i.G[1]=0,i.G[2]=-a.crossLength(u,c),i.G[3]=1,i.G[4]=0,i.G[5]=a.crossLength(l,c),r.G[0]=0,r.G[1]=-1,r.G[2]=-a.crossLength(u,d),r.G[3]=0,r.G[4]=1,r.G[5]=a.crossLength(l,d)},o.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},o.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},o.prototype.motorIsEnabled=function(){return!!this.motorEnabled},o.prototype.setMotorSpeed=function(e){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations[t].relativeVelocity=e}},o.prototype.getMotorSpeed=function(){return this.motorEnabled?this.motorEquation.relativeVelocity:!1}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/constraints/RevoluteConstraint.js","/constraints")},{"../equations/Equation":25,"../equations/RotationalLockEquation":27,"../equations/RotationalVelocityEquation":28,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],23:[function(e,t){(function(){function o(e,t,o){o=o||{},s.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0,this.ratio="number"==typeof o.ratio?o.ratio:1,this.setRatio(this.ratio)}var s=e("./Equation");e("../math/vec2"),t.exports=o,o.prototype=new s,o.prototype.constructor=o,o.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},o.prototype.setRatio=function(e){var t=this.G;t[2]=e,t[5]=-1,this.ratio=e},o.prototype.setMaxTorque=function(e){this.maxForce=e,this.minForce=-e}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/equations/AngleLockEquation.js","/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],24:[function(e,t){(function(){function o(e,t){s.call(this,e,t,0,Number.MAX_VALUE),this.contactPointA=n.create(),this.penetrationVec=n.create(),this.contactPointB=n.create(),this.normalA=n.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var s=e("./Equation"),n=e("../math/vec2");t.exports=o,o.prototype=new s,o.prototype.constructor=o,o.prototype.computeB=function(e,t,o){var s=this.bodyA,i=this.bodyB,r=this.contactPointA,a=this.contactPointB,u=s.position,l=i.position,c=this.penetrationVec,d=this.normalA,p=this.G,h=n.crossLength(r,d),f=n.crossLength(a,d);p[0]=-d[0],p[1]=-d[1],p[2]=-h,p[3]=d[0],p[4]=d[1],p[5]=f,n.add(c,l,a),n.sub(c,c,u),n.sub(c,c,r);var m,g;this.firstImpact&&0!==this.restitution?(g=0,m=1/t*(1+this.restitution)*this.computeGW()):(g=n.dot(d,c)+this.offset,m=this.computeGW());var y=this.computeGiMf(),b=-g*e-m*t-o*y;return b}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/equations/ContactEquation.js","/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],25:[function(e,t){(function(){function o(e,t,s,i){this.minForce="undefined"==typeof s?-Number.MAX_VALUE:s,this.maxForce="undefined"==typeof i?Number.MAX_VALUE:i,this.bodyA=e,this.bodyB=t,this.stiffness=o.DEFAULT_STIFFNESS,this.relaxation=o.DEFAULT_RELAXATION,this.G=new n.ARRAY_TYPE(6);for(var r=0;6>r;r++)this.G[r]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}t.exports=o;var s=e("../math/vec2"),n=e("../utils/Utils");e("../objects/Body"),o.prototype.constructor=o,o.DEFAULT_STIFFNESS=1e6,o.DEFAULT_RELAXATION=4,o.prototype.update=function(){var e=this.stiffness,t=this.relaxation,o=this.timeStep;this.a=4/(o*(1+4*t)),this.b=4*t/(1+4*t),this.epsilon=4/(o*o*e*(1+4*t)),this.needsUpdate=!1},o.prototype.gmult=function(e,t,o,s,n){return e[0]*t[0]+e[1]*t[1]+e[2]*o+e[3]*s[0]+e[4]*s[1]+e[5]*n},o.prototype.computeB=function(e,t,o){var s=this.computeGW(),n=this.computeGq(),i=this.computeGiMf();return-n*e-s*t-i*o};var i=s.create(),r=s.create();o.prototype.computeGq=function(){var e=this.G,t=this.bodyA,o=this.bodyB,s=(t.position,o.position,t.angle),n=o.angle;return this.gmult(e,i,s,r,n)+this.offset},o.prototype.computeGW=function(){var e=this.G,t=this.bodyA,o=this.bodyB,s=t.velocity,n=o.velocity,i=t.angularVelocity,r=o.angularVelocity;return this.gmult(e,s,i,n,r)+this.relativeVelocity},o.prototype.computeGWlambda=function(){var e=this.G,t=this.bodyA,o=this.bodyB,s=t.vlambda,n=o.vlambda,i=t.wlambda,r=o.wlambda;return this.gmult(e,s,i,n,r)};var a=s.create(),u=s.create();o.prototype.computeGiMf=function(){var e=this.bodyA,t=this.bodyB,o=e.force,n=e.angularForce,i=t.force,r=t.angularForce,l=e.invMassSolve,c=t.invMassSolve,d=e.invInertiaSolve,p=t.invInertiaSolve,h=this.G;return s.scale(a,o,l),s.scale(u,i,c),this.gmult(h,a,n*d,u,r*p)},o.prototype.computeGiMGt=function(){var e=this.bodyA,t=this.bodyB,o=e.invMassSolve,s=t.invMassSolve,n=e.invInertiaSolve,i=t.invInertiaSolve,r=this.G;return r[0]*r[0]*o+r[1]*r[1]*o+r[2]*r[2]*n+r[3]*r[3]*s+r[4]*r[4]*s+r[5]*r[5]*i};var l=s.create(),c=s.create(),d=s.create();s.create(),s.create(),s.create(),o.prototype.addToWlambda=function(e){var t=this.bodyA,o=this.bodyB,n=l,i=c,r=d,a=t.invMassSolve,u=o.invMassSolve,p=t.invInertiaSolve,h=o.invInertiaSolve,f=this.G;i[0]=f[0],i[1]=f[1],r[0]=f[3],r[1]=f[4],s.scale(n,i,a*e),s.add(t.vlambda,t.vlambda,n),t.wlambda+=p*f[2]*e,s.scale(n,r,u*e),s.add(o.vlambda,o.vlambda,n),o.wlambda+=h*f[5]*e},o.prototype.computeInvC=function(e){return 1/(this.computeGiMGt()+e)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/equations/Equation.js","/equations")},{"../math/vec2":33,"../objects/Body":34,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],26:[function(e,t){(function(){function o(e,t,o){n.call(this,e,t,-o,o),this.contactPointA=s.create(),this.contactPointB=s.create(),this.t=s.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var s=e("../math/vec2"),n=e("./Equation");e("../utils/Utils"),t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.setSlipForce=function(e){this.maxForce=e,this.minForce=-e},o.prototype.getSlipForce=function(){return this.maxForce},o.prototype.computeB=function(e,t,o){var n=(this.bodyA,this.bodyB,this.contactPointA),i=this.contactPointB,r=this.t,a=this.G;a[0]=-r[0],a[1]=-r[1],a[2]=-s.crossLength(n,r),a[3]=r[0],a[4]=r[1],a[5]=s.crossLength(i,r);var u=this.computeGW(),l=this.computeGiMf(),c=-u*t-o*l;return c}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/equations/FrictionEquation.js","/equations")},{"../math/vec2":33,"../utils/Utils":52,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],27:[function(e,t){(function(){function o(e,t,o){o=o||{},s.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0;var n=this.G;n[2]=1,n[5]=-1}var s=e("./Equation"),n=e("../math/vec2");t.exports=o,o.prototype=new s,o.prototype.constructor=o;var i=n.create(),r=n.create(),a=n.fromValues(1,0),u=n.fromValues(0,1);o.prototype.computeGq=function(){return n.rotate(i,a,this.bodyA.angle+this.angle),n.rotate(r,u,this.bodyB.angle),n.dot(i,r)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/equations/RotationalLockEquation.js","/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],28:[function(e,t){(function(){function o(e,t){s.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var s=e("./Equation");e("../math/vec2"),t.exports=o,o.prototype=new s,o.prototype.constructor=o,o.prototype.computeB=function(e,t,o){var s=this.G;s[2]=-1,s[5]=this.ratio;var n=this.computeGiMf(),i=this.computeGW(),r=-i*t-o*n;return r}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/equations/RotationalVelocityEquation.js","/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],29:[function(e,t){(function(){var e=function(){};t.exports=e,e.prototype={constructor:e,on:function(e,t,o){t.context=o||this,void 0===this._listeners&&(this._listeners={});var s=this._listeners;return void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(t)&&s[e].push(t),this},has:function(e,t){if(void 0===this._listeners)return!1;var o=this._listeners;if(t){if(void 0!==o[e]&&-1!==o[e].indexOf(t))return!0}else if(void 0!==o[e])return!0;return!1},off:function(e,t){if(void 0===this._listeners)return this;var o=this._listeners,s=o[e].indexOf(t);return-1!==s&&o[e].splice(s,1),this},emit:function(e){if(void 0===this._listeners)return this;var t=this._listeners,o=t[e.type];if(void 0!==o){e.target=this;for(var s=0,n=o.length;n>s;s++){var i=o[s];i.call(i.context,e)}}return this}}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/events/EventEmitter.js","/events")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],30:[function(e,t){(function(){function o(e,t,i){if(i=i||{},!(e instanceof s&&t instanceof s))throw new Error("First two arguments must be Material instances.");this.id=o.idCounter++,this.materialA=e,this.materialB=t,this.friction="undefined"!=typeof i.friction?Number(i.friction):.3,this.restitution="undefined"!=typeof i.restitution?Number(i.restitution):0,this.stiffness="undefined"!=typeof i.stiffness?Number(i.stiffness):n.DEFAULT_STIFFNESS,this.relaxation="undefined"!=typeof i.relaxation?Number(i.relaxation):n.DEFAULT_RELAXATION,this.frictionStiffness="undefined"!=typeof i.frictionStiffness?Number(i.frictionStiffness):n.DEFAULT_STIFFNESS,this.frictionRelaxation="undefined"!=typeof i.frictionRelaxation?Number(i.frictionRelaxation):n.DEFAULT_RELAXATION,this.surfaceVelocity="undefined"!=typeof i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}var s=e("./Material"),n=e("../equations/Equation");t.exports=o,o.idCounter=0}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/material/ContactMaterial.js","/material")},{"../equations/Equation":25,"./Material":31,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],31:[function(e,t){(function(){function e(t){this.id=t||e.idCounter++}t.exports=e,e.idCounter=0}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/material/Material.js","/material")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],32:[function(e,t){(function(){var e={};e.GetArea=function(e){if(e.length<6)return 0;for(var t=e.length-2,o=0,s=0;t>s;s+=2)o+=(e[s+2]-e[s])*(e[s+1]+e[s+3]);return o+=(e[0]-e[t])*(e[t+1]+e[1]),.5*-o},e.Triangulate=function(t){var o=t.length>>1;if(3>o)return[];for(var s=[],n=[],i=0;o>i;i++)n.push(i);for(var i=0,r=o;r>3;){var a=n[(i+0)%r],u=n[(i+1)%r],l=n[(i+2)%r],c=t[2*a],d=t[2*a+1],p=t[2*u],h=t[2*u+1],f=t[2*l],m=t[2*l+1],g=!1;if(e._convex(c,d,p,h,f,m)){g=!0;for(var y=0;r>y;y++){var b=n[y];if(b!=a&&b!=u&&b!=l&&e._PointInTriangle(t[2*b],t[2*b+1],c,d,p,h,f,m)){g=!1;break}}}if(g)s.push(a,u,l),n.splice((i+1)%r,1),r--,i=0;else if(i++>3*r)break}return s.push(n[0],n[1],n[2]),s},e._PointInTriangle=function(e,t,o,s,n,i,r,a){var u=r-o,l=a-s,c=n-o,d=i-s,p=e-o,h=t-s,f=u*u+l*l,m=u*c+l*d,g=u*p+l*h,y=c*c+d*d,b=c*p+d*h,v=1/(f*y-m*m),w=(y*g-m*b)*v,A=(f*b-m*g)*v;return w>=0&&A>=0&&1>w+A},e._convex=function(e,t,o,s,n,i){return(t-s)*(n-o)+(o-e)*(i-s)>=0},t.exports=e}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/math/polyk.js","/math")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],33:[function(e,t){(function(){var o=t.exports={},s=e("../utils/Utils");o.crossLength=function(e,t){return e[0]*t[1]-e[1]*t[0]},o.crossVZ=function(e,t,s){return o.rotate(e,t,-Math.PI/2),o.scale(e,e,s),e},o.crossZV=function(e,t,s){return o.rotate(e,s,Math.PI/2),o.scale(e,e,t),e},o.rotate=function(e,t,o){if(0!==o){var s=Math.cos(o),n=Math.sin(o),i=t[0],r=t[1];e[0]=s*i-n*r,e[1]=n*i+s*r}else e[0]=t[0],e[1]=t[1]},o.rotate90cw=function(e,t){var o=t[0],s=t[1];e[0]=s,e[1]=-o},o.toLocalFrame=function(e,t,s,n){o.copy(e,t),o.sub(e,e,s),o.rotate(e,e,-n)},o.toGlobalFrame=function(e,t,s,n){o.copy(e,t),o.rotate(e,e,n),o.add(e,e,s)},o.centroid=function(e,t,s,n){return o.add(e,t,s),o.add(e,e,n),o.scale(e,e,1/3),e},o.create=function(){var e=new s.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new s.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var o=new s.ARRAY_TYPE(2);return o[0]=e,o[1]=t,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,o){return e[0]=t,e[1]=o,e},o.add=function(e,t,o){return e[0]=t[0]+o[0],e[1]=t[1]+o[1],e},o.subtract=function(e,t,o){return e[0]=t[0]-o[0],e[1]=t[1]-o[1],e},o.sub=o.subtract,o.multiply=function(e,t,o){return e[0]=t[0]*o[0],e[1]=t[1]*o[1],e},o.mul=o.multiply,o.divide=function(e,t,o){return e[0]=t[0]/o[0],e[1]=t[1]/o[1],e},o.div=o.divide,o.scale=function(e,t,o){return e[0]=t[0]*o,e[1]=t[1]*o,e},o.distance=function(e,t){var o=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(o*o+s*s)},o.dist=o.distance,o.squaredDistance=function(e,t){var o=t[0]-e[0],s=t[1]-e[1];return o*o+s*s},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],o=e[1];return Math.sqrt(t*t+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],o=e[1];return t*t+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.normalize=function(e,t){var o=t[0],s=t[1],n=o*o+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/math/vec2.js","/math")},{"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],34:[function(e,t){(function(){function o(e){e=e||{},a.call(this),this.id=++o._idCounter,this.world=null,this.shapes=[],this.shapeOffsets=[],this.shapeAngles=[],this.mass=e.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!e.fixedRotation||!1,this.position=s.fromValues(0,0),e.position&&s.copy(this.position,e.position),this.interpolatedPosition=s.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=s.fromValues(0,0),this.previousAngle=0,this.velocity=s.fromValues(0,0),e.velocity&&s.copy(this.velocity,e.velocity),this.vlambda=s.fromValues(0,0),this.wlambda=0,this.angle=e.angle||0,this.angularVelocity=e.angularVelocity||0,this.force=s.create(),e.force&&s.copy(this.force,e.force),this.angularForce=e.angularForce||0,this.damping="number"==typeof e.damping?e.damping:.1,this.angularDamping="number"==typeof e.angularDamping?e.angularDamping:.1,this.type=o.STATIC,this.type="undefined"!=typeof e.type?e.type:e.mass?o.DYNAMIC:o.STATIC,this.boundingRadius=0,this.aabb=new r,this.aabbNeedsUpdate=!0,this.allowSleep=!0,this.wantsToSleep=!1,this.sleepState=o.AWAKE,this.sleepSpeedLimit=.2,this.sleepTimeLimit=1,this.gravityScale=1,this.timeLastSleepy=0,this.concavePath=null,this.lastDampingScale=1,this.lastAngularDampingScale=1,this.lastDampingTimeStep=-1,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var s=e("../math/vec2"),n=e("poly-decomp"),i=e("../shapes/Convex"),r=e("../collision/AABB"),a=e("../events/EventEmitter");t.exports=o,o.prototype=new a,o._idCounter=0,o.prototype.updateSolveMassProperties=function(){this.sleepState===o.SLEEPING||this.type===o.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},o.prototype.setDensity=function(e){var t=this.getArea();this.mass=t*e,this.updateMassProperties()},o.prototype.getArea=function(){for(var e=0,t=0;t<this.shapes.length;t++)e+=this.shapes[t].area;return e},o.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var u=new r,l=s.create();o.prototype.updateAABB=function(){for(var e=this.shapes,t=this.shapeOffsets,o=this.shapeAngles,n=e.length,i=l,r=this.angle,a=0;a!==n;a++){var c=e[a],d=o[a]+r;s.rotate(i,t[a],r),s.add(i,i,this.position),c.computeAABB(u,i,d),0===a?this.aabb.copy(u):this.aabb.extend(u)}this.aabbNeedsUpdate=!1
},o.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=this.shapeOffsets,o=e.length,n=0,i=0;i!==o;i++){var r=e[i],a=s.length(t[i]),u=r.boundingRadius;a+u>n&&(n=a+u)}this.boundingRadius=n},o.prototype.addShape=function(e,t,o){o=o||0,t=t?s.fromValues(t[0],t[1]):s.fromValues(0,0),this.shapes.push(e),this.shapeOffsets.push(t),this.shapeAngles.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},o.prototype.removeShape=function(e){var t=this.shapes.indexOf(e);return-1!==t?(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeAngles.splice(t,1),this.aabbNeedsUpdate=!0,!0):!1},o.prototype.updateMassProperties=function(){if(this.type===o.STATIC||this.type===o.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var e=this.shapes,t=e.length,n=this.mass/t,i=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var r=0;t>r;r++){var a=e[r],u=s.squaredLength(this.shapeOffsets[r]),l=a.computeMomentOfInertia(n);i+=l+n*u}this.inertia=i,this.invInertia=i>0?1/i:0}this.invMass=1/this.mass}};var c=s.create();o.prototype.applyForce=function(e,t){var o=c;s.sub(o,t,this.position),s.add(this.force,this.force,e);var n=s.crossLength(o,e);this.angularForce+=n},o.prototype.toLocalFrame=function(e,t){s.toLocalFrame(e,t,this.position,this.angle)},o.prototype.toWorldFrame=function(e,t){s.toGlobalFrame(e,t,this.position,this.angle)},o.prototype.fromPolygon=function(e,t){t=t||{};for(var o=this.shapes.length;o>=0;--o)this.removeShape(this.shapes[o]);var r=new n.Polygon;if(r.vertices=e,r.makeCCW(),"number"==typeof t.removeCollinearPoints&&r.removeCollinearPoints(t.removeCollinearPoints),"undefined"==typeof t.skipSimpleCheck&&!r.isSimple())return!1;this.concavePath=r.vertices.slice(0);for(var o=0;o<this.concavePath.length;o++){var a=[0,0];s.copy(a,this.concavePath[o]),this.concavePath[o]=a}var u;u=t.optimalDecomp?r.decomp():r.quickDecomp();for(var l=s.create(),o=0;o!==u.length;o++){for(var c=new i(u[o].vertices),d=0;d!==c.vertices.length;d++){var a=c.vertices[d];s.sub(a,a,c.centerOfMass)}s.scale(l,c.centerOfMass,1),c.updateTriangles(),c.updateCenterOfMass(),c.updateBoundingRadius(),this.addShape(c,l)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};var d=(s.fromValues(0,0),s.fromValues(0,0)),p=s.fromValues(0,0),h=s.fromValues(0,0);o.prototype.adjustCenterOfMass=function(){var e=d,t=p,o=h,n=0;s.set(t,0,0);for(var i=0;i!==this.shapes.length;i++){var r=this.shapes[i],a=this.shapeOffsets[i];s.scale(e,a,r.area),s.add(t,t,e),n+=r.area}s.scale(o,t,1/n);for(var i=0;i!==this.shapes.length;i++){var r=this.shapes[i],a=this.shapeOffsets[i];a||(a=this.shapeOffsets[i]=s.create()),s.sub(a,a,o)}s.add(this.position,this.position,o);for(var i=0;this.concavePath&&i<this.concavePath.length;i++)s.sub(this.concavePath[i],this.concavePath[i],o);this.updateMassProperties(),this.updateBoundingRadius()},o.prototype.setZeroForce=function(){s.set(this.force,0,0),this.angularForce=0},o.prototype.resetConstraintVelocity=function(){var e=this,t=e.vlambda;s.set(t,0,0),e.wlambda=0},o.prototype.addConstraintVelocity=function(){var e=this,t=e.velocity;s.add(t,t,e.vlambda),e.angularVelocity+=e.wlambda},o.prototype.applyDamping=function(e){if(this.type===o.DYNAMIC){e!==this.lastDampingTimeStep&&(this.lastDampingScale=Math.pow(1-this.damping,e),this.lastAngularDampingScale=Math.pow(1-this.angularDamping,e),this.lastDampingTimeStep=e);var t=this.velocity;s.scale(t,t,this.lastDampingScale),this.angularVelocity*=this.lastAngularDampingScale}},o.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=o.AWAKE,this.idleTime=0,e!==o.AWAKE&&this.emit(o.wakeUpEvent)},o.prototype.sleep=function(){this.sleepState=o.SLEEPING,this.angularVelocity=0,this.angularForce=0,s.set(this.velocity,0,0),s.set(this.force,0,0),this.emit(o.sleepEvent)},o.prototype.sleepTick=function(e,t,n){if(this.allowSleep&&this.type!==o.SLEEPING){this.wantsToSleep=!1;var i=(this.sleepState,s.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)),r=Math.pow(this.sleepSpeedLimit,2);i>=r?(this.idleTime=0,this.sleepState=o.AWAKE):(this.idleTime+=n,this.sleepState=o.SLEEPY),this.idleTime>this.sleepTimeLimit&&(t?this.wantsToSleep=!0:this.sleep())}},o.prototype.getVelocityFromPosition=function(e,t){return e=e||s.create(),s.sub(e,this.position,this.previousPosition),s.scale(e,e,1/t),e},o.prototype.getAngularVelocityFromPosition=function(e){return(this.angle-this.previousAngle)/e},o.prototype.overlaps=function(e){return this.world.overlapKeeper.bodiesAreOverlapping(this,e)},o.sleepyEvent={type:"sleepy"},o.sleepEvent={type:"sleep"},o.wakeUpEvent={type:"wakeup"},o.DYNAMIC=1,o.STATIC=2,o.KINEMATIC=4,o.AWAKE=0,o.SLEEPY=1,o.SLEEPING=2}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/objects/Body.js","/objects")},{"../collision/AABB":11,"../events/EventEmitter":29,"../math/vec2":33,"../shapes/Convex":41,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1,"poly-decomp":9}],35:[function(e,t){(function(){function o(e,t,o){o=o||{},n.call(this,e,t,o),this.localAnchorA=s.fromValues(0,0),this.localAnchorB=s.fromValues(0,0),o.localAnchorA&&s.copy(this.localAnchorA,o.localAnchorA),o.localAnchorB&&s.copy(this.localAnchorB,o.localAnchorB),o.worldAnchorA&&this.setWorldAnchorA(o.worldAnchorA),o.worldAnchorB&&this.setWorldAnchorB(o.worldAnchorB);var i=s.create(),r=s.create();this.getWorldAnchorA(i),this.getWorldAnchorB(r);var a=s.distance(i,r);this.restLength="number"==typeof o.restLength?o.restLength:a}var s=e("../math/vec2"),n=e("./Spring");e("../utils/Utils"),t.exports=o,o.prototype=new n,o.prototype.setWorldAnchorA=function(e){this.bodyA.toLocalFrame(this.localAnchorA,e)},o.prototype.setWorldAnchorB=function(e){this.bodyB.toLocalFrame(this.localAnchorB,e)},o.prototype.getWorldAnchorA=function(e){this.bodyA.toWorldFrame(e,this.localAnchorA)},o.prototype.getWorldAnchorB=function(e){this.bodyB.toWorldFrame(e,this.localAnchorB)};var i=s.create(),r=s.create(),a=s.create(),u=s.create(),l=s.create(),c=s.create(),d=s.create(),p=s.create(),h=s.create();o.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,o=this.restLength,n=this.bodyA,f=this.bodyB,m=i,g=r,y=a,b=u,v=h,w=l,A=c,E=d,_=p;this.getWorldAnchorA(w),this.getWorldAnchorB(A),s.sub(E,w,n.position),s.sub(_,A,f.position),s.sub(m,A,w);var B=s.len(m);s.normalize(g,m),s.sub(y,f.velocity,n.velocity),s.crossZV(v,f.angularVelocity,_),s.add(y,y,v),s.crossZV(v,n.angularVelocity,E),s.sub(y,y,v),s.scale(b,g,-e*(B-o)-t*s.dot(y,g)),s.sub(n.force,n.force,b),s.add(f.force,f.force,b);var q=s.crossLength(E,b),C=s.crossLength(_,b);n.angularForce-=q,f.angularForce+=C}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/objects/LinearSpring.js","/objects")},{"../math/vec2":33,"../utils/Utils":52,"./Spring":37,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],36:[function(e,t){(function(){function o(e,t,o){o=o||{},s.call(this,e,t,o),this.restAngle="number"==typeof o.restAngle?o.restAngle:t.angle-e.angle}var s=(e("../math/vec2"),e("./Spring"));t.exports=o,o.prototype=new s,o.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,o=this.restAngle,s=this.bodyA,n=this.bodyB,i=n.angle-s.angle,r=n.angularVelocity-s.angularVelocity,a=-e*(i-o)-t*r*0;s.angularForce-=a,n.angularForce+=a}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/objects/RotationalSpring.js","/objects")},{"../math/vec2":33,"./Spring":37,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],37:[function(e,t){(function(){function o(e,t,o){o=s.defaults(o,{stiffness:100,damping:1}),this.stiffness=o.stiffness,this.damping=o.damping,this.bodyA=e,this.bodyB=t}var s=(e("../math/vec2"),e("../utils/Utils"));t.exports=o,o.prototype.applyForce=function(){}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/objects/Spring.js","/objects")},{"../math/vec2":33,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],38:[function(e,t){(function(){t.exports={AABB:e("./collision/AABB"),AngleLockEquation:e("./equations/AngleLockEquation"),Body:e("./objects/Body"),Broadphase:e("./collision/Broadphase"),Capsule:e("./shapes/Capsule"),Circle:e("./shapes/Circle"),Constraint:e("./constraints/Constraint"),ContactEquation:e("./equations/ContactEquation"),ContactMaterial:e("./material/ContactMaterial"),Convex:e("./shapes/Convex"),DistanceConstraint:e("./constraints/DistanceConstraint"),Equation:e("./equations/Equation"),EventEmitter:e("./events/EventEmitter"),FrictionEquation:e("./equations/FrictionEquation"),GearConstraint:e("./constraints/GearConstraint"),GridBroadphase:e("./collision/GridBroadphase"),GSSolver:e("./solver/GSSolver"),Heightfield:e("./shapes/Heightfield"),Line:e("./shapes/Line"),LockConstraint:e("./constraints/LockConstraint"),Material:e("./material/Material"),Narrowphase:e("./collision/Narrowphase"),NaiveBroadphase:e("./collision/NaiveBroadphase"),Particle:e("./shapes/Particle"),Plane:e("./shapes/Plane"),RevoluteConstraint:e("./constraints/RevoluteConstraint"),PrismaticConstraint:e("./constraints/PrismaticConstraint"),Rectangle:e("./shapes/Rectangle"),RotationalVelocityEquation:e("./equations/RotationalVelocityEquation"),SAPBroadphase:e("./collision/SAPBroadphase"),Shape:e("./shapes/Shape"),Solver:e("./solver/Solver"),Spring:e("./objects/Spring"),LinearSpring:e("./objects/LinearSpring"),RotationalSpring:e("./objects/RotationalSpring"),Utils:e("./utils/Utils"),World:e("./world/World"),vec2:e("./math/vec2"),version:e("../package.json").version}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/p2.js","/")},{"../package.json":10,"./collision/AABB":11,"./collision/Broadphase":12,"./collision/GridBroadphase":13,"./collision/NaiveBroadphase":14,"./collision/Narrowphase":15,"./collision/SAPBroadphase":16,"./constraints/Constraint":17,"./constraints/DistanceConstraint":18,"./constraints/GearConstraint":19,"./constraints/LockConstraint":20,"./constraints/PrismaticConstraint":21,"./constraints/RevoluteConstraint":22,"./equations/AngleLockEquation":23,"./equations/ContactEquation":24,"./equations/Equation":25,"./equations/FrictionEquation":26,"./equations/RotationalVelocityEquation":28,"./events/EventEmitter":29,"./material/ContactMaterial":30,"./material/Material":31,"./math/vec2":33,"./objects/Body":34,"./objects/LinearSpring":35,"./objects/RotationalSpring":36,"./objects/Spring":37,"./shapes/Capsule":39,"./shapes/Circle":40,"./shapes/Convex":41,"./shapes/Heightfield":42,"./shapes/Line":43,"./shapes/Particle":44,"./shapes/Plane":45,"./shapes/Rectangle":46,"./shapes/Shape":47,"./solver/GSSolver":48,"./solver/Solver":49,"./utils/Utils":52,"./world/World":56,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],39:[function(e,t){(function(){function o(e,t){this.length=e||1,this.radius=t||1,s.call(this,s.CAPSULE)}var s=e("./Shape"),n=e("../math/vec2");t.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(e){var t=this.radius,o=this.length+t,s=2*t;return e*(s*s+o*o)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var i=n.create();o.prototype.computeAABB=function(e,t,o){var s=this.radius;n.set(i,this.length/2,0),0!==o&&n.rotate(i,i,o),n.set(e.upperBound,Math.max(i[0]+s,-i[0]+s),Math.max(i[1]+s,-i[1]+s)),n.set(e.lowerBound,Math.min(i[0]-s,-i[0]-s),Math.min(i[1]-s,-i[1]-s)),n.add(e.lowerBound,e.lowerBound,t),n.add(e.upperBound,e.upperBound,t)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Capsule.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],40:[function(e,t){(function(){function o(e){this.radius=e||1,s.call(this,s.CIRCLE)}var s=e("./Shape"),n=e("../math/vec2");t.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(e){var t=this.radius;return e*t*t/2},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},o.prototype.computeAABB=function(e,t){var o=this.radius;n.set(e.upperBound,o,o),n.set(e.lowerBound,-o,-o),t&&(n.add(e.lowerBound,e.lowerBound,t),n.add(e.upperBound,e.upperBound,t))}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Circle.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],41:[function(e,t){(function(){function o(e,t){this.vertices=[],this.axes=[];for(var o=0;o<e.length;o++){var i=n.create();n.copy(i,e[o]),this.vertices.push(i)}if(t)for(var o=0;o<t.length;o++){var r=n.create();n.copy(r,t[o]),this.axes.push(r)}else for(var o=0;o<e.length;o++){var a=e[o],u=e[(o+1)%e.length],l=n.create();n.sub(l,u,a),n.rotate90cw(l,l),n.normalize(l,l),this.axes.push(l)}if(this.centerOfMass=n.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,s.call(this,s.CONVEX),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var s=e("./Shape"),n=e("../math/vec2"),i=e("../math/polyk");e("poly-decomp"),t.exports=o,o.prototype=new s;var r=n.create(),a=n.create();o.prototype.projectOntoLocalAxis=function(e,t){for(var o,s,i=null,a=null,e=r,u=0;u<this.vertices.length;u++)o=this.vertices[u],s=n.dot(o,e),(null===i||s>i)&&(i=s),(null===a||a>s)&&(a=s);if(a>i){var l=a;a=i,i=l}n.set(t,a,i)},o.prototype.projectOntoWorldAxis=function(e,t,o,s){var i=a;this.projectOntoLocalAxis(e,s),0!==o?n.rotate(i,e,o):i=e;var r=n.dot(t,i);n.set(s,s[0]+r,s[1]+r)},o.prototype.updateTriangles=function(){this.triangles.length=0;for(var e=[],t=0;t<this.vertices.length;t++){var o=this.vertices[t];e.push(o[0],o[1])}for(var s=i.Triangulate(e),t=0;t<s.length;t+=3){var n=s[t],r=s[t+1],a=s[t+2];this.triangles.push([n,r,a])}};var u=n.create(),l=n.create(),c=n.create(),d=n.create(),p=n.create();n.create(),n.create(),n.create(),n.create(),o.prototype.updateCenterOfMass=function(){var e=this.triangles,t=this.vertices,s=this.centerOfMass,i=u,r=c,a=d,h=p,f=l;n.set(s,0,0);for(var m=0,g=0;g!==e.length;g++){var y=e[g],r=t[y[0]],a=t[y[1]],h=t[y[2]];n.centroid(i,r,a,h);var b=o.triangleArea(r,a,h);m+=b,n.scale(f,i,b),n.add(s,s,f)}n.scale(s,s,1/m)},o.prototype.computeMomentOfInertia=function(e){for(var t=0,o=0,s=this.vertices.length,i=s-1,r=0;s>r;i=r,r++){var a=this.vertices[i],u=this.vertices[r],l=Math.abs(n.crossLength(a,u)),c=n.dot(u,u)+n.dot(u,a)+n.dot(a,a);t+=l*c,o+=l}return e/6*(t/o)},o.prototype.updateBoundingRadius=function(){for(var e=this.vertices,t=0,o=0;o!==e.length;o++){var s=n.squaredLength(e[o]);s>t&&(t=s)}this.boundingRadius=Math.sqrt(t)},o.triangleArea=function(e,t,o){return.5*((t[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(t[1]-e[1]))},o.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var e=this.triangles,t=this.vertices,s=0;s!==e.length;s++){var n=e[s],i=t[n[0]],r=t[n[1]],a=t[n[2]],u=o.triangleArea(i,r,a);this.area+=u}},o.prototype.computeAABB=function(e,t,o){e.setFromPoints(this.vertices,t,o,0)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Convex.js","/shapes")},{"../math/polyk":32,"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1,"poly-decomp":9}],42:[function(e,t){(function(){function o(e,t){if(t=n.defaults(t,{maxValue:null,minValue:null,elementWidth:.1}),null===t.minValue||null===t.maxValue){t.maxValue=e[0],t.minValue=e[0];for(var o=0;o!==e.length;o++){var i=e[o];i>t.maxValue&&(t.maxValue=i),i<t.minValue&&(t.minValue=i)}}this.data=e,this.maxValue=t.maxValue,this.minValue=t.minValue,this.elementWidth=t.elementWidth,s.call(this,s.HEIGHTFIELD)}var s=e("./Shape"),n=(e("../math/vec2"),e("../utils/Utils"));t.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(){return Number.MAX_VALUE},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.updateArea=function(){for(var e=this.data,t=0,o=0;o<e.length-1;o++)t+=(e[o]+e[o+1])/2*this.elementWidth;this.area=t},o.prototype.computeAABB=function(e,t){e.upperBound[0]=this.elementWidth*this.data.length+t[0],e.upperBound[1]=this.maxValue+t[1],e.lowerBound[0]=t[0],e.lowerBound[1]=-Number.MAX_VALUE}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Heightfield.js","/shapes")},{"../math/vec2":33,"../utils/Utils":52,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],43:[function(e,t){(function(){function o(e){this.length=e||1,s.call(this,s.LINE)}var s=e("./Shape"),n=e("../math/vec2");t.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(e){return e*Math.pow(this.length,2)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var i=[n.create(),n.create()];o.prototype.computeAABB=function(e,t,o){var s=this.length/2;n.set(i[0],-s,0),n.set(i[1],s,0),e.setFromPoints(i,t,o,0)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Line.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],44:[function(e,t){(function(){function o(){s.call(this,s.PARTICLE)}var s=e("./Shape"),n=e("../math/vec2");t.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=0},o.prototype.computeAABB=function(e,t){n.copy(e.lowerBound,t),n.copy(e.upperBound,t)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Particle.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],45:[function(e,t){(function(){function o(){s.call(this,s.PLANE)}var s=e("./Shape"),n=e("../math/vec2");e("../utils/Utils"),t.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.computeAABB=function(e,t,o){var s=0,i=n.set;"number"==typeof o&&(s=o%(2*Math.PI)),0===s?(i(e.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),i(e.upperBound,Number.MAX_VALUE,0)):s===Math.PI/2?(i(e.lowerBound,0,-Number.MAX_VALUE),i(e.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):s===Math.PI?(i(e.lowerBound,-Number.MAX_VALUE,0),i(e.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):s===3*Math.PI/2?(i(e.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),i(e.upperBound,0,Number.MAX_VALUE)):(i(e.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),i(e.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)),n.add(e.lowerBound,e.lowerBound,t),n.add(e.upperBound,e.upperBound,t)},o.prototype.updateArea=function(){this.area=Number.MAX_VALUE}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Plane.js","/shapes")},{"../math/vec2":33,"../utils/Utils":52,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],46:[function(e,t){(function(){function o(e,t){this.width=e||1,this.height=t||1;var o=[s.fromValues(-e/2,-t/2),s.fromValues(e/2,-t/2),s.fromValues(e/2,t/2),s.fromValues(-e/2,t/2)],r=[s.fromValues(1,0),s.fromValues(0,1)];i.call(this,o,r),this.type=n.RECTANGLE}var s=e("../math/vec2"),n=e("./Shape"),i=e("./Convex");t.exports=o,o.prototype=new i([]),o.prototype.computeMomentOfInertia=function(e){var t=this.width,o=this.height;return e*(o*o+t*t)/12},o.prototype.updateBoundingRadius=function(){var e=this.width,t=this.height;this.boundingRadius=Math.sqrt(e*e+t*t)/2},s.create(),s.create(),s.create(),s.create(),o.prototype.computeAABB=function(e,t,o){e.setFromPoints(this.vertices,t,o,0)},o.prototype.updateArea=function(){this.area=this.width*this.height}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Rectangle.js","/shapes")},{"../math/vec2":33,"./Convex":41,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],47:[function(e,t){(function(){function e(t){this.type=t,this.id=e.idCounter++,this.boundingRadius=0,this.collisionGroup=1,this.collisionMask=1,t&&this.updateBoundingRadius(),this.material=null,this.area=0,this.sensor=!1,this.updateArea()}t.exports=e,e.idCounter=0,e.CIRCLE=1,e.PARTICLE=2,e.PLANE=4,e.CONVEX=8,e.LINE=16,e.RECTANGLE=32,e.CAPSULE=64,e.HEIGHTFIELD=128,e.prototype.computeMomentOfInertia=function(){throw new Error("Shape.computeMomentOfInertia is not implemented in this Shape...")},e.prototype.updateBoundingRadius=function(){throw new Error("Shape.updateBoundingRadius is not implemented in this Shape...")},e.prototype.updateArea=function(){},e.prototype.computeAABB=function(){}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/shapes/Shape.js","/shapes")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],48:[function(e,t){(function(){function o(e){i.call(this,e,i.GS),e=e||{},this.iterations=e.iterations||10,this.tolerance=e.tolerance||1e-10,this.arrayStep=30,this.lambda=new r.ARRAY_TYPE(this.arrayStep),this.Bs=new r.ARRAY_TYPE(this.arrayStep),this.invCs=new r.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}function s(e){for(var t=e.length;t--;)e[t]=0}var n=e("../math/vec2"),i=e("./Solver"),r=e("../utils/Utils"),a=e("../equations/FrictionEquation");t.exports=o,o.prototype=new i,o.prototype.solve=function(e,t){this.sortEquations();var i=0,u=this.iterations,l=this.frictionIterations,c=this.equations,d=c.length,p=Math.pow(this.tolerance*d,2),h=t.bodies,f=t.bodies.length,m=(n.add,n.set,this.useZeroRHS),g=this.lambda;if(this.usedIterations=0,d)for(var y=0;y!==f;y++){var b=h[y];b.updateSolveMassProperties()}g.length<d&&(g=this.lambda=new r.ARRAY_TYPE(d+this.arrayStep),this.Bs=new r.ARRAY_TYPE(d+this.arrayStep),this.invCs=new r.ARRAY_TYPE(d+this.arrayStep)),s(g);for(var v=this.invCs,w=this.Bs,g=this.lambda,y=0;y!==c.length;y++){var A=c[y];(A.timeStep!==e||A.needsUpdate)&&(A.timeStep=e,A.update()),w[y]=A.computeB(A.a,A.b,e),v[y]=A.computeInvC(A.epsilon)}var A,E,y,_;if(0!==d){for(y=0;y!==f;y++){var b=h[y];b.resetConstraintVelocity()}if(l){for(i=0;i!==l;i++){for(E=0,_=0;_!==d;_++){A=c[_];var B=o.iterateEquation(_,A,A.epsilon,w,v,g,m,e,i);E+=Math.abs(B)}if(this.usedIterations++,p>=E*E)break}for(o.updateMultipliers(c,g,1/e),_=0;_!==d;_++){var q=c[_];if(q instanceof a){for(var C=0,S=0;S!==q.contactEquations.length;S++)C+=q.contactEquations[S].multiplier;C*=q.frictionCoefficient/q.contactEquations.length,q.maxForce=C,q.minForce=-C}}}for(i=0;i!==u;i++){for(E=0,_=0;_!==d;_++){A=c[_];var B=o.iterateEquation(_,A,A.epsilon,w,v,g,m,e,i);E+=Math.abs(B)}if(this.usedIterations++,p>=E*E)break}for(y=0;y!==f;y++)h[y].addConstraintVelocity();o.updateMultipliers(c,g,1/e)}},o.updateMultipliers=function(e,t,o){for(var s=e.length;s--;)e[s].multiplier=t[s]*o},o.iterateEquation=function(e,t,o,s,n,i,r,a){var u=s[e],l=n[e],c=i[e],d=t.computeGWlambda(),p=t.maxForce,h=t.minForce;r&&(u=0);var f=l*(u-d-o*c),m=c+f;return h*a>m?f=h*a-c:m>p*a&&(f=p*a-c),i[e]+=f,t.addToWlambda(f),f}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/solver/GSSolver.js","/solver")},{"../equations/FrictionEquation":26,"../math/vec2":33,"../utils/Utils":52,"./Solver":49,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],49:[function(e,t){(function(){function o(e,t){e=e||{},s.call(this),this.type=t,this.equations=[],this.equationSortFunction=e.equationSortFunction||!1}var s=(e("../utils/Utils"),e("../events/EventEmitter"));t.exports=o,o.prototype=new s,o.prototype.solve=function(){throw new Error("Solver.solve should be implemented by subclasses!")};var n={bodies:[]};o.prototype.solveIsland=function(e,t){this.removeAllEquations(),t.equations.length&&(this.addEquations(t.equations),n.bodies.length=0,t.getBodies(n.bodies),n.bodies.length&&this.solve(e,n))},o.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},o.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},o.prototype.addEquations=function(e){for(var t=0,o=e.length;t!==o;t++){var s=e[t];s.enabled&&this.equations.push(s)}},o.prototype.removeEquation=function(e){var t=this.equations.indexOf(e);-1!==t&&this.equations.splice(t,1)},o.prototype.removeAllEquations=function(){this.equations.length=0},o.GS=1,o.ISLAND=2}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/solver/Solver.js","/solver")},{"../events/EventEmitter":29,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],50:[function(e,t){(function(){function o(){this.overlappingShapesLastState=new n,this.overlappingShapesCurrentState=new n,this.recordPool=[],this.tmpDict=new n,this.tmpArray1=[]}function s(e,t,o,s){this.shapeA=t,this.shapeB=s,this.bodyA=e,this.bodyB=o}var n=e("./TupleDictionary");e("./Utils"),t.exports=o,o.prototype.tick=function(){for(var e=this.overlappingShapesLastState,t=this.overlappingShapesCurrentState,o=e.keys.length;o--;){var s=e.keys[o],n=e.getByKey(s),i=t.getByKey(s);n&&!i&&this.recordPool.push(n)}e.reset(),e.copy(t),t.reset()},o.prototype.setOverlapping=function(e,t,o,n){var i=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!i.get(t.id,n.id)){var r;this.recordPool.length?(r=this.recordPool.pop(),r.set(e,t,o,n)):r=new s(e,t,o,n),i.set(t.id,n.id,r)}},o.prototype.getNewOverlaps=function(e){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,e)},o.prototype.getEndOverlaps=function(e){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,e)},o.prototype.bodiesAreOverlapping=function(e,t){for(var o=this.overlappingShapesCurrentState,s=o.keys.length;s--;){var n=o.keys[s],i=o.data[n];if(i.bodyA===e&&i.bodyB===t||i.bodyA===t&&i.bodyB===e)return!0}return!1},o.prototype.getDiff=function(e,t,o){var o=o||[],s=e,n=t;o.length=0;for(var i=n.keys.length;i--;){var r=n.keys[i],a=n.data[r];if(!a)throw new Error("Key "+r+" had no data!");var u=s.data[r];u||o.push(a)}return o},o.prototype.isNewOverlap=function(e,t){var o=0|e.id,s=0|t.id,n=this.overlappingShapesLastState,i=this.overlappingShapesCurrentState;return!n.get(o,s)&&!!i.get(o,s)},o.prototype.getNewBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},o.prototype.getEndBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},o.prototype.getBodyDiff=function(e,t){t=t||[];for(var o=this.tmpDict,s=e.length;s--;){var n=e[s];
o.set(0|n.bodyA.id,0|n.bodyB.id,n)}for(s=o.keys.length;s--;){var n=o.getByKey(o.keys[s]);n&&t.push(n.bodyA,n.bodyB)}return o.reset(),t},s.prototype.set=function(e,t,o,n){s.call(this,e,t,o,n)}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/utils/OverlapKeeper.js","/utils")},{"./TupleDictionary":51,"./Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],51:[function(e,t){(function(){function o(){this.data={},this.keys=[]}var s=e("./Utils");t.exports=o,o.prototype.getKey=function(e,t){return e=0|e,t=0|t,(0|e)===(0|t)?-1:0|((0|e)>(0|t)?e<<16|65535&t:t<<16|65535&e)},o.prototype.getByKey=function(e){return e=0|e,this.data[e]},o.prototype.get=function(e,t){return this.data[this.getKey(e,t)]},o.prototype.set=function(e,t,o){if(!o)throw new Error("No data!");var s=this.getKey(e,t);return this.data[s]||this.keys.push(s),this.data[s]=o,s},o.prototype.reset=function(){for(var e=this.data,t=this.keys,o=t.length;o--;)delete e[t[o]];t.length=0},o.prototype.copy=function(e){this.reset(),s.appendArray(this.keys,e.keys);for(var t=e.keys.length;t--;){var o=e.keys[t];this.data[o]=e.data[o]}}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/utils/TupleDictionary.js","/utils")},{"./Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],52:[function(e,t){(function(){function e(){}t.exports=e,e.appendArray=function(e,t){if(t.length<15e4)e.push.apply(e,t);else for(var o=0,s=t.length;o!==s;++o)e.push(t[o])},e.splice=function(e,t,o){o=o||1;for(var s=t,n=e.length-o;n>s;s++)e[s]=e[s+o];e.length=n},e.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,e.extend=function(e,t){for(var o in t)e[o]=t[o]},e.defaults=function(e,t){e=e||{};for(var o in t)o in e||(e[o]=t[o]);return e}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/utils/Utils.js","/utils")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],53:[function(e,t){(function(){function o(){this.equations=[],this.bodies=[]}var s=e("../objects/Body");t.exports=o,o.prototype.reset=function(){this.equations.length=this.bodies.length=0};var n=[];o.prototype.getBodies=function(e){var t=e||[],o=this.equations;n.length=0;for(var s=0;s!==o.length;s++){var i=o[s];-1===n.indexOf(i.bodyA.id)&&(t.push(i.bodyA),n.push(i.bodyA.id)),-1===n.indexOf(i.bodyB.id)&&(t.push(i.bodyB),n.push(i.bodyB.id))}return t},o.prototype.wantsToSleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];if(t.type===s.DYNAMIC&&!t.wantsToSleep)return!1}return!0},o.prototype.sleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];t.sleep()}return!0}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/world/Island.js","/world")},{"../objects/Body":34,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],54:[function(e,t){(function(){function o(){this._nodePool=[],this._islandPool=[],this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var s=(e("../math/vec2"),e("./Island")),n=e("./IslandNode"),i=e("../objects/Body");t.exports=o,o.getUnvisitedNode=function(e){for(var t=e.length,o=0;o!==t;o++){var s=e[o];if(!s.visited&&s.body.type===i.DYNAMIC)return s}return!1},o.prototype.visit=function(e,t,o){t.push(e.body);for(var s=e.equations.length,n=0;n!==s;n++){var i=e.equations[n];-1===o.indexOf(i)&&o.push(i)}},o.prototype.bfs=function(e,t,s){var n=this.queue;for(n.length=0,n.push(e),e.visited=!0,this.visit(e,t,s);n.length;)for(var r,a=n.pop();r=o.getUnvisitedNode(a.neighbors);)r.visited=!0,this.visit(r,t,s),r.body.type===i.DYNAMIC&&n.push(r)},o.prototype.split=function(e){for(var t=e.bodies,i=this.nodes,r=this.equations;i.length;)this._nodePool.push(i.pop());for(var a=0;a!==t.length;a++)if(this._nodePool.length){var u=this._nodePool.pop();u.reset(),u.body=t[a],i.push(u)}else i.push(new n(t[a]));for(var l=0;l!==r.length;l++){var c=r[l],a=t.indexOf(c.bodyA),d=t.indexOf(c.bodyB),p=i[a],h=i[d];p.neighbors.push(h),h.neighbors.push(p),p.equations.push(c),h.equations.push(c)}for(var f=this.islands;f.length;){var m=f.pop();m.reset(),this._islandPool.push(m)}for(var g;g=o.getUnvisitedNode(i);){var m=this._islandPool.length?this._islandPool.pop():new s;this.bfs(g,m.bodies,m.equations),f.push(m)}return f}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/world/IslandManager.js","/world")},{"../math/vec2":33,"../objects/Body":34,"./Island":53,"./IslandNode":55,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],55:[function(e,t){(function(){function e(e){this.body=e,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=e,e.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/world/IslandNode.js","/world")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],56:[function(e,t){(function(){function o(e){d.apply(this),e=e||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=e.solver||new s,this.narrowphase=new m(this),this.islandManager=new b,this.gravity=i.fromValues(0,-9.78),e.gravity&&i.copy(this.gravity,e.gravity),this.frictionGravity=i.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.doProfiling=e.doProfiling||!1,this.lastStepTime=0,this.broadphase=e.broadphase||new n,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new h,this.defaultContactMaterial=new f(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.fixedStepTime=0,this.islandSplit="undefined"!=typeof e.islandSplit?!!e.islandSplit:!1,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=o.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new y}var s=e("../solver/GSSolver"),n=(e("../solver/Solver"),e("../collision/NaiveBroadphase")),i=e("../math/vec2"),r=e("../shapes/Circle"),a=(e("../shapes/Rectangle"),e("../shapes/Convex")),u=(e("../shapes/Line"),e("../shapes/Plane")),l=e("../shapes/Capsule"),c=e("../shapes/Particle"),d=e("../events/EventEmitter"),p=e("../objects/Body"),h=(e("../shapes/Shape"),e("../objects/LinearSpring"),e("../material/Material")),f=e("../material/ContactMaterial"),m=(e("../constraints/DistanceConstraint"),e("../constraints/Constraint"),e("../constraints/LockConstraint"),e("../constraints/RevoluteConstraint"),e("../constraints/PrismaticConstraint"),e("../constraints/GearConstraint"),e("../../package.json"),e("../collision/Broadphase"),e("../collision/SAPBroadphase"),e("../collision/Narrowphase")),g=e("../utils/Utils"),y=e("../utils/OverlapKeeper"),b=e("./IslandManager");if(e("../objects/RotationalSpring"),t.exports=o,"undefined"==typeof performance&&(performance={}),!performance.now){var v=Date.now();performance.timing&&performance.timing.navigationStart&&(v=performance.timing.navigationStart),performance.now=function(){return Date.now()-v}}o.prototype=new Object(d.prototype),o.NO_SLEEPING=1,o.BODY_SLEEPING=2,o.ISLAND_SLEEPING=4,o.prototype.addConstraint=function(e){this.constraints.push(e)},o.prototype.addContactMaterial=function(e){this.contactMaterials.push(e)},o.prototype.removeContactMaterial=function(e){var t=this.contactMaterials.indexOf(e);-1!==t&&g.splice(this.contactMaterials,t,1)},o.prototype.getContactMaterial=function(e,t){for(var o=this.contactMaterials,s=0,n=o.length;s!==n;s++){var i=o[s];if(i.materialA.id===e.id&&i.materialB.id===t.id||i.materialA.id===t.id&&i.materialB.id===e.id)return i}return!1},o.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&g.splice(this.constraints,t,1)};var w=(i.create(),i.create(),i.create(),i.create(),i.create(),i.create(),i.create()),A=i.fromValues(0,0),E=i.fromValues(0,0),_=(i.fromValues(0,0),i.fromValues(0,0));o.prototype.step=function(e,t,o){if(o=o||10,t=t||0,0===t)this.internalStep(e),this.time+=e;else{var s=Math.floor((this.time+t)/e)-Math.floor(this.time/e);s=Math.min(s,o);for(var n=performance.now(),r=0;r!==s&&(this.internalStep(e),!(performance.now()-n>1e3*e));r++);this.time+=t;for(var a=this.time%e,u=a/e,l=0;l!==this.bodies.length;l++){var c=this.bodies[l];c.type!==p.STATIC&&c.sleepState!==p.SLEEPING?(i.sub(_,c.position,c.previousPosition),i.scale(_,_,u),i.add(c.interpolatedPosition,c.position,_),c.interpolatedAngle=c.angle+(c.angle-c.previousAngle)*u):(i.copy(c.interpolatedPosition,c.position),c.interpolatedAngle=c.angle)}}};var B=[];o.prototype.internalStep=function(e){this.stepping=!0;var t,s,n=this,r=this.doProfiling,a=this.springs.length,u=this.springs,l=this.bodies,c=this.gravity,d=this.solver,h=this.bodies.length,f=this.broadphase,m=this.narrowphase,y=this.constraints,b=w,v=(i.scale,i.add),A=(i.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=e,r&&(t=performance.now()),this.useWorldGravityAsFrictionGravity){var E=i.length(this.gravity);0===E&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=E)}if(this.applyGravity)for(var _=0;_!==h;_++){var q=l[_],C=q.force;q.type===p.DYNAMIC&&q.sleepState!==p.SLEEPING&&(i.scale(b,c,q.mass*q.gravityScale),v(C,C,b))}if(this.applySpringForces)for(var _=0;_!==a;_++){var S=u[_];S.applyForce()}if(this.applyDamping)for(var _=0;_!==h;_++){var q=l[_];q.type===p.DYNAMIC&&q.applyDamping(e)}for(var L=f.getCollisionPairs(this),P=this.disabledBodyCollisionPairs,_=P.length-2;_>=0;_-=2)for(var j=L.length-2;j>=0;j-=2)(P[_]===L[j]&&P[_+1]===L[j+1]||P[_+1]===L[j]&&P[_]===L[j+1])&&L.splice(j,2);var U=y.length;for(_=0;_!==U;_++){var x=y[_];if(!x.collideConnected)for(var j=L.length-2;j>=0;j-=2)(x.bodyA===L[j]&&x.bodyB===L[j+1]||x.bodyB===L[j]&&x.bodyA===L[j+1])&&L.splice(j,2)}this.postBroadphaseEvent.pairs=L,this.emit(this.postBroadphaseEvent),m.reset(this);for(var _=0,I=L.length;_!==I;_+=2)for(var M=L[_],F=L[_+1],N=0,V=M.shapes.length;N!==V;N++)for(var T=M.shapes[N],R=M.shapeOffsets[N],G=M.shapeAngles[N],O=0,k=F.shapes.length;O!==k;O++){var D=F.shapes[O],X=F.shapeOffsets[O],W=F.shapeAngles[O],Y=this.defaultContactMaterial;if(T.material&&D.material){var z=this.getContactMaterial(T.material,D.material);z&&(Y=z)}this.runNarrowphase(m,M,T,R,G,F,D,X,W,Y,this.frictionGravity)}for(var _=0;_!==h;_++){var K=l[_];K._wakeUpAfterNarrowphase&&(K.wakeUp(),K._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(B);for(var H=this.endContactEvent,O=B.length;O--;){var Z=B[O];H.shapeA=Z.shapeA,H.shapeB=Z.shapeB,H.bodyA=Z.bodyA,H.bodyB=Z.bodyA,this.emit(H)}}var J=this.preSolveEvent;J.contactEquations=m.contactEquations,J.frictionEquations=m.frictionEquations,this.emit(J);var U=y.length;for(_=0;_!==U;_++)y[_].update();if(m.contactEquations.length||m.frictionEquations.length||y.length)if(this.islandSplit){for(A.equations.length=0,g.appendArray(A.equations,m.contactEquations),g.appendArray(A.equations,m.frictionEquations),_=0;_!==U;_++)g.appendArray(A.equations,y[_].equations);A.split(this);for(var _=0;_!==A.islands.length;_++){var Q=A.islands[_];Q.equations.length&&d.solveIsland(e,Q)}}else{for(d.addEquations(m.contactEquations),d.addEquations(m.frictionEquations),_=0;_!==U;_++)d.addEquations(y[_].equations);this.solveConstraints&&d.solve(e,this),d.removeAllEquations()}for(var _=0;_!==h;_++){var K=l[_];K.sleepState!==p.SLEEPING&&K.type!==p.STATIC&&o.integrateBody(K,e)}for(var _=0;_!==h;_++)l[_].setZeroForce();if(r&&(s=performance.now(),n.lastStepTime=s-t),this.emitImpactEvent&&this.has("impact"))for(var $=this.impactEvent,_=0;_!==m.contactEquations.length;_++){var et=m.contactEquations[_];et.firstImpact&&($.bodyA=et.bodyA,$.bodyB=et.bodyB,$.shapeA=et.shapeA,$.shapeB=et.shapeB,$.contactEquation=et,this.emit($))}if(this.sleepMode===o.BODY_SLEEPING)for(_=0;_!==h;_++)l[_].sleepTick(this.time,!1,e);else if(this.sleepMode===o.ISLAND_SLEEPING&&this.islandSplit){for(_=0;_!==h;_++)l[_].sleepTick(this.time,!0,e);for(var _=0;_<this.islandManager.islands.length;_++){var Q=this.islandManager.islands[_];Q.wantsToSleep()&&Q.sleep()}}if(this.stepping=!1,this.bodiesToBeRemoved.length){for(var _=0;_!==this.bodiesToBeRemoved.length;_++)this.removeBody(this.bodiesToBeRemoved[_]);this.bodiesToBeRemoved.length=0}this.emit(this.postStepEvent)};var q=i.create(),C=i.create();o.integrateBody=function(e,t){var o=e.invMass,s=e.force,n=e.position,r=e.velocity;i.copy(e.previousPosition,e.position),e.previousAngle=e.angle,e.fixedRotation||(e.angularVelocity+=e.angularForce*e.invInertia*t,e.angle+=e.angularVelocity*t),i.scale(q,s,t*o),i.add(r,q,r),i.scale(C,r,t),i.add(n,n,C),e.aabbNeedsUpdate=!0},o.prototype.runNarrowphase=function(e,t,o,s,n,r,a,u,l,c,d){if(0!==(o.collisionGroup&a.collisionMask)&&0!==(a.collisionGroup&o.collisionMask)){i.rotate(A,s,t.angle),i.rotate(E,u,r.angle),i.add(A,A,t.position),i.add(E,E,r.position);var h=n+t.angle,f=l+r.angle;e.enableFriction=c.friction>0,e.frictionCoefficient=c.friction;var m;m=t.type===p.STATIC||t.type===p.KINEMATIC?r.mass:r.type===p.STATIC||r.type===p.KINEMATIC?t.mass:t.mass*r.mass/(t.mass+r.mass),e.slipForce=c.friction*d*m,e.restitution=c.restitution,e.surfaceVelocity=c.surfaceVelocity,e.frictionStiffness=c.frictionStiffness,e.frictionRelaxation=c.frictionRelaxation,e.stiffness=c.stiffness,e.relaxation=c.relaxation,e.contactSkinSize=c.contactSkinSize;var g=e[o.type|a.type],y=0;if(g){var b=o.sensor||a.sensor,v=e.frictionEquations.length;y=o.type<a.type?g.call(e,t,o,A,h,r,a,E,f,b):g.call(e,r,a,E,f,t,o,A,h,b);var w=e.frictionEquations.length-v;if(y){if(t.allowSleep&&t.type===p.DYNAMIC&&t.sleepState===p.SLEEPING&&r.sleepState===p.AWAKE&&r.type!==p.STATIC){var _=i.squaredLength(r.velocity)+Math.pow(r.angularVelocity,2),B=Math.pow(r.sleepSpeedLimit,2);_>=2*B&&(t._wakeUpAfterNarrowphase=!0)}if(r.allowSleep&&r.type===p.DYNAMIC&&r.sleepState===p.SLEEPING&&t.sleepState===p.AWAKE&&t.type!==p.STATIC){var q=i.squaredLength(t.velocity)+Math.pow(t.angularVelocity,2),C=Math.pow(t.sleepSpeedLimit,2);q>=2*C&&(r._wakeUpAfterNarrowphase=!0)}if(this.overlapKeeper.setOverlapping(t,o,r,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(o,a)){var S=this.beginContactEvent;if(S.shapeA=o,S.shapeB=a,S.bodyA=t,S.bodyB=r,S.contactEquations.length=0,"number"==typeof y)for(var L=e.contactEquations.length-y;L<e.contactEquations.length;L++)S.contactEquations.push(e.contactEquations[L]);this.emit(S)}if("number"==typeof y&&w>1)for(var L=e.frictionEquations.length-w;L<e.frictionEquations.length;L++){var P=e.frictionEquations[L];P.setSlipForce(P.getSlipForce()/w)}}}}},o.prototype.addSpring=function(e){this.springs.push(e),this.addSpringEvent.spring=e,this.emit(this.addSpringEvent)},o.prototype.removeSpring=function(e){var t=this.springs.indexOf(e);-1!==t&&g.splice(this.springs,t,1)},o.prototype.addBody=function(e){-1===this.bodies.indexOf(e)&&(this.bodies.push(e),e.world=this,this.addBodyEvent.body=e,this.emit(this.addBodyEvent))},o.prototype.removeBody=function(e){if(this.stepping)this.bodiesToBeRemoved.push(e);else{e.world=null;var t=this.bodies.indexOf(e);-1!==t&&(g.splice(this.bodies,t,1),this.removeBodyEvent.body=e,e.resetConstraintVelocity(),this.emit(this.removeBodyEvent))}},o.prototype.getBodyById=function(e){for(var t=this.bodies,o=0;o<t.length;o++){var s=t[o];if(s.id===e)return s}return!1},o.prototype.disableBodyCollision=function(e,t){this.disabledBodyCollisionPairs.push(e,t)},o.prototype.enableBodyCollision=function(e,t){for(var o=this.disabledBodyCollisionPairs,s=0;s<o.length;s+=2)if(o[s]===e&&o[s+1]===t||o[s+1]===e&&o[s]===t)return void o.splice(s,2)},o.prototype.clear=function(){this.time=0,this.fixedStepTime=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var e=this.constraints,t=e.length-1;t>=0;t--)this.removeConstraint(e[t]);for(var s=this.bodies,t=s.length-1;t>=0;t--)this.removeBody(s[t]);for(var n=this.springs,t=n.length-1;t>=0;t--)this.removeSpring(n[t]);for(var i=this.contactMaterials,t=i.length-1;t>=0;t--)this.removeContactMaterial(i[t]);o.apply(this)},o.prototype.clone=function(){var e=new o;return e.fromJSON(this.toJSON()),e};var S=i.create(),L=i.fromValues(0,0),P=i.fromValues(0,0);o.prototype.hitTest=function(e,t,o){o=o||0;var s=new p({position:e}),n=new c,d=e,h=0,f=S,m=L,g=P;s.addShape(n);for(var y=this.narrowphase,b=[],v=0,w=t.length;v!==w;v++)for(var A=t[v],E=0,_=A.shapes.length;E!==_;E++){var B=A.shapes[E],q=A.shapeOffsets[E]||m,C=A.shapeAngles[E]||0;i.rotate(f,q,A.angle),i.add(f,f,A.position);var j=C+A.angle;(B instanceof r&&y.circleParticle(A,B,f,j,s,n,d,h,!0)||B instanceof a&&y.particleConvex(s,n,d,h,A,B,f,j,!0)||B instanceof u&&y.particlePlane(s,n,d,h,A,B,f,j,!0)||B instanceof l&&y.particleCapsule(s,n,d,h,A,B,f,j,!0)||B instanceof c&&i.squaredLength(i.sub(g,f,e))<o*o)&&b.push(A)}return b},o.prototype.setGlobalEquationParameters=function(e){e=e||{};for(var t=0;t!==this.constraints.length;t++)for(var o=this.constraints[t],s=0;s!==o.equations.length;s++){var n=o.equations[s];"undefined"!=typeof e.stiffness&&(n.stiffness=e.stiffness),"undefined"!=typeof e.relaxation&&(n.relaxation=e.relaxation),n.needsUpdate=!0}for(var t=0;t!==this.contactMaterials.length;t++){var o=this.contactMaterials[t];"undefined"!=typeof e.stiffness&&(o.stiffness=e.stiffness,o.frictionStiffness=e.stiffness),"undefined"!=typeof e.relaxation&&(o.relaxation=e.relaxation,o.frictionRelaxation=e.relaxation)}var o=this.defaultContactMaterial;"undefined"!=typeof e.stiffness&&(o.stiffness=e.stiffness,o.frictionStiffness=e.stiffness),"undefined"!=typeof e.relaxation&&(o.relaxation=e.relaxation,o.frictionRelaxation=e.relaxation)},o.prototype.setGlobalStiffness=function(e){this.setGlobalEquationParameters({stiffness:e})},o.prototype.setGlobalRelaxation=function(e){this.setGlobalEquationParameters({relaxation:e})}}).call(this,e("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/world/World.js","/world")},{"../../package.json":10,"../collision/Broadphase":12,"../collision/NaiveBroadphase":14,"../collision/Narrowphase":15,"../collision/SAPBroadphase":16,"../constraints/Constraint":17,"../constraints/DistanceConstraint":18,"../constraints/GearConstraint":19,"../constraints/LockConstraint":20,"../constraints/PrismaticConstraint":21,"../constraints/RevoluteConstraint":22,"../events/EventEmitter":29,"../material/ContactMaterial":30,"../material/Material":31,"../math/vec2":33,"../objects/Body":34,"../objects/LinearSpring":35,"../objects/RotationalSpring":36,"../shapes/Capsule":39,"../shapes/Circle":40,"../shapes/Convex":41,"../shapes/Line":43,"../shapes/Particle":44,"../shapes/Plane":45,"../shapes/Rectangle":46,"../shapes/Shape":47,"../solver/GSSolver":48,"../solver/Solver":49,"../utils/OverlapKeeper":50,"../utils/Utils":52,"./IslandManager":54,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}]},{},[38])(38)});