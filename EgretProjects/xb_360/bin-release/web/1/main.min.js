var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function s(s){t.call(i,s,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?s(n):RES.getResAsync(e,s,this)}else RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var BaseScene=function(e){function t(t){e.call(this),this.inited=!1,this.percentWidth=100,this.percentHeight=100,this.touchEnabled=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.skinName=t}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},s.onEnable=function(){},s.onRemove=function(){},s.onDestroy=function(){},t}(eui.Component);egret.registerClass(BaseScene,"BaseScene");var BaseUI=function(e){function t(t){void 0===t&&(t=""),e.call(this),this.inited=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),""!=t&&(this.skinName=t)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},t}(eui.Component);egret.registerClass(BaseUI,"BaseUI");var LayerManager=function(){function e(){this.tweenTime=500}var t=(__define,e),i=t.prototype;return i.initialize=function(e){this.main=e,this.sceneLayer=new eui.Group,this.sceneLayer.percentWidth=100,this.sceneLayer.percentHeight=100,this.main.addChild(this.sceneLayer),this.popLayer=new eui.Group,this.popLayer.percentWidth=100,this.popLayer.percentHeight=100,this.popLayer.touchEnabled=!1,this.main.addChild(this.popLayer)},i.runScene=function(e,t){void 0===t&&(t=!1),this.sceneLayer.addChild(e),e.inited&&e.onEnable(),null!=this.curScene&&this.curScene&&(this.sceneLayer.removeChild(this.curScene),this.curScene.onRemove(),t&&this.curScene.onDestroy()),this.curScene=e},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(LayerManager,"LayerManager");var LoadManager=function(){function e(){this.loadComplete=new Object,this.loadError=new Object,this.loadProgress=new Object,this.thisObject=new Object}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},i.loadGroup=function(e,t,i,s,n){void 0===i&&(i=null),void 0===s&&(s=null),void 0===n&&(n=null),this.loadComplete[e]=i,this.loadError[e]=n,this.loadProgress[e]=s,this.thisObject[e]=t,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},i.onResourceLoadComplete=function(e){var t=e.groupName;RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);var i=this.loadComplete[t];null!=i&&i.call(this.thisObject[t],e),this.clearCallBack(t)},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load");var t=this.loadError[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e),this.clearCallBack(e.groupName)},i.onResourceProgress=function(e){var t=this.loadProgress[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e)},i.clearCallBack=function(e){this.loadComplete[e]=null,this.loadError[e]=null,this.loadProgress[e]=null},e}();egret.registerClass(LoadManager,"LoadManager");var GameScene=function(e){function t(){e.call(this,"GameSceneSkin"),this.stageHeight=1150,this.scene4Height=1500,this.trainX=49,this.trainY=341,this.beginY=0}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this)},s.onEnable=function(){window.playBGM(),this.initView(),this.startAnim()},s.onRemove=function(){},s.initView=function(){for(var e,t=0;21>=t;t++)e=this["ball"+t],e&&e.parent&&e.parent.removeChild(e);this.ball.visible=!1,this.ostip0.alpha=0,this.ostip1.alpha=0,this.ostip2.alpha=0,this.ostip0.scaleX=0,this.ostip0.scaleY=0,this.ostip1.scaleX=0,this.ostip1.scaleY=0,this.ostip2.scaleX=0,this.ostip2.scaleY=0,this.os3602.visible=!1,this.weinxintext.alpha=0,this.mantip.alpha=0,this.womantip.alpha=0,this.G4tip.alpha=0,this.dianxinstar.alpha=0,this.whatstar.alpha=0,this.btn_up.visible=!1,this.note3.alpha=0,this.note3.scaleX=0,this.note3.scaleY=0,this.scene1Group.touchEnabled=!1,this.scene1Group.touchChildren=!1,this.scene2Group.touchEnabled=!1,this.scene2Group.touchChildren=!1,this.scene3Group.touchEnabled=!1,this.scene3Group.touchChildren=!1,this.scene4Group.touchEnabled=!1,this.scene4Group.touchChildren=!1,this.scene1Group.y=0,this.scene2Group.y=this.stageHeight,this.removeChild(this.scene3Group),this.removeChild(this.scene4Group)},s.startAnim=function(){egret.Tween.get(this).wait(1e3).call(this.movetrain,this)},s.movetrain=function(){egret.Tween.get(this.train).to({x:this.trainX,y:this.trainY},2e3).call(this.ballFall,this);var e=this;egret.Tween.get(this).wait(500).call(function(){e.zhanpai.visible=!1,e.zhanpai2.visible=!0},this).wait(500).call(function(){e.zhanpai.visible=!0,e.zhanpai2.visible=!1},this).wait(500).call(function(){e.zhanpai.visible=!1,e.zhanpai2.visible=!0},this).wait(500).call(function(){e.zhanpai.visible=!0,e.zhanpai2.visible=!1},this)},s.ballFall=function(){this.ball.visible=!0,this.ball.x=this.ball0.x,this.ball.y=this.ball0.y,egret.Tween.get(this.ball).to({x:this.ball1.x,y:this.ball1.y},1500).to({x:this.ball2.x,y:this.ball2.y},700).to({x:this.ball3.x,y:this.ball3.y},1500).to({x:this.ball4.x,y:this.ball4.y},700).call(this.unlock,this);var e=this;egret.Tween.get(this.os3602).wait(1800).call(function(){e.os3602.visible=!0}).wait(300).call(function(){e.os3602.visible=!1}).wait(300).call(function(){e.os3602.visible=!0}).wait(300).call(function(){e.os3602.visible=!1}).wait(300).call(function(){e.os3602.visible=!0}).wait(300).call(function(){e.os3602.visible=!1}).wait(300).call(function(){e.os3602.visible=!0}).wait(300).call(function(){e.os3602.visible=!1}).wait(300).call(function(){e.os3602.visible=!0}).wait(300).call(function(){e.os3602.visible=!1}),egret.Tween.get(this.ostip0).wait(1500).call(function(){e.pai0_1.parent.removeChild(e.pai0_1)},this).to({alpha:1,scaleX:1,scaleY:1,x:this.ostip0.x-20},400),egret.Tween.get(this.ostip1).wait(2700).call(function(){e.pai1_1.parent.removeChild(e.pai1_1)},this).to({alpha:1,scaleX:1,scaleY:1,x:this.ostip1.x-20},400),egret.Tween.get(this.ostip2).wait(4200).call(function(){e.pai2_1.parent.removeChild(e.pai2_1)},this).to({alpha:1,scaleX:1,scaleY:1,x:this.ostip2.x-20},400),egret.Tween.get(this.scene1Group).to({y:this.scene1Group.y-this.ball1.y+this.ball.y},1500).to({y:this.scene1Group.y-this.ball2.y+this.ball.y},700).wait(1500).to({y:this.scene1Group.y-this.ball4.y+this.ball.y+100},1e3),egret.Tween.get(this.scene2Group).to({y:this.scene2Group.y-this.ball1.y+this.ball.y},1500).to({y:this.scene2Group.y-this.ball2.y+this.ball.y},700).wait(1500).to({y:this.scene2Group.y-this.ball4.y+this.ball.y+100},1e3)},s.unlock=function(){this.ball.visible=!1,this.fingerUI.lightScan(),this.fingerUI.addEventListener("fingerComplete",this.ballFallToHill,this)},s.ballFallToHill=function(){this.scene2Group.addChild(this.ball),this.ball.x=this.ball5.x,this.ball.y=this.ball5.y,this.ball.visible=!0,egret.Tween.get(this.ball).to({x:this.ball6.x,y:this.ball6.y},500).to({x:this.ball7.x,y:this.ball7.y},1e3).call(this.weixin,this),this.addChild(this.scene3Group),this.addChild(this.scene2Group),this.addChild(this.scene1Group),this.scene3Group.y=this.scene2Group.y+this.stageHeight,egret.Tween.get(this.scene1Group).to({y:this.scene1Group.y-this.ball7.y+this.ball.y-100},1500),egret.Tween.get(this.scene2Group).to({y:this.scene2Group.y-this.ball7.y+this.ball.y-100},1500),egret.Tween.get(this.scene3Group).to({y:this.scene3Group.y-this.ball7.y+this.ball.y-100},1500)},s.weixin=function(){this.ball.visible=!1,this.removeChild(this.scene1Group),egret.Tween.get(this.suger0,{loop:!0}).to({rotation:360},3e3),egret.Tween.get(this.suger1,{loop:!0}).to({rotation:360},3e3),egret.Tween.get(this.suger2,{loop:!0}).to({rotation:360},3e3),egret.Tween.get(this.suger3,{loop:!0}).to({rotation:360},3e3),this.weixin0.play();var e=this;egret.Tween.get(this).wait(500).call(function(){e.weixin1.play()},this);var e=this;egret.Tween.get(this.weinxintext).wait(1e3).to({x:this.weinxintext.x+20,alpha:1},1e3).wait(500).call(this.ballFallToMan,this)},s.ballFallToMan=function(){this.scene3Group.addChild(this.ball),this.ball.x=this.ball8.x,this.ball.y=this.ball8.y;var e=this;egret.Tween.get(this).wait(700).call(function(){e.ball.visible=!0},this),this.scene4Group.y=this.scene3Group.y+this.stageHeight,this.addChild(this.scene3Group),this.addChild(this.scene4Group),this.addChild(this.scene2Group),egret.Tween.get(this.ball).wait(700).to({x:this.ball9.x,y:this.ball9.y},1e3).to({x:this.ball10.x,y:this.ball10.y},500,egret.Ease.quadOut).to({x:this.ball11.x,y:this.ball11.y},1e3).to({x:this.ball12.x,y:this.ball12.y},500,egret.Ease.quadOut).call(this.ballFallToLast,this),egret.Tween.get(this.man_hand).wait(1700).to({rotation:this.man_hand.rotation-10},300),egret.Tween.get(this.man_hand).wait(2200).to({rotation:0},600),egret.Tween.get(this.mantip).wait(1700).to({x:this.mantip.x+20,alpha:1},1e3),egret.Tween.get(this.woman_hand).wait(3200).to({rotation:this.woman_hand.rotation+10},300),egret.Tween.get(this.woman_hand).wait(3700).to({rotation:0},600),egret.Tween.get(this.womantip).wait(3200).to({x:this.womantip.x-20,alpha:1},1e3);var t=this.scene3Group.y-this.ball9.y-200;egret.Tween.get(this.scene2Group).to({y:t-this.stageHeight},2800),egret.Tween.get(this.scene3Group).to({y:t},2800),egret.Tween.get(this.scene4Group).to({y:t+this.stageHeight},2800)},s.ballFallToLast=function(){this.removeChild(this.scene2Group),this.ball.x=this.ball14.x,this.ball.y=this.ball14.y,this.scene4Group.addChild(this.ball),egret.Tween.get(this.scene3Group).to({y:-this.scene4Height},6e3),egret.Tween.get(this.scene4Group).to({y:this.stageHeight-this.scene4Height},6e3);var e=this;egret.Tween.get(this.ball).to({x:this.ball15.x,y:this.ball15.y},1e3).to({x:this.ball16.x,y:this.ball16.y},500).to({x:this.ball17.x,y:this.ball17.y},1e3).to({x:this.ball18.x,y:this.ball18.y},500).to({x:this.ball19.x,y:this.ball19.y},1e3).to({x:this.ball20.x,y:this.ball20.y},500).to({x:this.ball21.x,y:this.ball21.y},1e3).to({y:this.note3.y},500).call(function(){e.scene4Group.addChild(e.note3),egret.Tween.get(e.note3).to({alpha:1,scaleX:1,scaleY:1},1e3)},this),egret.Tween.get(this.dianxinball).wait(1e3).to({x:this.dianxinball.x+15,y:this.dianxinball.y+15},100).to({x:this.dianxinball.x-15,y:this.dianxinball.y-15},100),egret.Tween.get(this.dianxinstar).wait(1e3).to({x:this.dianxinstar.x+30,y:this.dianxinstar.y-30,alpha:1},200),egret.Tween.get(this.liantongball).wait(2500).to({x:this.liantongball.x-15,y:this.liantongball.y-15},100).to({x:this.liantongball.x+15,y:this.liantongball.y+15},100),egret.Tween.get(this.G4tip).wait(2500).to({x:this.G4tip.x+20,alpha:1},1e3),egret.Tween.get(this.whatball).wait(4e3).to({x:this.whatball.x+15,y:this.whatball.y+15},100).to({x:this.whatball.x-15,y:this.whatball.y-15},100),egret.Tween.get(this.whatstar).wait(4e3).to({x:this.whatstar.x-20,y:this.whatstar.y+20,alpha:1},200),egret.Tween.get(this).wait(5500).call(function(){e.btn_up.visible=!1,e.btn_down.visible=!0},this).wait(100).call(function(){e.btn_up.visible=!0,e.btn_down.visible=!1,e.addListener()})},s.addListener=function(){this.scene1Group.y=2*-this.stageHeight-this.scene4Height,this.scene2Group.y=-this.stageHeight-this.scene4Height,this.scene3Group.y=-this.scene4Height,this.scene4Group.y=this.stageHeight-this.scene4Height,this.addChild(this.scene3Group),this.addChild(this.scene4Group),this.addChild(this.scene2Group),this.addChild(this.scene1Group),this.scene4Group.touchChildren=!0,this.scene4Group.touchThrough=!0,this.btn_up.touchEnabled=!0,this.btn_up.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gotoUrl,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)},s.onTouchBegin=function(e){this.beginY=e.stageY},s.onTouchMove=function(e){this.touchDist=e.stageY-this.beginY,this.scene1Group.y+=this.touchDist,this.scene2Group.y+=this.touchDist,this.scene3Group.y+=this.touchDist,this.scene4Group.y+=this.touchDist,this.beginY=e.stageY,this.scene4Group.y<-350?(this.scene1Group.y=2*-this.stageHeight-this.scene4Height,this.scene2Group.y=-this.stageHeight-this.scene4Height,this.scene3Group.y=-this.scene4Height,this.scene4Group.y=this.stageHeight-this.scene4Height):this.scene1Group.y>0&&(this.scene1Group.y=0,this.scene2Group.y=this.stageHeight,this.scene3Group.y=2*this.stageHeight,this.scene4Group.y=3*this.stageHeight)},s.gotoUrl=function(){window.location.href="http://a2315.oadz.com/link/C/2315/22813/YRkKy0HPzJE4EpSh98vlQHsuL28_/p007/0/http://sale.jd.com/m/act/ILmGDoKjJnvOh.html"},t}(BaseScene);egret.registerClass(GameScene,"GameScene");var PreloadScene=function(e){function t(){e.call(this,"PreloadSceneSkin"),this.vr=.05}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this),this.cos=Math.cos(this.vr),this.sin=Math.sin(this.vr),this.centerX=this.center.x+64,this.centerY=this.center.y+66},s.playAnim=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},s.stopAnim=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},s.setProgress=function(e){this.inited&&(this.progressLabel.text="Loading..."+e+"%")},s.onEnterFrame=function(){if(this.inited){var e=this.circle.x-this.centerX,t=this.circle.y-this.centerY,i=this.cos*e-this.sin*t,s=this.cos*t+this.sin*e;this.circle.x=this.centerX+i,this.circle.y=this.centerY+s}},t}(BaseScene);egret.registerClass(PreloadScene,"PreloadScene");var FingerUI=function(e){function t(){e.call(this),this.startX=222,this.startY=87,this.midX=118,this.midY=53,this.endX=28,this.endY=23}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this),this.light.visible=!1,this.finger1.visible=!1,this.lock.visible=!1,this.gou.visible=!1},s.lightScan=function(){this.light.alpha=0,this.light.x=this.startX,this.light.y=this.startY,this.light.visible=!0,egret.Tween.get(this.light).to({x:this.midX,y:this.midY,alpha:1},200).to({x:this.endX,y:this.endY,alpha:0},200).call(this.fingerFlash,this)},s.fingerFlash=function(){this.finger0.visible=!1,this.finger1.visible=!0;var e=this;egret.Tween.get(this).wait(300).call(function(){e.finger0.visible=!0,e.finger1.visible=!1},this).call(this.lightScan2,this)},s.lightScan2=function(){this.light.alpha=0,this.light.x=this.startX,this.light.y=this.startY,this.light.visible=!0,egret.Tween.get(this.light).to({x:this.midX,y:this.midY,alpha:1},200).to({x:this.endX,y:this.endY,alpha:0},200).call(this.fingerFlash2,this)},s.fingerFlash2=function(){this.finger0.visible=!1,this.finger1.visible=!0;var e=this;egret.Tween.get(this).wait(100).call(function(){e.finger0.visible=!0,e.finger1.visible=!1},this).wait(100).call(function(){e.finger0.visible=!1,e.finger1.visible=!0},this).wait(100).call(function(){e.finger0.visible=!0,e.finger1.visible=!1},this).wait(100).call(function(){e.finger0.visible=!1,e.finger1.visible=!0},this).call(this.unlock,this)},s.unlock=function(){egret.Tween.get(this.finger1).to({alpha:0},200),this.lock.alpha=0,this.lock.visible=!0,this.gou.alpha=0,this.gou.visible=!0,egret.Tween.get(this.lock).wait(200).to({alpha:1},1500);var e=this;egret.Tween.get(this.gou).wait(800).to({alpha:1},500).wait(500).call(function(){e.dispatchEvent(new egret.Event("fingerComplete"))},this)},t}(BaseUI);egret.registerClass(FingerUI,"FingerUI");var WeiXinUI=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this),this.img0.visible=!1,this.img1.visible=!1,this.img2.visible=!1,this.img3.visible=!1},s.play=function(){var e=this;this.img0.visible=!0,egret.Tween.get(this).wait(100).call(function(){e.img0.visible=!1,e.img1.visible=!0},this).wait(100).call(function(){e.img1.visible=!1,e.img2.visible=!0},this).wait(100).call(function(){e.img2.visible=!1,e.img3.visible=!0},this)},t}(BaseUI);egret.registerClass(WeiXinUI,"WeiXinUI");var Main=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},s.onThemeLoadComplete=function(){LoadManager.getInstance().loadGroup("preload",this,this.onPreloadComplete)},s.onPreloadComplete=function(){this.preloadScene=new PreloadScene,this.addChild(this.preloadScene),this.preloadScene.playAnim(),LoadManager.getInstance().loadGroup("game",this,this.onGameComplete,this.onGameProgress)},s.onGameProgress=function(e){this.preloadScene.setProgress(Math.round(e.itemsLoaded/e.itemsTotal*100))},s.onGameComplete=function(){this.preloadScene.stopAnim(),this.removeChild(this.preloadScene),this.preloadScene=null,LayerManager.getInstance().initialize(this);var e=new GameScene;LayerManager.getInstance().runScene(e)},t}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,s){function n(e){t.call(s,e)}function h(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);