var AssetAdapter=function(){function e(){}var t=(__define,e);return p=t.prototype,p.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var JsonManager=function(){function e(){}var t=(__define,e);return p=t.prototype,e.submit={cmd:0,userid:0,gameid:0,score:0,username:""},e.revSubmit={cmd:0,scorelist:[]},e}();egret.registerClass(JsonManager,"JsonManager");var MapManager=function(){function e(){this.level1=[[0,1,0,0,1,0,0],[0,0,1,0,0,1,0],[0,0,1,0,0,0,0],[0,0,0,0,0,1,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],this.level2=[[0,1,0,0,1,0,0],[0,0,1,0,0,1,0],[0,0,1,0,0,0,0],[1,0,1,1,1,1,0],[0,0,0,0,0,0,0],[0,0,0,0,1,0,1]],this.level3=[[0,1,0,0,1,0,1],[0,0,1,0,0,1,1],[0,0,1,0,0,0,0],[1,0,1,1,1,1,0],[1,0,1,1,0,0,0],[0,0,0,0,1,0,0]],this.level4=[[0,1,0,0,1,0,1],[0,1,1,0,0,1,1],[1,0,1,0,0,0,0],[1,0,1,1,1,1,0],[1,0,1,1,0,1,0],[0,0,0,0,1,1,0]],this.level5=[[1,1,0,0,1,0,1],[1,0,1,0,0,1,1],[0,0,1,0,0,0,0],[1,0,1,1,1,1,0],[1,0,1,1,0,0,1],[0,0,0,0,1,0,1]],this.level6=[[1,1,1,1,1,1,1],[0,0,1,0,0,1,1],[0,0,1,0,0,0,0],[1,0,1,1,1,1,0],[1,0,1,1,0,0,0],[0,0,0,0,1,0,0]]}var t=(__define,e);return p=t.prototype,e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(MapManager,"MapManager");var GameConst=function(){function e(){}var t=(__define,e);return p=t.prototype,e.IP="192.168.1.50",e.Port=12345,e}();egret.registerClass(GameConst,"GameConst");var NetConst=function(){function e(){}var t=(__define,e);return p=t.prototype,e.SUBMIT_SCORE=1e3,e}();egret.registerClass(NetConst,"NetConst");var GameManager=function(){function e(){this.homeScene=new HomeScene,this.levelScene=new LevelScene,this.gameScene=new GameScene,this.titleUI=new TitleUI}var t=(__define,e);return p=t.prototype,p.startup=function(){ClientSocket.getInstance().IP=GameConst.IP,ClientSocket.getInstance().port=GameConst.Port,ClientSocket.getInstance().setSocketHand(this),LayerManager.getInstance().runScene(this.homeScene)},p.startGame=function(e){LayerManager.getInstance().runScene(this.gameScene),this.gameScene.starGame(e)},p.onSocketConnect=function(){},p.onSocketError=function(){},p.onSocketClose=function(){},p.onSocketConnectTimeOver=function(){},p.onSocketData=function(e){switch(e.cmd){case NetConst.SUBMIT_SCORE:this.gameScene.showRank(e)}},p.sendSubmit=function(e){var t=JsonManager.submit;t.cmd=NetConst.SUBMIT_SCORE,t.userid=1e3,t.gameid=1e3,t.score=e,t.username=NumberTool.getRandomInt(0,1e4).toString(),ClientSocket.getInstance().send(t)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(GameManager,"GameManager",["ISocketHand"]);var GameScene=function(e){function t(){e.call(this),this.gameGroup=new eui.Group,this.lineSprite=new egret.Sprite,this.gameWinUI=new GameWinUI,this.rankUI=new RankUI,this.blockPool=ObjectPool.getPool(BlockUI.NAME,10),this.boomPool=ObjectPool.getPool(BoomUI.NAME,10),this.selectOld=new SelectUI,this.selectNew=new SelectUI,this.blockTypeNum=10,this.blockNum=0,this.blockData=new Array,this.tempMap=new Array,this.blockArr=new Array,this.rowMax=6,this.colMax=7,this.blockWidth=74,this.blockHeight=80,this.isSelect=!1,this.score=0,this.curLevel=0,this.minRoadPoint=1e4,this.route=new Array,this.skinName="resource/myskins/GameSceneSkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,p.componentCreated=function(){e.prototype.componentCreated.call(this),this.onEnable(),this.initView()},p.onEnable=function(){this.setScoreLabel(0),this.configListeners()},p.onRemove=function(){this.deConfigListeners()},p.initView=function(){this.gameGroup.touchEnabled=!0,this.gameGroup.touchChildren=!0,this.gameGroup.addChild(this.lineSprite),this.lineSprite.touchChildren=!1,this.lineSprite.touchEnabled=!1,this.lineSprite.width=this.gameGroup.width,this.lineSprite.height=this.gameGroup.height},p.configListeners=function(){},p.deConfigListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},p.setScoreLabel=function(e){this.tempScore=e,this.score=e,this.inited&&(this.scoreLabel.text=this.tempScore.toString())},p.showRank=function(e){this.gameWinUI.hide(),this.rankUI.show(this),this.rankUI.rank(e)},p.starGame=function(e){if(console.log("start level:"+e),this.resetGame(),this.setScoreLabel(0),this.curLevel=e,this.tempMap=MapManager.getInstance()["level"+e],null==this.tempMap)return void this.quitGame();this.tempMap=ArrayTool.copy2DArr(this.tempMap);for(var t=0;t<this.rowMax;t++)for(var i=0;i<this.colMax;i++)this.tempMap[t][i]>0&&this.blockNum++;this.initBlockData(this.blockNum);for(var n=0,t=0;t<this.rowMax;t++)for(var i=0;i<this.colMax;i++)if(this.tempMap[t][i]>0){var s=this.blockPool.getObject();s.setSkin(this.blockData[n]),s.type=this.blockData[n],s.row=t,s.col=i,s.name=t+"_"+i,s.x=i*(this.blockWidth+1),s.y=t*(this.blockHeight+1),s.index=n,this.gameGroup.addChild(s),this.blockArr.push(s),n++}this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},p.quitGame=function(){this.resetGame(),LayerManager.getInstance().runScene(GameManager.getInstance().levelScene)},p.initBlockData=function(e){for(var t=0;e/2>t;t++){var i=NumberTool.getRandomInt(1,this.blockTypeNum);this.blockData.push(i,i)}ArrayTool.randomArr(this.blockData)},p.onTouchTap=function(e){e.target instanceof BlockUI&&this.checkBlock(e.target)},p.checkBlock=function(e){if(this.isSelect&&(this.oldTarget=this.newTarget,this.selectOld.play(this.oldTarget)),this.newTarget=e,this.selectNew.play(this.newTarget),this.isSelect){if(this.newTarget!=this.oldTarget&&this.newTarget.type==this.oldTarget.type){if(this.checkRoad(this.oldTarget,this.newTarget)){this.linkRoad();var t=this.boomPool.getObject(),i=this.boomPool.getObject();return this.gameGroup.addChild(t),this.gameGroup.addChild(i),t.play(this.newTarget),i.play(this.oldTarget),this.oldTarget.hide(),this.newTarget.hide(),this.tempMap[this.oldTarget.row][this.oldTarget.col]=0,this.tempMap[this.newTarget.row][this.newTarget.col]=0,this.blockArr[this.oldTarget.index]=null,this.blockArr[this.newTarget.index]=null,this.oldTarget=this.newTarget=null,this.setScoreLabel(this.score+=20),this.selectOld.hide(),this.selectNew.hide(),this.isSelect=!1,void(this.checkGameOver()&&this.gameWin())}return this.oldTarget=null,this.newTarget=null,this.selectOld.hide(),this.selectNew.hide(),void(this.isSelect=!1)}this.selectOld.hide();var n=this.selectOld;return this.selectOld=this.selectNew,void(this.selectNew=n)}this.isSelect=!0},p.checkRoad=function(e,t){console.log("checkRoad...");var i=e.row,n=e.col,s=t.row,o=t.col,r=!1;if(i==s){if(this.lineCheck(i,n,s,o))return this.route.push({x:n,y:i},{x:o,y:s}),!0;for(var h=0;h<this.rowMax;h++)0==this.tempMap[h][n]&&0==this.tempMap[h][o]&&this.lineCheck(i,n,h,n)&&this.lineCheck(h,n,h,o)&&this.lineCheck(h,o,s,o)&&(this.theShortest(i,n,h,n,h,o,s,o),r=!0)}else if(n==o){if(this.lineCheck(i,n,s,o))return this.route.push({x:n,y:i},{x:o,y:s}),!0;for(h=0;h<this.colMax;h++)0==this.tempMap[i][h]&&0==this.tempMap[s][h]&&this.lineCheck(i,n,i,h)&&this.lineCheck(i,h,s,h)&&this.lineCheck(s,h,s,o)&&(this.theShortest(i,n,i,h,s,h,s,o),r=!0)}else{if(0==this.tempMap[s][n]&&this.lineCheck(i,n,s,n)&&this.lineCheck(s,n,s,o))return this.route.push({x:n,y:i},{x:n,y:s},{x:o,y:s}),!0;if(0==this.tempMap[i][o]&&this.lineCheck(i,n,i,o)&&this.lineCheck(s,o,i,o))return this.route.push({x:n,y:i},{x:o,y:i},{x:o,y:s}),!0;for(h=0;h<this.colMax;h++)0==this.tempMap[i][h]&&0==this.tempMap[s][h]&&this.lineCheck(i,n,i,h)&&this.lineCheck(i,h,s,h)&&this.lineCheck(s,h,s,o)&&(this.theShortest(i,n,i,h,s,h,s,o),r=!0);for(h=0;h<this.rowMax;h++)0==this.tempMap[h][n]&&0==this.tempMap[h][o]&&this.lineCheck(i,n,h,n)&&this.lineCheck(h,n,h,o)&&this.lineCheck(h,o,s,o)&&(this.theShortest(i,n,h,n,h,o,s,o),r=!0)}return r},p.lineCheck=function(e,t,i,n){if(e==i){if(t>n){var s=t;t=n,n=s}if(t+1==n)return!0;for(var o=t+1;n>o;o++)if(this.tempMap[e][o]>0)return!1;return!0}if(t==n){if(e>i&&(s=e,e=i,i=s),e+1==i)return!0;for(o=e+1;i>o;o++)if(this.tempMap[o][t]>0)return!1;return!0}return!1},p.linkRoad=function(){this.lineSprite.graphics.lineStyle(5,16711680);for(var e=this.route.length-1,t=0;e>t;t++){var i=this.route[t],n=this.route[t+1],s=i.x*this.blockWidth+this.blockWidth/2,o=i.y*this.blockHeight+this.blockHeight/2,r=n.x*this.blockWidth+this.blockWidth/2,h=n.y*this.blockHeight+this.blockHeight/2;this.lineSprite.graphics.moveTo(s,o),this.lineSprite.graphics.lineTo(r,h)}this.lineSprite.graphics.endFill(),this.route.length=0,this.minRoadPoint=1e4;var a=this;setTimeout(function(){a.lineSprite.graphics.clear()},300)},p.theShortest=function(e,t,i,n,s,o,r,h){var a=0;a=Math.abs(i-e)+Math.abs(s-i)+Math.abs(r-s)+Math.abs(n-t)+Math.abs(o-n)+Math.abs(h-o),a<=this.minRoadPoint&&(this.route[0]={x:t,y:e},this.route[1]={x:n,y:i},this.route[2]={x:o,y:s},this.route[3]={x:h,y:r},this.minRoadPoint=a)},p.tishi=function(){},p.sortBlock=function(){ArrayTool.randomArr(this.blockData);for(var e,t=this.blockArr.length,i=0;t>i;i++)e=this.blockArr[i],null!=e&&(e.setSkin(this.blockData[e.index]),e.type=this.blockData[e.index])},p.checkGameOver=function(){for(var e=0;e<this.rowMax;e++)for(var t=0;t<this.colMax;t++)if(this.tempMap[e][t]>0)return!1;return!0},p.gameWin=function(){console.log("game win"),this.deConfigListeners(),this.gameWinUI.show(this),this.gameWinUI.setScoreLabel(this.score)},p.gameLose=function(){},p.resetGame=function(){for(var e=this.blockArr.length,t=0;e>t;t++)null!=this.blockArr[t]&&this.blockArr[t].hideImmediately();this.blockArr.length=0,this.isSelect=!1,this.oldTarget=null,this.newTarget=null,this.minRoadPoint=1e4,this.route.length=0,this.blockNum=0,this.blockData.length=0,this.tempMap=null,this.score=0,this.selectOld.hide(),this.selectNew.hide(),this.gameWinUI.hide(),this.rankUI.hide()},t}(BaseScene);egret.registerClass(GameScene,"GameScene");var HomeScene=function(e){function t(){e.call(this),this.skinName="resource/myskins/HomeSceneSkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,p.componentCreated=function(){e.prototype.componentCreated.call(this),this.onEnable()},p.onEnable=function(){this.configListeners()},p.onRemove=function(){this.deConfigListeners()},p.configListeners=function(){this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtnTouch,this),this.optionBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOptionBtnTouch,this),this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankBtnTouch,this),this.cupBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCupBtnTouch,this)},p.deConfigListeners=function(){this.startBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtnTouch,this),this.optionBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOptionBtnTouch,this),this.rankBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRankBtnTouch,this),this.cupBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCupBtnTouch,this)},p.onStartBtnTouch=function(){console.log("点击开始"),LayerManager.getInstance().runScene(GameManager.getInstance().levelScene)},p.onOptionBtnTouch=function(){},p.onRankBtnTouch=function(){},p.onCupBtnTouch=function(){},t}(BaseScene);egret.registerClass(HomeScene,"HomeScene");var LevelScene=function(e){function t(){e.call(this),this.levelBtnList=[],this.levelBtnMax=6,this.skinName="resource/myskins/LevelSceneSkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,p.componentCreated=function(){e.prototype.componentCreated.call(this),this.onEnable(),this.createLevelBtn()},p.onEnable=function(){this.initTitle(),this.configListeners()},p.onRemove=function(){this.deConfigListeners()},p.configListeners=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},p.deConfigListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},p.onTouchTap=function(e){if(console.log("点击关卡",e.target),e.target instanceof LevelBtnUI){var t=e.target;GameManager.getInstance().startGame(t.levelNum)}else e.target==this.backBtn&&LayerManager.getInstance().runScene(GameManager.getInstance().homeScene)},p.initTitle=function(){var e=GameManager.getInstance().titleUI;this.addChild(e),e.setTitle("选择一个关卡")},p.createLevelBtn=function(){for(var e=1;e<=this.levelBtnMax;e++){var t=new LevelBtnUI;t.horizontalCenter=e%2==0?120:-120,t.y=170*Math.ceil(e/2),t.levelNum=e,t.setLevelNumLabel(e),t.setTitleLabel("新手"),t.setFishLabel(0),t.setStarLabel(0),this.addChild(t)}},t}(BaseScene);egret.registerClass(LevelScene,"LevelScene");var LoadScene=function(e){function t(){e.call(this),this.skinName="resource/myskins/LoadSceneSkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,p.setLoadLabel=function(e){this.loadLabel.text=e},t}(BaseScene);egret.registerClass(LoadScene,"LoadScene");var BlockUI=function(e){function t(){e.call(this),this.touchEnabled=!0}__extends(t,e);var i=(__define,t);return p=i.prototype,p.setSkin=function(e){this.touchEnabled=!0,this.texture=RES.getRes("block"+e+"_png"),this.skinID=e},p.hide=function(){var e=this;this.touchEnabled=!1,egret.Tween.get(this).to({y:this.y-100,rotation:10,alpha:.2},300,egret.Ease.quadOut).call(function(){e.parent&&e.parent.removeChild(e),ObjectPool.getPool(t.NAME).returnObject(e),e.rotation=0,e.alpha=1})},p.hideImmediately=function(){egret.Tween.removeTweens(this),this.touchEnabled=!1,this.parent&&this.parent.removeChild(this),this.rotation=0,this.alpha=1},t.NAME="BlockUI",t}(egret.Bitmap);egret.registerClass(BlockUI,"BlockUI");var BoomUI=function(e){function t(){e.call(this),this.texture=RES.getRes("cloud_png"),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2}__extends(t,e);var i=(__define,t);return p=i.prototype,p.play=function(e){this.x=e.x+this.width/2,this.y=e.y+this.height/2,e.parent.addChild(this);var i=this;egret.Tween.get(this).to({alpha:.3,rotation:360},500).call(function(){i.parent.removeChild(i),i.alpha=1,i.rotation=0,ObjectPool.getPool(t.NAME).returnObject(i)})},t.NAME="BoomUI",t}(egret.Bitmap);egret.registerClass(BoomUI,"BoomUI");var GameWinUI=function(e){function t(){e.call(this),this.skinName="resource/myskins/GameWinUISkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,p.componentCreated=function(){e.prototype.componentCreated.call(this),this.setScoreLabel(this.tempScore),this.configListeners()},p.show=function(e){e.addChild(this),this.x=e.width/2-this.width/2,this.y=e.height/2-this.height/2},p.configListeners=function(){this.retryBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRetryBtnTouch,this),this.nextBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNextBtnTouch,this)},p.onRetryBtnTouch=function(){console.log("touch retrybtn"),GameManager.getInstance().gameScene.quitGame()},p.onNextBtnTouch=function(){console.log("touch nextbtn");var e=GameManager.getInstance().gameScene;e.starGame(e.curLevel+1)},p.setScoreLabel=function(e){this.tempScore=e,this.inited&&(this.scoreLabel.text="分数："+this.tempScore)},p.hide=function(){this.parent&&this.parent.removeChild(this),this.setScoreLabel(0)},t}(BaseUI);egret.registerClass(GameWinUI,"GameWinUI");var LevelBtnUI=function(e){function t(){e.call(this),this.levelNum=0,this.skinName="resource/myskins/LevelBtnUISkin.exml",this.touchChildren=!1}__extends(t,e);var i=(__define,t);return p=i.prototype,p.componentCreated=function(){e.prototype.componentCreated.call(this),this.levelNumLabel.touchEnabled=!1,this.titleLabel.touchEnabled=!1,this.fishLabel.touchEnabled=!1,this.starLabel.touchEnabled=!1,this.setLevelNumLabel(this.tempLevelNum),this.setTitleLabel(this.tempTitle),this.setFishLabel(this.tempFishNum),this.setStarLabel(this.tempStarNum)},p.setLevelNumLabel=function(e){this.tempLevelNum=e,this.levelNum=e,this.inited&&(this.levelNumLabel.text="-"+this.tempLevelNum+"-")},p.setTitleLabel=function(e){this.tempTitle=e,this.inited&&(this.titleLabel.text=this.tempTitle)},p.setFishLabel=function(e){this.tempFishNum=e,this.inited&&(this.fishLabel.text=this.tempFishNum.toString())},p.setStarLabel=function(e){this.tempStarNum=e,this.inited&&(this.starLabel.text=this.tempStarNum.toString())},t}(BaseUI);egret.registerClass(LevelBtnUI,"LevelBtnUI");var RankUI=function(e){function t(){e.call(this),this.nameList=[],this.scoreList=[],this.skinName="resource/myskins/RankUISkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,p.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView(),this.rank(JsonManager.revSubmit)},p.initView=function(){this.quitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQuitBtnTouch,this);for(var e=0;3>e;e++)this.nameList.push(this["name"+e+"Label"]),this.scoreList.push(this["score"+e+"Label"])},p.show=function(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2,e.addChild(this)},p.rank=function(e){if(JsonManager.revSubmit=e,this.inited)for(var t=JsonManager.revSubmit,i=0;3>i;i++)null!=t.scorelist[i]&&""!=t.scorelist[i][0]?(this.nameList[i].text=t.scorelist[i][0],this.scoreList[i].text=t.scorelist[i][1]):(this.nameList[i].text="",this.scoreList[i].text="")},p.hide=function(){this.parent&&this.parent.removeChild(this)},p.onQuitBtnTouch=function(){GameManager.getInstance().gameScene.quitGame()},t}(BaseUI);egret.registerClass(RankUI,"RankUI");var SelectUI=function(e){function t(){e.call(this),this.timer=new egret.Timer(300),this.selectMini=new egret.Bitmap(RES.getRes("select0_png")),this.selectBig=new egret.Bitmap(RES.getRes("select1_png")),this.addChild(this.selectMini),this.addChild(this.selectBig),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.play=function(e){this.x=e.x-15,this.y=e.y-15,e.parent.addChild(this),this.timer.reset(),this.timer.start(),this.selectMini.visible=!0,this.selectBig.visible=!1},p.hide=function(){this.parent&&this.parent.removeChild(this),this.timer.stop(),this.selectMini.visible=!0,this.selectBig.visible=!1},p.onTimerHandler=function(){this.timer.currentCount%2==0?(this.selectMini.visible=!0,this.selectBig.visible=!1):(this.selectMini.visible=!1,this.selectBig.visible=!0)},t}(egret.Sprite);egret.registerClass(SelectUI,"SelectUI");var TitleUI=function(e){function t(){e.call(this),this.skinName="resource/myskins/TitleUISkin.exml",this.horizontalCenter=0}__extends(t,e);var i=(__define,t);return p=i.prototype,p.componentCreated=function(){e.prototype.componentCreated.call(this)},p.setTitle=function(e){this.tempTitle=e,this.inited&&(this.titleLabel.text=this.tempTitle)},t}(BaseUI);egret.registerClass(TitleUI,"TitleUI");var Main=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},p.onConfigComplete=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),LoadManager.getInstance().loadGroup("loading",this,this.onLoadingComplete)},p.onLoadingComplete=function(){this.loadScene=new LoadScene,LayerManager.getInstance().initialize(this),LayerManager.getInstance().runScene(this.loadScene),LoadManager.getInstance().loadGroup("preload",this,this.onPreloadComplete,this.onPreloadProgress)},p.onPreloadProgress=function(e){this.loadScene.setLoadLabel(e.itemsLoaded+"/"+e.itemsTotal)},p.onPreloadComplete=function(){GameManager.getInstance().startup()},t}(eui.UILayer);egret.registerClass(Main,"Main");