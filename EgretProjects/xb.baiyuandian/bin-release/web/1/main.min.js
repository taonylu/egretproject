var AssetAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?i(s):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var BaseScene=function(e){function t(t){e.call(this),this.inited=!1,this.percentWidth=100,this.percentHeight=100,this.touchEnabled=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.skinName=t}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},i.onEnable=function(){},i.onRemove=function(){},i.onDestroy=function(){},t}(eui.Component);egret.registerClass(BaseScene,"BaseScene");var BaseUI=function(e){function t(t){e.call(this),this.inited=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.skinName=t}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},t}(eui.Component);egret.registerClass(BaseUI,"BaseUI");var LayerManager=function(){function e(){this.tweenTime=500}var t=(__define,e),n=t.prototype;return n.initialize=function(e){this.main=e,this.sceneLayer=new eui.Group,this.sceneLayer.percentWidth=100,this.sceneLayer.percentHeight=100,this.sceneLayer.touchEnabled=!1,this.main.addChild(this.sceneLayer),this.popLayer=new eui.Group,this.popLayer.percentWidth=100,this.popLayer.percentHeight=100,this.popLayer.touchEnabled=!1,this.popLayer.touchThrough=!0,this.main.addChild(this.popLayer)},n.runScene=function(e,t){void 0===t&&(t=!1),null!=this.curScene&&this.curScene&&(this.sceneLayer.removeChild(this.curScene),this.curScene.onRemove(),t&&this.curScene.onDestroy()),this.sceneLayer.addChild(e),e.inited&&e.onEnable(),this.curScene=e},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(LayerManager,"LayerManager");var LoadManager=function(){function e(){this.loadComplete=new Object,this.loadError=new Object,this.loadProgress=new Object,this.thisObject=new Object}var t=(__define,e),n=t.prototype;return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},n.loadGroup=function(e,t,n,i,s){void 0===n&&(n=null),void 0===i&&(i=null),void 0===s&&(s=null),this.loadComplete[e]=n,this.loadError[e]=s,this.loadProgress[e]=i,this.thisObject[e]=t,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},n.onResourceLoadComplete=function(e){var t=e.groupName;RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);var n=this.loadComplete[t];null!=n&&n.call(this.thisObject[t],e),this.clearCallBack(t)},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load");var t=this.loadError[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e),this.clearCallBack(e.groupName)},n.onResourceProgress=function(e){var t=this.loadProgress[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e)},n.clearCallBack=function(e){this.loadComplete[e]=null,this.loadError[e]=null,this.loadProgress[e]=null},e}();egret.registerClass(LoadManager,"LoadManager");var NumberTool=function(){function e(){}var t=(__define,e);t.prototype;return e.getRandomInt=function(e,t){return Math.round(Math.random()*(t-e))+e},e.getTimeString=function(e){var t="";return t=10>e?"0"+e:e.toString()},e}();egret.registerClass(NumberTool,"NumberTool");var ObjectPool=function(){function e(e){this.className=e,this.list=[]}var t=(__define,e),n=t.prototype;return n.getObject=function(){if(this.list.length>0)return this.list.shift();var e=egret.getDefinitionByName(this.className);return new e},n.returnObject=function(e){this.list.push(e)},e.getPool=function(t,n){if(void 0===n&&(n=0),!e.pool[t]&&(e.pool[t]=new e(t),0!=n))for(var i=egret.getDefinitionByName(t),s=e.pool[t],o=0;n>o;o++)s.returnObject(new i);return e.pool[t]},e.pool={},e}();egret.registerClass(ObjectPool,"ObjectPool");var SingleHttp=function(){function e(){this.request=new egret.HttpRequest,this.request.responseType=egret.HttpResponseType.TEXT,this.request.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),this.request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this)}var t=(__define,e),n=t.prototype;return n.send=function(e,t,n,i){this.thisObject=i,this.request.open(e,t),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),""!=n?this.request.send(n):this.request.send()},n.onPostComplete=function(e){this.completeHandler&&this.completeHandler.call(this.thisObject,this.request.response)},n.onPostIOError=function(e){this.errorHandler&&this.errorHandler.call(this.thisObject,e)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(SingleHttp,"SingleHttp");var SoundManager=function(){function e(){this.get="get",this.bgm="bgm",this.soundList={},this.soundList[this.get]=RES.getRes("get_mp3"),this.soundList[this.bgm]=RES.getRes("bgm_mp3")}var t=(__define,e),n=t.prototype;return n.play=function(e,t){void 0===t&&(t=1);var n=this.soundList[e];n&&n.play(0,t)},n.playBGM=function(){null!=this.bgmChannel&&(this.bgmChannel.stop(),this.bgmChannel=null);var e=this.soundList[this.bgm];e&&(this.bgmChannel=e.play())},n.stopBGM=function(){null!=this.bgmChannel&&(this.bgmChannel.stop(),this.bgmChannel=null)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(SoundManager,"SoundManager");var GameConst=function(){function e(){}var t=(__define,e);t.prototype;return e.historyScore=0,e}();egret.registerClass(GameConst,"GameConst");var GameManager=function(){function e(){this.homeScene=new HomeScene,this.gameScene=new GameScene,this.resultScene=new ResultScene,this.gameLoseScene=new GameLoseScene,this.submitScene=new SubmitScene,this.shareUI=new ShareUI,this.ruleUI=new RuleUI}var t=(__define,e),n=t.prototype;return n.startup=function(e){GameConst.stage=e.stage,LayerManager.getInstance().initialize(e),LayerManager.getInstance().runScene(this.homeScene)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(GameManager,"GameManager");var GameLoseScene=function(e){function t(){e.call(this,"GameLoseSceneSkin")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this)},i.onEnable=function(){this.wrongPacket.alpha=1,egret.Tween.get(this.wrongPacket).wait(1200).to({alpha:0},800).call(function(){LayerManager.getInstance().runScene(GameManager.getInstance().submitScene)},this)},i.onRemove=function(){},t}(BaseScene);egret.registerClass(GameLoseScene,"GameLoseScene");var GameScene=function(e){function t(){e.call(this,"GameSceneSkin"),this.score=0,this.packetPool0=ObjectPool.getPool("Packet0",3),this.packetPool10=ObjectPool.getPool("Packet10",5),this.packetPool20=ObjectPool.getPool("Packet20",5),this.packetPool30=ObjectPool.getPool("Packet30",5),this.packetPool50=ObjectPool.getPool("Packet50",3),this.packetPool80=ObjectPool.getPool("Packet80",3),this.packetPool100=ObjectPool.getPool("Packet100",3),this.poolList=[this.packetPool0,this.packetPool10,this.packetPool20,this.packetPool30,this.packetPool50,this.packetPool80,this.packetPool100],this.packetList=[],this.bFirstGame=!0,this.gameTimer=new egret.Timer(1e3),this.timeLimit=20,this.curTime=this.timeLimit,this.snd=SoundManager.getInstance(),this.os="",this.soundCount=0}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},i.onEnable=function(){this.bFirstGame?(this.fallBag(),this.bFirstGame=!1):this.startGame()},i.onRemove=function(){this.soundCount=0},i.initView=function(){this.validateNow(),this.stageWidth=GameConst.stage.stageWidth,this.stageHeight=GameConst.stage.stageHeight,this.countDownLabel.parent&&this.removeChild(this.countDownLabel),this.timeLabel.text=this.timeLimit.toString(),this.os=egret.Capabilities.os},i.startGame=function(){this.resetGame(),this.countDown()},i.resetGame=function(){egret.Tween.removeTweens(this),this.score=0,this.stopGameTimer(),this.curTime=this.timeLimit,this.timeLabel.text=this.timeLimit.toString(),this.timeBg.scaleX=1},i.gameWin=function(){egret.Tween.removeTweens(this.bag),this.stopGameTimer(),LayerManager.getInstance().runScene(GameManager.getInstance().resultScene)},i.gameLose=function(){egret.Tween.removeTweens(this.bag),this.stopGameTimer(),LayerManager.getInstance().runScene(GameManager.getInstance().gameLoseScene)},i.fallBag=function(){this.bag.y=-this.bag.height,egret.Tween.get(this.bag).to({y:this.stageHeight-this.bag.height/2+100},800,egret.Ease.bounceOut).call(this.countDown,this)},i.countDown=function(){var e=this,t=5;this.addChild(this.countDownLabel),this.countDownLabel.text=t.toString(),egret.Tween.get(this,{loop:!0}).wait(700).call(function(){return t--,0>=t?void e.countDownComplete():void(e.countDownLabel.text=t.toString())})},i.countDownComplete=function(){egret.Tween.removeTweens(this),this.removeChild(this.countDownLabel),this.startGameTimer(),this.launchPacket(),this.packetGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPacketTouch,this)},i.onEnterFrame=function(){for(var e=this.packetList.length,t=e-1;t>=0;t--){var n=this.packetList[t];n.x+=n.speedX,n.y+=n.speedY,(n.y<=-200||n.x<=-100||n.x>=this.stageWidth+100)&&(n.recycle(),this.packetList.splice(t,1))}return!0},i.launchPacket=function(){var e;e=Math.random()>.2?this.poolList[NumberTool.getRandomInt(0,6)].getObject():this.poolList[0].getObject(),e.x=this.bag.x+this.bag.width/2,e.y=this.bag.y+this.bag.height/2,e.shoot(),this.packetGroup.addChild(e);var t=250;egret.Tween.get(this.bag).wait(t).call(this.launchPacket,this)},i.onPacketTouch=function(e){if(e.target instanceof BasePacket||e.currentTarget instanceof BasePacket){if("Android"==this.os){if(this.soundCount<1){this.soundCount++,this.snd.play(this.snd.get);var t=this;egret.Tween.get(this).wait(1500).call(function(){t.soundCount=0})}}else this.snd.play(this.snd.get);var n=e.target;this.score+=n.score,n.parent&&n.parent.removeChild(n),n.score<=0&&this.gameLose()}},i.startGameTimer=function(){this.gameTimer.addEventListener(egret.TimerEvent.TIMER,this.onGameTimer,this),this.gameTimer.reset(),this.gameTimer.start()},i.onGameTimer=function(){return this.curTime--,this.curTime<=0?void this.gameWin():(this.timeLabel.text=this.curTime.toString(),void(this.timeBg.scaleX=this.curTime/this.timeLimit))},i.stopGameTimer=function(){this.gameTimer.removeEventListener(egret.TimerEvent.TIMER,this.onGameTimer,this),this.gameTimer.stop()},t}(BaseScene);egret.registerClass(GameScene,"GameScene");var HomeScene=function(e){function t(){e.call(this,"HomeSceneSkin")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},i.onEnable=function(){SoundManager.getInstance().playBGM(),this.playAnim()},i.onRemove=function(){},i.initView=function(){this.validateNow(),this.stageWidth=GameConst.stage.stageWidth,this.stageHeight=GameConst.stage.stageHeight,this.scene1.visible=!0,this.initGuizi0X=this.guizi0.x,this.initGuizi1X=this.guizi1.x,this.initGuizi2X=this.guizi2.x,this.initMan0X=this.man0.x,this.man_talk1.alpha=0;var e=GameConst.stage.stageWidth;this.guizi0.x=e,this.guizi1.x=e,this.guizi2.x=e,this.man0.x=e,this.scene2.visible=!1,this.logo.x=-this.logo.width,this.posDesk.y=this.stageHeight,this.man1.y=this.stageHeight-this.man1.height,this.man1.x=this.stageWidth,this.man1_talk.y=this.man1.y-200,this.man1_talk.alpha=0,this.door.x=-this.door.width,this.door.y=this.man1.y-306,this.doorClip.mask=this.doorClipMask,this.godGroup.visible=!1,this.godGroup.y=this.man1.y-606,this.startBtn.alpha=0,this.ruleBtn.alpha=0,this.godTalk.alpha=0},i.playAnim=function(){var e=this;egret.Tween.get(this.clockGroup).to({y:130,scaleX:.7,scaleY:.7},300),egret.Tween.get(this.guizi0).wait(200).to({x:this.initGuizi0X},500,egret.Ease.backOut),egret.Tween.get(this.guizi1).wait(400).to({x:this.initGuizi1X},500,egret.Ease.backOut),egret.Tween.get(this.guizi2).wait(600).to({x:this.initGuizi2X},500,egret.Ease.backOut),egret.Tween.get(this.man0).wait(700).to({x:this.initMan0X},500,egret.Ease.getBackOut(1)),egret.Tween.get(this.man_talk1).wait(1300).to({alpha:1},1e3).to({alpha:0},1e3).call(function(){e.playGuiZiBack()})},i.playGuiZiBack=function(){egret.Tween.get(this.clockGroup).to({y:-this.clockGroup.height},500,egret.Ease.backIn),egret.Tween.get(this.man0).to({x:this.stageWidth+this.man0.width},300,egret.Ease.getBackIn(1)),egret.Tween.get(this.guizi0).wait(200).to({x:this.stageWidth+this.guizi0.width},500,egret.Ease.backIn),egret.Tween.get(this.guizi1).wait(400).to({x:this.stageWidth+this.guizi1.width},500,egret.Ease.backIn),egret.Tween.get(this.guizi2).wait(600).to({x:this.stageWidth+this.guizi2.width},500,egret.Ease.backIn),egret.Tween.get(this).wait(900).call(this.playCountMoney)},i.playCountMoney=function(){this.scene2.visible=!0;var e=this;egret.Tween.get(this.logo).to({x:(this.stageWidth-this.logo.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.door).wait(100).to({x:(this.stageWidth-this.door.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.posDesk).wait(300).to({y:this.stageHeight-this.posDesk.height+50},500,egret.Ease.getBackOut(1.2)),egret.Tween.get(this.man1).wait(500).to({x:(this.stageWidth-this.man1.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.man1_talk).wait(1200).to({alpha:1},800).wait(500).call(function(){e.playGodEnter()})},i.playGodEnter=function(){egret.Tween.get(this.man1).to({alpha:0},1e3),egret.Tween.get(this.posDesk).to({alpha:0},1e3),egret.Tween.get(this.man1_talk).to({alpha:0},1e3),this.godGroup.visible=!0,egret.Tween.get(this.godHand,{loop:!0}).to({rotation:10},500).to({rotation:0},500),egret.Tween.get(this.godHead,{loop:!0}).to({y:this.godHead.y+5},500).to({y:this.godHead.y},500);var e=this.smoke0.x;egret.Tween.get(this.smoke0,{loop:!0}).to({x:e-50,alpha:.1},2e3).to({x:e,alpha:1});var t=this.smoke3.x;egret.Tween.get(this.smoke3,{loop:!0}).to({x:t-100,alpha:.1},2e3).to({x:t,alpha:1});var n=this.smoke1.x;egret.Tween.get(this.smoke1,{loop:!0}).to({x:n+50,alpha:.1},2e3).to({x:n,alpha:1});var i=this.smoke2.x;egret.Tween.get(this.smoke2,{loop:!0}).to({x:i+100,alpha:.1},2e3).to({x:i,alpha:1}),egret.Tween.get(this.doorClip).to({y:-this.doorClip.height},2e3).wait(300).call(this.playStartUIEnter,this)},i.playStartUIEnter=function(){egret.Tween.get(this.doorBg).to({alpha:0},500),egret.Tween.get(this.logo).to({alpha:0},500),egret.Tween.get(this.startBtn).wait(500).to({alpha:1},500),egret.Tween.get(this.ruleBtn).wait(500).to({alpha:1},500),egret.Tween.get(this.godTalk).wait(1e3).to({alpha:1},500),this.ruleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRuleBtnTouch,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtnTouch,this)},i.onRuleBtnTouch=function(){LayerManager.getInstance().popLayer.addChild(GameManager.getInstance().ruleUI)},i.onCloseBtnTouch=function(){},i.onJiaoHuoBtnTouch=function(){window.location.href="http://www.dipo.pro"},i.onStartBtnTouch=function(){egret.Tween.removeAllTweens(),LayerManager.getInstance().runScene(GameManager.getInstance().gameScene)},t}(BaseScene);egret.registerClass(HomeScene,"HomeScene");var PreloadScene=function(e){function t(){e.call(this,"PreloadSceneSkin")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this)},i.setProgress=function(e){this.inited&&(this.progressLabel.text=e.toString())},t}(BaseScene);egret.registerClass(PreloadScene,"PreloadScene");var ResultScene=function(e){function t(){e.call(this,"ResultSceneSkin"),this.resultUIList=new Array,this.resultUILimit=10}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},i.onEnable=function(){this.no1.parent&&this.no1.parent.removeChild(this.no1),this.no2.parent&&this.no2.parent.removeChild(this.no2),this.no3.parent&&this.no3.parent.removeChild(this.no3),this.againBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtnTouch,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareBtnTouch,this),this.linkBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLinkBtnTouch,this),this.ruleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRuleBtnTouch,this),this.showRank()},i.onRemove=function(){for(var e=this.resultUIList.length,t=0;e>t;t++){var n=this.resultUIList[t];n.clear(),n.parent&&n.parent.removeChild(n)}},i.initView=function(){this.validateNow(),this.scrollerGroup.y=(GameConst.stage.stageHeight-this.scrollerGroup.height)/2;for(var e=0;e<this.resultUILimit;e++){var t=new ResultUI;t.x=0,t.y=t.height*e,this.resultUIList.push(t),this.scrollerGroup.addChild(t)}},i.onAgainBtnTouch=function(){LayerManager.getInstance().runScene(GameManager.getInstance().gameScene)},i.onShareBtnTouch=function(){console.log("分享"),LayerManager.getInstance().popLayer.addChild(GameManager.getInstance().shareUI)},i.onLinkBtnTouch=function(){window.location.href="http://www.dipo.pro"},i.onRuleBtnTouch=function(){LayerManager.getInstance().popLayer.addChild(GameManager.getInstance().ruleUI)},i.showRank=function(){var e=GameConst.rankJson,t=e.rankList,n=e.success,i=e.historyScore,s=e.msg,o=e.rank,a=e.count;if(egret.log("rankList:",t),egret.log("success:",n),egret.log("msg:",s),egret.log("rank:",o),egret.log("count:",a),egret.log("history:",i),1!=n)return void alert(s);if(t){var r=t.length;r=r>10?10:r;for(var h,c,l=0;r>l;l++)h=t[l],c=this.resultUIList[l],c.setScoreLabel(h.score),c.setTelLabel(h.headUrl),c.y=110*l,this.scrollerGroup.addChild(c);1>=a?this.rateLabel.text="100":this.rateLabel.text=Math.round((a-o)/(a-1)*100)+"",i<GameConst.historyScore?this.historyScoreLabel.text=GameConst.historyScore+"":(GameConst.historyScore=i,this.historyScoreLabel.text=i+""),r>=1&&this.scrollerGroup.addChild(this.no1),r>=2&&this.scrollerGroup.addChild(this.no2),r>=3&&this.scrollerGroup.addChild(this.no3);var g=["太棒了","太厉害了","真行"],u="!你从财神爷那里开了"+GameConst.historyScore+"个金币,2016年",d=["财运滚滚","财运亨通","日进斗金","和气生财","招财进宝"],p="，打败了"+this.rateLabel.text+"%的西班牙同胞";window.shareText=g[NumberTool.getRandomInt(0,2)]+u+d[NumberTool.getRandomInt(0,4)]+p,window.wxshare()}},t}(BaseScene);egret.registerClass(ResultScene,"ResultScene");var SubmitScene=function(e){function t(){e.call(this,"SubmitSceneSkin"),this.textBgList=new Array}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this),this.textBgList.push(this.textBg0,this.textBg1,this.textBg2),this.telLabel.prompt="请填写手机号码"},i.onEnable=function(){this.setScoreLabel(),this.configListeners()},i.onRemove=function(){this.deConfigListeners()},i.configListeners=function(){this.submitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubmitBtnTouch,this),this.againBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtnTouch,this)},i.deConfigListeners=function(){this.submitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubmitBtnTouch,this),this.againBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtnTouch,this)},i.onSubmitBtnTouch=function(){this.submitScore()},i.onAgainBtnTouch=function(){LayerManager.getInstance().runScene(GameManager.getInstance().gameScene)},i.setScoreLabel=function(){this.textBg0.visible=!1,this.textBg1.visible=!1,this.textBg2.visible=!1,this.textBgList[NumberTool.getRandomInt(0,2)].visible=!0;var e=GameManager.getInstance().gameScene;this.secLabel.text=(e.timeLimit-e.curTime).toString(),this.curScoreLabel.text=e.score.toString(),GameConst.historyScore=GameConst.historyScore>e.score?GameConst.historyScore:e.score,this.historyScoreLabel.text=GameConst.historyScore.toString()},i.submitScore=function(){var e=SingleHttp.getInstance();e.completeHandler=this.completeHandler,e.errorHandler=this.errorHandler;var t=""+window.url,n="score="+GameManager.getInstance().gameScene.score,i="&_csrf="+window._csrf,s="&tel="+this.telLabel.text,o=n+i+s;e.send(t,egret.HttpMethod.POST,o,this)},i.completeHandler=function(e){console.log("接收返回数据:"+e),GameConst.rankJson=JSON.parse(e),LayerManager.getInstance().runScene(GameManager.getInstance().resultScene)},i.errorHandler=function(){alert("提交地址错误")},t}(BaseScene);egret.registerClass(SubmitScene,"SubmitScene");var BasePacket=function(e){function t(t,n,i,s){void 0===s&&(s=null),e.call(this),this.className=t,this.score=n,this.bg=new egret.Bitmap(s),this.bg.width=175,this.bg.height=272,this.addChild(this.bg),i&&(this.money=new egret.Bitmap(i),this.money.y=20,this.money.x=(this.width-this.money.width)/2+10,this.addChild(this.money)),this.anchorOffsetX=this.bg.width/2,this.anchorOffsetY=this.bg.height/2,this.touchChildren=!1,this.touchEnabled=!0}__extends(t,e);var n=(__define,t),i=n.prototype;return i.shoot=function(){this.rotation=NumberTool.getRandomInt(-20,20);var e=2e3+500*Math.random(),t=1500,n=this.rotation*Math.PI/180,i=GameConst.stage.stageWidth/2+t*Math.sin(n),s=GameConst.stage.stageHeight-t*Math.cos(n),o=this;egret.Tween.get(this).to({x:i,y:s},e).call(function(){o.recycle()})},i.recycle=function(){this.rotation=0,this.parent&&this.parent.removeChild(this),egret.Tween.removeTweens(this),ObjectPool.getPool(this.className).returnObject(this)},t}(egret.DisplayObjectContainer);egret.registerClass(BasePacket,"BasePacket");var Packet0=function(e){function t(){e.call(this,"Packet0",0,null,RES.getRes("packet0_png"))}__extends(t,e);var n=(__define,t);n.prototype;return t}(BasePacket);egret.registerClass(Packet0,"Packet0");var Packet10=function(e){function t(){e.call(this,"Packet10",10,RES.getRes("packet10"),RES.getRes("packetbg"))}__extends(t,e);var n=(__define,t);n.prototype;return t}(BasePacket);egret.registerClass(Packet10,"Packet10");var Packet100=function(e){function t(){e.call(this,"Packet100",100,RES.getRes("packet100"),RES.getRes("packetbg"))}__extends(t,e);var n=(__define,t);n.prototype;return t}(BasePacket);egret.registerClass(Packet100,"Packet100");var Packet20=function(e){function t(){e.call(this,"Packet20",20,RES.getRes("packet20"),RES.getRes("packetbg"))}__extends(t,e);var n=(__define,t);n.prototype;return t}(BasePacket);egret.registerClass(Packet20,"Packet20");var Packet30=function(e){function t(){e.call(this,"Packet30",30,RES.getRes("packet30_png"),RES.getRes("packetbg"))}__extends(t,e);var n=(__define,t);n.prototype;return t}(BasePacket);egret.registerClass(Packet30,"Packet30");var Packet50=function(e){function t(){e.call(this,"Packet50",50,RES.getRes("packet50"),RES.getRes("packetbg"))}__extends(t,e);var n=(__define,t);n.prototype;return t}(BasePacket);egret.registerClass(Packet50,"Packet50");var Packet80=function(e){function t(){e.call(this,"Packet80",80,RES.getRes("packet80_png"),RES.getRes("packetbg"))}__extends(t,e);var n=(__define,t);n.prototype;return t}(BasePacket);egret.registerClass(Packet80,"Packet80");var ResultUI=function(e){function t(){e.call(this,"ResultUISkin")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this)},i.setScoreLabel=function(e){this.scoreLabel.text=e.toString()},i.setTelLabel=function(e){this.telLabel.text=e.toString()},i.clear=function(){this.scoreLabel.text="",this.telLabel.text=""},t}(BaseUI);egret.registerClass(ResultUI,"ResultUI");var RuleUI=function(e){function t(){e.call(this,"RuleUISkin"),this.percentWidth=100,this.percentHeight=100}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTouch,this),this.jiaohuoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJiaoHuoBtnTouch,this)},i.onCloseBtnTouch=function(){this.parent&&this.parent.removeChild(this)},i.onJiaoHuoBtnTouch=function(){window.location.href="http://www.dipo.pro"},t}(BaseUI);egret.registerClass(RuleUI,"RuleUI");var ShareUI=function(e){function t(){e.call(this,"ShareUISkin")}__extends(t,e);var n=(__define,t),i=n.prototype;return i.componentCreated=function(){e.prototype.componentCreated.call(this),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},i.onTouchTap=function(){this.parent&&this.parent.removeChild(this)},t}(BaseUI);egret.registerClass(ShareUI,"ShareUI");var Main=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t),i=n.prototype;return i.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage22222,this)},i.onAddToStage22222=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage22222,this),console.log(this.stage.stageHeight/this.stage.stageWidth),this.stage.stageHeight/this.stage.stageWidth<=1.5},i.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},i.onThemeLoadComplete=function(){LoadManager.getInstance().loadGroup("preload",this,this.onPreloadComplete)},i.onPreloadComplete=function(e){this.preloadScene=new PreloadScene,this.addChild(this.preloadScene),LoadManager.getInstance().loadGroup("game",this,this.onGameComplete,this.onGameProgress)},i.onGameProgress=function(e){var t=Math.floor(e.itemsLoaded/e.itemsTotal*100/20)+1;t>5&&(t=5),this.preloadScene.setProgress(t)},i.onGameComplete=function(){this.removeChild(this.preloadScene),this.preloadScene=null,GameManager.getInstance().startup(this)},t}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function e(){}var t=(__define,e),n=t.prototype;return n.getTheme=function(e,t,n,i){function s(e){t.call(i,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);