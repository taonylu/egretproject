var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var BaseScene=function(e){function t(t){e.call(this),this.inited=!1,this.percentWidth=100,this.percentHeight=100,this.touchEnabled=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.skinName=t}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},n.onEnable=function(){},n.onRemove=function(){},n.onDestroy=function(){},t}(eui.Component);egret.registerClass(BaseScene,"BaseScene");var BaseUI=function(e){function t(t){e.call(this),this.inited=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.skinName=t}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},t}(eui.Component);egret.registerClass(BaseUI,"BaseUI");var LayerManager=function(){function e(){this.tweenTime=500}var t=(__define,e),i=t.prototype;return i.initialize=function(e){this.main=e,this.sceneLayer=new eui.Group,this.sceneLayer.percentWidth=100,this.sceneLayer.percentHeight=100,this.sceneLayer.touchEnabled=!1,this.main.addChild(this.sceneLayer),this.popLayer=new eui.Group,this.popLayer.percentWidth=100,this.popLayer.percentHeight=100,this.popLayer.touchEnabled=!1,this.popLayer.touchThrough=!0,this.main.addChild(this.popLayer)},i.runScene=function(e,t){void 0===t&&(t=!1),null!=this.curScene&&this.curScene&&(this.sceneLayer.removeChild(this.curScene),this.curScene.onRemove(),t&&this.curScene.onDestroy()),this.sceneLayer.addChild(e),e.inited&&e.onEnable(),this.curScene=e},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(LayerManager,"LayerManager");var LoadManager=function(){function e(){this.loadComplete=new Object,this.loadError=new Object,this.loadProgress=new Object,this.thisObject=new Object}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},i.loadGroup=function(e,t,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=null),this.loadComplete[e]=i,this.loadError[e]=s,this.loadProgress[e]=n,this.thisObject[e]=t,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},i.onResourceLoadComplete=function(e){var t=e.groupName;RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);var i=this.loadComplete[t];null!=i&&i.call(this.thisObject[t],e),this.clearCallBack(t)},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load");var t=this.loadError[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e),this.clearCallBack(e.groupName)},i.onResourceProgress=function(e){var t=this.loadProgress[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e)},i.clearCallBack=function(e){this.loadComplete[e]=null,this.loadError[e]=null,this.loadProgress[e]=null},e}();egret.registerClass(LoadManager,"LoadManager");var NumberTool=function(){function e(){}var t=(__define,e);t.prototype;return e.getRandomInt=function(e,t){return Math.round(Math.random()*(t-e))+e},e.getTimeString=function(e){var t="";return t=10>e?"0"+e:e.toString()},e}();egret.registerClass(NumberTool,"NumberTool");var ObjectPool=function(){function e(e){this.className=e,this.list=[]}var t=(__define,e),i=t.prototype;return i.getObject=function(){if(this.list.length>0)return this.list.shift();var e=egret.getDefinitionByName(this.className);return new e},i.returnObject=function(e){this.list.push(e)},e.getPool=function(t,i){if(void 0===i&&(i=0),!e.pool[t]&&(e.pool[t]=new e(t),0!=i))for(var n=egret.getDefinitionByName(t),s=e.pool[t],a=0;i>a;a++)s.returnObject(new n);return e.pool[t]},e.pool={},e}();egret.registerClass(ObjectPool,"ObjectPool");var SingleHttp=function(){function e(){this.request=new egret.HttpRequest,this.request.responseType=egret.HttpResponseType.TEXT,this.request.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),this.request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this)}var t=(__define,e),i=t.prototype;return i.send=function(e,t,i,n){this.thisObject=n,this.request.open(e,t),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),""!=i?this.request.send(i):this.request.send()},i.onPostComplete=function(e){this.completeHandler&&this.completeHandler.call(this.thisObject,this.request.response)},i.onPostIOError=function(e){this.errorHandler&&this.errorHandler.call(this.thisObject,e)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(SingleHttp,"SingleHttp");var SoundManager=function(){function e(){this.get="get",this.bgm="bgm",this.soundList={},this.soundList[this.get]=RES.getRes("get_mp3"),this.soundList[this.bgm]=RES.getRes("bgm_mp3")}var t=(__define,e),i=t.prototype;return i.play=function(e,t){void 0===t&&(t=1);var i=this.soundList[e];i&&i.play(0,t)},i.playBGM=function(){null!=this.bgmChannel&&(this.bgmChannel.stop(),this.bgmChannel=null);var e=this.soundList[this.bgm];e&&(this.bgmChannel=e.play())},i.stopBGM=function(){null!=this.bgmChannel&&(this.bgmChannel.stop(),this.bgmChannel=null)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(SoundManager,"SoundManager");var GameConst=function(){function e(){}var t=(__define,e);t.prototype;return e.historyScore=0,e}();egret.registerClass(GameConst,"GameConst");var GameManager=function(){function e(){this.homeScene=new HomeScene,this.gameScene=new GameScene,this.resultScene=new ResultScene,this.shareUI=new ShareUI,this.ruleUI=new RuleUI}var t=(__define,e),i=t.prototype;return i.startup=function(e){GameConst.stage=e.stage,LayerManager.getInstance().initialize(e),LayerManager.getInstance().runScene(this.homeScene)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(GameManager,"GameManager");var GameScene=function(e){function t(){e.call(this,"GameSceneSkin"),this.score=0,this.packetPool0=ObjectPool.getPool("Packet0",3),this.packetPool10=ObjectPool.getPool("Packet10",5),this.packetPool20=ObjectPool.getPool("Packet20",5),this.packetPool30=ObjectPool.getPool("Packet30",5),this.packetPool50=ObjectPool.getPool("Packet50",3),this.packetPool80=ObjectPool.getPool("Packet80",3),this.packetPool100=ObjectPool.getPool("Packet100",3),this.poolList=[this.packetPool0,this.packetPool10,this.packetPool20,this.packetPool30,this.packetPool50,this.packetPool80,this.packetPool100],this.packetList=[],this.bFirstGame=!0,this.gameTimer=new egret.Timer(1e3),this.timeLimit=20,this.curTime=this.timeLimit,this.bWin=!1,this.snd=SoundManager.getInstance(),this.os="",this.soundCount=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},n.onEnable=function(){this.bFirstGame?(this.fallBag(),this.bFirstGame=!1):this.startGame()},n.onRemove=function(){this.soundCount=0},n.initView=function(){this.validateNow(),this.stageWidth=GameConst.stage.stageWidth,this.stageHeight=GameConst.stage.stageHeight,this.countDownLabel.parent&&this.removeChild(this.countDownLabel),this.timeLabel.text=this.timeLimit.toString(),this.os=egret.Capabilities.os},n.startGame=function(){this.resetGame(),this.countDown()},n.resetGame=function(){egret.Tween.removeTweens(this),this.score=0,this.stopGameTimer(),this.curTime=this.timeLimit,this.timeLabel.text=this.timeLimit.toString(),this.timeBg.scaleX=1},n.gameWin=function(){egret.Tween.removeTweens(this.bag),this.stopGameTimer(),this.bWin=!0,LayerManager.getInstance().runScene(GameManager.getInstance().resultScene)},n.gameLose=function(){egret.Tween.removeTweens(this.bag),this.stopGameTimer(),this.bWin=!1,LayerManager.getInstance().runScene(GameManager.getInstance().resultScene)},n.fallBag=function(){this.bag.y=-this.bag.height,egret.Tween.get(this.bag).to({y:this.stageHeight-this.bag.height/2+100},800,egret.Ease.bounceOut).call(this.countDown,this)},n.countDown=function(){var e=this,t=5;this.addChild(this.countDownLabel),this.countDownLabel.text=t.toString(),egret.Tween.get(this,{loop:!0}).wait(700).call(function(){return t--,0>=t?void e.countDownComplete():void(e.countDownLabel.text=t.toString())})},n.countDownComplete=function(){egret.Tween.removeTweens(this),this.removeChild(this.countDownLabel),this.startGameTimer(),this.launchPacket(),this.packetGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPacketTouch,this)},n.onEnterFrame=function(){for(var e=this.packetList.length,t=e-1;t>=0;t--){var i=this.packetList[t];i.x+=i.speedX,i.y+=i.speedY,(i.y<=-200||i.x<=-100||i.x>=this.stageWidth+100)&&(i.recycle(),this.packetList.splice(t,1))}return!0},n.launchPacket=function(){var e;e=Math.random()>.2?this.poolList[NumberTool.getRandomInt(0,6)].getObject():this.poolList[0].getObject(),e.x=this.bag.x+this.bag.width/2,e.y=this.bag.y+this.bag.height/2,e.shoot(),this.packetGroup.addChild(e);var t=250;egret.Tween.get(this.bag).wait(t).call(this.launchPacket,this)},n.onPacketTouch=function(e){if(e.target instanceof BasePacket||e.currentTarget instanceof BasePacket){if("Android"==this.os){if(this.soundCount<1){this.soundCount++,this.snd.play(this.snd.get);var t=this;egret.Tween.get(this).wait(1500).call(function(){t.soundCount=0})}}else this.snd.play(this.snd.get);var i=e.target;this.score+=i.score,i.parent&&i.parent.removeChild(i),i.score<=0&&this.gameLose()}},n.startGameTimer=function(){this.gameTimer.addEventListener(egret.TimerEvent.TIMER,this.onGameTimer,this),this.gameTimer.reset(),this.gameTimer.start()},n.onGameTimer=function(){return this.curTime--,this.curTime<=0?void this.gameWin():(this.timeLabel.text=this.curTime.toString(),void(this.timeBg.scaleX=this.curTime/this.timeLimit))},n.stopGameTimer=function(){this.gameTimer.removeEventListener(egret.TimerEvent.TIMER,this.onGameTimer,this),this.gameTimer.stop()},t}(BaseScene);egret.registerClass(GameScene,"GameScene");var HomeScene=function(e){function t(){e.call(this,"HomeSceneSkin")}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},n.onEnable=function(){SoundManager.getInstance().playBGM(),this.playAnim()},n.onRemove=function(){},n.initView=function(){this.validateNow(),this.stageWidth=GameConst.stage.stageWidth,this.stageHeight=GameConst.stage.stageHeight,this.scene1.visible=!0,this.initGuizi0X=this.guizi0.x,this.initGuizi1X=this.guizi1.x,this.initGuizi2X=this.guizi2.x,this.initMan0X=this.man0.x,this.man_talk1.alpha=0;var e=GameConst.stage.stageWidth;this.guizi0.x=e,this.guizi1.x=e,this.guizi2.x=e,this.man0.x=e,this.scene2.visible=!1,this.logo.x=-this.logo.width,this.posDesk.y=this.stageHeight,this.man1.y=this.stageHeight-this.man1.height,this.man1.x=this.stageWidth,this.man1_talk.y=this.man1.y-200,this.man1_talk.alpha=0,this.door.x=-this.door.width,this.door.y=this.man1.y-306,this.doorClip.mask=this.doorClipMask,this.godGroup.visible=!1,this.godGroup.y=this.man1.y-606,this.startBtn.alpha=0,this.ruleBtn.alpha=0,this.godTalk.alpha=0},n.playAnim=function(){var e=this;egret.Tween.get(this.clockGroup).to({y:130,scaleX:.7,scaleY:.7},300),egret.Tween.get(this.guizi0).wait(200).to({x:this.initGuizi0X},500,egret.Ease.backOut),egret.Tween.get(this.guizi1).wait(400).to({x:this.initGuizi1X},500,egret.Ease.backOut),egret.Tween.get(this.guizi2).wait(600).to({x:this.initGuizi2X},500,egret.Ease.backOut),egret.Tween.get(this.man0).wait(700).to({x:this.initMan0X},500,egret.Ease.getBackOut(1)),egret.Tween.get(this.man_talk1).wait(1300).to({alpha:1},1e3).to({alpha:0},1e3).call(function(){e.playGuiZiBack()})},n.playGuiZiBack=function(){egret.Tween.get(this.clockGroup).to({y:-this.clockGroup.height},500,egret.Ease.backIn),egret.Tween.get(this.man0).to({x:this.stageWidth+this.man0.width},300,egret.Ease.getBackIn(1)),egret.Tween.get(this.guizi0).wait(200).to({x:this.stageWidth+this.guizi0.width},500,egret.Ease.backIn),egret.Tween.get(this.guizi1).wait(400).to({x:this.stageWidth+this.guizi1.width},500,egret.Ease.backIn),egret.Tween.get(this.guizi2).wait(600).to({x:this.stageWidth+this.guizi2.width},500,egret.Ease.backIn),egret.Tween.get(this).wait(900).call(this.playCountMoney)},n.playCountMoney=function(){this.scene2.visible=!0;var e=this;egret.Tween.get(this.logo).to({x:(this.stageWidth-this.logo.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.door).wait(100).to({x:(this.stageWidth-this.door.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.posDesk).wait(300).to({y:this.stageHeight-this.posDesk.height+50},500,egret.Ease.getBackOut(1.2)),egret.Tween.get(this.man1).wait(500).to({x:(this.stageWidth-this.man1.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.man1_talk).wait(1200).to({alpha:1},800).wait(500).call(function(){e.playGodEnter()})},n.playGodEnter=function(){egret.Tween.get(this.man1).to({alpha:0},1e3),egret.Tween.get(this.posDesk).to({alpha:0},1e3),egret.Tween.get(this.man1_talk).to({alpha:0},1e3),this.godGroup.visible=!0,egret.Tween.get(this.godHand,{loop:!0}).to({rotation:10},500).to({rotation:0},500),egret.Tween.get(this.godHead,{loop:!0}).to({y:this.godHead.y+5},500).to({y:this.godHead.y},500);var e=this.smoke0.x;egret.Tween.get(this.smoke0,{loop:!0}).to({x:e-50,alpha:.1},2e3).to({x:e,alpha:1});var t=this.smoke3.x;egret.Tween.get(this.smoke3,{loop:!0}).to({x:t-100,alpha:.1},2e3).to({x:t,alpha:1});var i=this.smoke1.x;egret.Tween.get(this.smoke1,{loop:!0}).to({x:i+50,alpha:.1},2e3).to({x:i,alpha:1});var n=this.smoke2.x;egret.Tween.get(this.smoke2,{loop:!0}).to({x:n+100,alpha:.1},2e3).to({x:n,alpha:1}),egret.Tween.get(this.doorClip).to({y:-this.doorClip.height},2e3).wait(300).call(this.playStartUIEnter,this)},n.playStartUIEnter=function(){egret.Tween.get(this.doorBg).to({alpha:0},500),egret.Tween.get(this.logo).to({alpha:0},500),egret.Tween.get(this.startBtn).wait(500).to({alpha:1},500),egret.Tween.get(this.ruleBtn).wait(500).to({alpha:1},500),egret.Tween.get(this.godTalk).wait(1e3).to({alpha:1},500),this.ruleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRuleBtnTouch,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtnTouch,this)},n.onRuleBtnTouch=function(){LayerManager.getInstance().popLayer.addChild(GameManager.getInstance().ruleUI)},n.onCloseBtnTouch=function(){},n.onJiaoHuoBtnTouch=function(){window.location.href="http://www.dipo.pro"},n.onStartBtnTouch=function(){egret.Tween.removeAllTweens(),LayerManager.getInstance().runScene(GameManager.getInstance().gameScene)},t}(BaseScene);egret.registerClass(HomeScene,"HomeScene");var PreloadScene=function(e){function t(){e.call(this,"PreloadSceneSkin")}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){e.prototype.componentCreated.call(this)},n.setProgress=function(e){this.inited&&(this.progressLabel.text=e.toString())},t}(BaseScene);egret.registerClass(PreloadScene,"PreloadScene");var ResultScene=function(e){function t(){e.call(this,"ResultSceneSkin"),this.resultUIList=new Array,this.resultUILimit=10}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},n.onEnable=function(){this.scoreGroup.visible=!0,this.scoreGroup.y=(GameConst.stage.stageHeight-this.scoreGroup.height)/2,this.wrongPacket.visible=!1,this.resultGroup.visible=!1,this.textBg00.alpha=0,this.textBg01.alpha=0,this.textBg02.alpha=0,this.textBg1.alpha=0,this.textBg2.alpha=0,this.secLabel.alpha=0,this.secLabel.text="",this.rateLabel.alpha=0,this.rateLabel.text="",this.curScoreLabel.alpha=0,this.curScoreLabel.text="",this.historyScoreLabel.alpha=0,this.historyScoreLabel.text="",this.textBg0=this["textBg0"+NumberTool.getRandomInt(0,2)];for(var e=0;e<this.resultUILimit;e++){var t=this.resultUIList[e];t.clear(),t.parent&&this.scrollerGroup.removeChild(t)}this.no1.parent&&this.no1.parent.removeChild(this.no1),this.no2.parent&&this.no2.parent.removeChild(this.no2),this.no3.parent&&this.no3.parent.removeChild(this.no3);var i=GameManager.getInstance().gameScene.bWin;if(0==i){this.wrongPacket.visible=!0,this.wrongPacket.alpha=1;var n=this;egret.Tween.get(this.wrongPacket).wait(1200).to({alpha:0},800).call(function(){n.showScore()},this)}else this.showScore();this.againBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtnTouch,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareBtnTouch,this),this.linkBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLinkBtnTouch,this),this.ruleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRuleBtnTouch,this)},n.onRemove=function(){},n.initView=function(){this.validateNow(),this.scrollerGroup.y=(GameConst.stage.stageHeight-this.scrollerGroup.height)/2;for(var e=0;e<this.resultUILimit;e++){var t=new ResultUI;t.x=0,t.y=t.height*e,this.resultUIList.push(t),this.scrollerGroup.addChild(t)}},n.onAgainBtnTouch=function(){LayerManager.getInstance().runScene(GameManager.getInstance().gameScene)},n.onShareBtnTouch=function(){console.log("分享"),LayerManager.getInstance().popLayer.addChild(GameManager.getInstance().shareUI)},n.onLinkBtnTouch=function(){window.location.href="http://www.dipo.pro"},n.onRuleBtnTouch=function(){LayerManager.getInstance().popLayer.addChild(GameManager.getInstance().ruleUI)},n.showScore=function(){this.submitScore();var e=GameManager.getInstance().gameScene;this.secLabel.text=(e.timeLimit-e.curTime).toString(),this.curScoreLabel.text=e.score.toString(),egret.Tween.get(this.textBg0).to({alpha:1},1e3),egret.Tween.get(this.secLabel).to({alpha:1},1e3),egret.Tween.get(this.curScoreLabel).to({alpha:1},1e3),GameConst.historyScore=GameConst.historyScore>e.score?GameConst.historyScore:e.score,egret.Tween.get(this.textBg1).wait(1e3).to({alpha:1},1e3),egret.Tween.get(this.historyScoreLabel).wait(1e3).to({alpha:1},1e3),egret.Tween.get(this.textBg2).wait(2e3).to({alpha:1},1e3),egret.Tween.get(this.rateLabel).wait(2e3).to({alpha:1},1e3),egret.Tween.get(this).wait(3200).call(this.showResult,this)},n.showResult=function(){egret.Tween.get(this.textBg0).to({alpha:0},500),egret.Tween.get(this.secLabel).to({alpha:0},500),egret.Tween.get(this.curScoreLabel).to({alpha:0},500);var e=this.titleBg.height-80;egret.Tween.get(this.scoreGroup).wait(800).to({y:e},500);var t=this;egret.Tween.get(this.resultGroup).wait(1300).call(function(){t.resultGroup.visible=!0})},n.submitScore=function(){var e=SingleHttp.getInstance();e.completeHandler=this.completeHandler,e.errorHandler=this.errorHandler;var t=""+window.url,i="score="+GameManager.getInstance().gameScene.score,n="&_csrf="+window._csrf,s="&sign="+window.sign,a=i+n+s;e.send(t,egret.HttpMethod.POST,a,this)},n.completeHandler=function(e){console.log("接收返回数据:"+e);var t=JSON.parse(e),i=t.rankList,n=t.success,s=t.historyScore,a=t.msg,o=t.rank,r=t.count;if(console.log("rankList:",i),console.log("success:",n),console.log("msg:",a),egret.log("rank:",o),egret.log("count:",r),egret.log(GameConst.historyScore),1!=n)return void alert(a);if(i){for(var h,c,l=i.length,g=0;l>g;g++)h=i[g],c=this.resultUIList[g],c.setLabel(h.score),c.setHead(h.headUrl),c.y=110*g,this.scrollerGroup.addChild(c);1>=r?this.rateLabel.text="100":this.rateLabel.text=Math.round((r-o)/(r-1)*100)+"",s<GameConst.historyScore?this.historyScoreLabel.text=GameConst.historyScore+"":(GameConst.historyScore=s,this.historyScoreLabel.text=s+""),l>=1&&this.scrollerGroup.addChild(this.no1),l>=2&&this.scrollerGroup.addChild(this.no2),l>=3&&this.scrollerGroup.addChild(this.no3);var u=["太棒了","太厉害了","真行"],d="!你从财神爷那里开了"+GameConst.historyScore+"个金币,2016年",p=["财运滚滚","财运亨通","日进斗金","和气生财","招财进宝"],m="，打败了"+this.rateLabel.text+"%的西班牙同胞";window.shareText=u[NumberTool.getRandomInt(0,2)]+d+p[NumberTool.getRandomInt(0,4)]+m,window.wxshare(),egret.log(window.shareText)}},n.errorHandler=function(){alert("提交地址错误")},t}(BaseScene);egret.registerClass(ResultScene,"ResultScene");var BasePacket=function(e){function t(t,i,n,s){void 0===s&&(s=null),e.call(this),this.className=t,this.score=i,this.bg=new egret.Bitmap(s),this.bg.width=175,this.bg.height=272,this.addChild(this.bg),n&&(this.money=new egret.Bitmap(n),this.money.y=20,this.money.x=(this.width-this.money.width)/2+10,this.addChild(this.money)),this.anchorOffsetX=this.bg.width/2,this.anchorOffsetY=this.bg.height/2,this.touchChildren=!1,this.touchEnabled=!0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.shoot=function(){this.rotation=NumberTool.getRandomInt(-20,20);var e=2e3+500*Math.random(),t=1500,i=this.rotation*Math.PI/180,n=GameConst.stage.stageWidth/2+t*Math.sin(i),s=GameConst.stage.stageHeight-t*Math.cos(i),a=this;egret.Tween.get(this).to({x:n,y:s},e).call(function(){a.recycle()})},n.recycle=function(){this.rotation=0,this.parent&&this.parent.removeChild(this),egret.Tween.removeTweens(this),ObjectPool.getPool(this.className).returnObject(this)},t}(egret.DisplayObjectContainer);egret.registerClass(BasePacket,"BasePacket");var Packet0=function(e){function t(){e.call(this,"Packet0",0,null,RES.getRes("packet0_png"))}__extends(t,e);var i=(__define,t);i.prototype;return t}(BasePacket);egret.registerClass(Packet0,"Packet0");var Packet10=function(e){function t(){e.call(this,"Packet10",10,RES.getRes("packet10"),RES.getRes("packetbg"))}__extends(t,e);var i=(__define,t);i.prototype;return t}(BasePacket);egret.registerClass(Packet10,"Packet10");var Packet100=function(e){function t(){e.call(this,"Packet100",100,RES.getRes("packet100"),RES.getRes("packetbg"))}__extends(t,e);var i=(__define,t);i.prototype;return t}(BasePacket);egret.registerClass(Packet100,"Packet100");var Packet20=function(e){function t(){e.call(this,"Packet20",20,RES.getRes("packet20"),RES.getRes("packetbg"))}__extends(t,e);var i=(__define,t);i.prototype;return t}(BasePacket);egret.registerClass(Packet20,"Packet20");var Packet30=function(e){function t(){e.call(this,"Packet30",30,RES.getRes("packet30_png"),RES.getRes("packetbg"))}__extends(t,e);var i=(__define,t);i.prototype;return t}(BasePacket);egret.registerClass(Packet30,"Packet30");var Packet50=function(e){function t(){e.call(this,"Packet50",50,RES.getRes("packet50"),RES.getRes("packetbg"))}__extends(t,e);var i=(__define,t);i.prototype;return t}(BasePacket);egret.registerClass(Packet50,"Packet50");var Packet80=function(e){function t(){e.call(this,"Packet80",80,RES.getRes("packet80_png"),RES.getRes("packetbg"))}__extends(t,e);var i=(__define,t);i.prototype;return t}(BasePacket);egret.registerClass(Packet80,"Packet80");var ResultUI=function(e){function t(){e.call(this,"ResultUISkin")}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){e.prototype.componentCreated.call(this),this.headBm=new egret.Bitmap,this.headBm.width=80,this.headBm.height=80,this.headGroup.addChild(this.headBm),this.headBm.mask=this.headMask},n.setLabel=function(e){this.scoreLabel.text=e.toString()},n.setHead=function(e){var t=new egret.ImageLoader;t.addEventListener(egret.Event.COMPLETE,this.loadCompleteHandler,this),t.load(e)},n.loadCompleteHandler=function(e){var t=e.currentTarget;this.headBm.bitmapData=t.data},n.clear=function(){if(this.scoreLabel.text="",this.headGroup.numChildren>0){var e=this.headGroup.getChildAt(0);e.bitmapData=null}},t}(BaseUI);egret.registerClass(ResultUI,"ResultUI");var RuleUI=function(e){function t(){e.call(this,"RuleUISkin"),this.percentWidth=100,this.percentHeight=100}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){e.prototype.componentCreated.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTouch,this),this.jiaohuoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJiaoHuoBtnTouch,this)},n.onCloseBtnTouch=function(){this.parent&&this.parent.removeChild(this)},n.onJiaoHuoBtnTouch=function(){window.location.href="http://www.dipo.pro"},t}(BaseUI);egret.registerClass(RuleUI,"RuleUI");var ShareUI=function(e){function t(){e.call(this,"ShareUISkin")}__extends(t,e);var i=(__define,t),n=i.prototype;return n.componentCreated=function(){e.prototype.componentCreated.call(this),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},n.onTouchTap=function(){this.parent&&this.parent.removeChild(this)},t}(BaseUI);egret.registerClass(ShareUI,"ShareUI");var Main=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage22222,this)},n.onAddToStage22222=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage22222,this),console.log(this.stage.stageHeight/this.stage.stageWidth),this.stage.stageHeight/this.stage.stageWidth<=1.5},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},n.onThemeLoadComplete=function(){LoadManager.getInstance().loadGroup("preload",this,this.onPreloadComplete)},n.onPreloadComplete=function(e){this.preloadScene=new PreloadScene,this.addChild(this.preloadScene),LoadManager.getInstance().loadGroup("game",this,this.onGameComplete,this.onGameProgress)},n.onGameProgress=function(e){var t=Math.floor(e.itemsLoaded/e.itemsTotal*100/20)+1;t>5&&(t=5),this.preloadScene.setProgress(t)},n.onGameComplete=function(){this.removeChild(this.preloadScene),this.preloadScene=null,GameManager.getInstance().startup(this)},t}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,n){function s(e){t.call(n,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);