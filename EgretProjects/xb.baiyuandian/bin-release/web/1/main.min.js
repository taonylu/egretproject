var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function s(s){t.call(i,s,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?s(n):RES.getResAsync(e,s,this)}else RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var BaseScene=function(e){function t(t){e.call(this),this.inited=!1,this.percentWidth=100,this.percentHeight=100,this.touchEnabled=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.skinName=t}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},s.onEnable=function(){},s.onRemove=function(){},s.onDestroy=function(){},t}(eui.Component);egret.registerClass(BaseScene,"BaseScene");var BaseUI=function(e){function t(t){e.call(this),this.inited=!1,this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.skinName=t}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.componentCreated,this),this.inited=!0},t}(eui.Component);egret.registerClass(BaseUI,"BaseUI");var LayerManager=function(){function e(){this.tweenTime=500}var t=(__define,e),i=t.prototype;return i.initialize=function(e){this.main=e,this.sceneLayer=new eui.Group,this.sceneLayer.percentWidth=100,this.sceneLayer.percentHeight=100,this.main.addChild(this.sceneLayer),this.popLayer=new eui.Group,this.popLayer.percentWidth=100,this.popLayer.percentHeight=100,this.popLayer.touchEnabled=!1,this.popLayer.touchThrough=!0,this.main.addChild(this.popLayer)},i.runScene=function(e,t){void 0===t&&(t=!1),null!=this.curScene&&this.curScene&&(this.sceneLayer.removeChild(this.curScene),this.curScene.onRemove(),t&&this.curScene.onDestroy()),this.sceneLayer.addChild(e),e.inited&&e.onEnable(),this.curScene=e},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(LayerManager,"LayerManager");var LoadManager=function(){function e(){this.loadComplete=new Object,this.loadError=new Object,this.loadProgress=new Object,this.thisObject=new Object}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},i.loadGroup=function(e,t,i,s,n){void 0===i&&(i=null),void 0===s&&(s=null),void 0===n&&(n=null),this.loadComplete[e]=i,this.loadError[e]=n,this.loadProgress[e]=s,this.thisObject[e]=t,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},i.onResourceLoadComplete=function(e){var t=e.groupName;RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);var i=this.loadComplete[t];null!=i&&i.call(this.thisObject[t],e),this.clearCallBack(t)},i.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load");var t=this.loadError[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e),this.clearCallBack(e.groupName)},i.onResourceProgress=function(e){var t=this.loadProgress[e.groupName];null!=t&&t.call(this.thisObject[e.groupName],e)},i.clearCallBack=function(e){this.loadComplete[e]=null,this.loadError[e]=null,this.loadProgress[e]=null},e}();egret.registerClass(LoadManager,"LoadManager");var NumberTool=function(){function e(){}var t=(__define,e);t.prototype;return e.getRandomInt=function(e,t){return Math.round(Math.random()*(t-e))+e},e.getTimeString=function(e){var t="";return t=10>e?"0"+e:e.toString()},e}();egret.registerClass(NumberTool,"NumberTool");var ObjectPool=function(){function e(e){this.className=e,this.list=[]}var t=(__define,e),i=t.prototype;return i.getObject=function(){if(this.list.length>0)return this.list.shift();var e=egret.getDefinitionByName(this.className);return new e},i.returnObject=function(e){this.list.push(e)},e.getPool=function(t,i){if(void 0===i&&(i=0),!e.pool[t]&&(e.pool[t]=new e(t),0!=i))for(var s=egret.getDefinitionByName(t),n=e.pool[t],a=0;i>a;a++)n.returnObject(new s);return e.pool[t]},e.pool={},e}();egret.registerClass(ObjectPool,"ObjectPool");var SingleHttp=function(){function e(){this.request=new egret.HttpRequest,this.request.responseType=egret.HttpResponseType.TEXT,this.request.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),this.request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this)}var t=(__define,e),i=t.prototype;return i.send=function(e,t,i,s){this.thisObject=s,this.request.open(e,t),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),""!=i?this.request.send(i):this.request.send()},i.onPostComplete=function(e){this.completeHandler&&this.completeHandler.call(this.thisObject,this.request.response)},i.onPostIOError=function(e){this.errorHandler&&this.errorHandler.call(this.thisObject,e)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(SingleHttp,"SingleHttp");var SoundManager=function(){function e(){this.get="get",this.soundList={},this.channelList={},this.soundList[this.get]=RES.getRes("get_mp3")}var t=(__define,e),i=t.prototype;return i.play=function(e,t){void 0===t&&(t=1);var i=this.soundList[e];i&&(this.channelList[e]=i.play(0,t))},i.stop=function(e){var t=this.channelList[e];t&&t.stop()},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(SoundManager,"SoundManager");var GameConst=function(){function e(){}var t=(__define,e);t.prototype;return e.historyScore=0,e}();egret.registerClass(GameConst,"GameConst");var GameManager=function(){function e(){this.homeScene=new HomeScene,this.gameScene=new GameScene,this.resultScene=new ResultScene}var t=(__define,e),i=t.prototype;return i.startup=function(e){GameConst.stage=e.stage,LayerManager.getInstance().initialize(e),LayerManager.getInstance().runScene(this.homeScene)},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();egret.registerClass(GameManager,"GameManager");var GameScene=function(e){function t(){e.call(this,"GameSceneSkin"),this.score=0,this.packetPool=ObjectPool.getPool(PacketUI.NAME,3),this.bFirstGame=!0,this.gameTimer=new egret.Timer(1e3),this.timeLimit=20,this.curTime=this.timeLimit,this.bWin=!1,this.snd=SoundManager.getInstance()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},s.onEnable=function(){this.bFirstGame?(this.fallBag(),this.bFirstGame=!1):this.startGame()},s.onRemove=function(){},s.initView=function(){this.validateNow(),this.stageWidth=GameConst.stage.stageWidth,this.stageHeight=GameConst.stage.stageHeight,this.countDownLabel.parent&&this.removeChild(this.countDownLabel),this.timeLabel.text=this.timeLimit.toString()},s.startGame=function(){this.resetGame(),this.countDown()},s.resetGame=function(){egret.Tween.removeTweens(this),this.score=0,this.stopGameTimer(),this.curTime=this.timeLimit,this.timeLabel.text=this.timeLimit.toString(),this.timeBg.scaleX=1},s.gameWin=function(){egret.Tween.removeTweens(this.bag),this.stopGameTimer(),this.bWin=!0,LayerManager.getInstance().runScene(GameManager.getInstance().resultScene)},s.gameLose=function(){egret.Tween.removeTweens(this.bag),this.stopGameTimer(),this.bWin=!1,LayerManager.getInstance().runScene(GameManager.getInstance().resultScene)},s.fallBag=function(){this.bag.y=-this.bag.height,egret.Tween.get(this.bag).to({y:this.stageHeight-this.bag.height/2+100},800,egret.Ease.bounceOut).call(this.countDown,this)},s.countDown=function(){var e=this,t=5;this.addChild(this.countDownLabel),this.countDownLabel.text=t.toString(),egret.Tween.get(this,{loop:!0}).wait(1e3).call(function(){return t--,0>=t?(egret.Tween.removeTweens(this),e.removeChild(e.countDownLabel),e.startGameTimer(),void e.launchPacket()):void(e.countDownLabel.text=t.toString())})},s.launchPacket=function(){var e=this.packetPool.getObject();e.x=this.bag.x+this.bag.width/2,e.y=this.bag.y+this.bag.height/2,this.packetGroup.addChild(e),this.curTime>=10?e.randomSkin(0,4):e.randomSkin(0,6),e.shoot(),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPacketTouch,this);var t=400*Math.random();egret.Tween.get(this.bag).wait(t).call(this.launchPacket,this)},s.onPacketTouch=function(e){this.snd.play(this.snd.get);var t=e.target;this.score+=t.score,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPacketTouch,this),t.recycle(),t.score<=0&&this.gameLose()},s.startGameTimer=function(){this.gameTimer.addEventListener(egret.TimerEvent.TIMER,this.onGameTimer,this),this.gameTimer.reset(),this.gameTimer.start()},s.onGameTimer=function(){return this.curTime--,this.curTime<=0?void this.gameWin():(this.timeLabel.text=this.curTime.toString(),void(this.timeBg.scaleX=this.curTime/this.timeLimit))},s.stopGameTimer=function(){this.gameTimer.removeEventListener(egret.TimerEvent.TIMER,this.onGameTimer,this),this.gameTimer.stop()},t}(BaseScene);egret.registerClass(GameScene,"GameScene");var HomeScene=function(e){function t(){e.call(this,"HomeSceneSkin")}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},s.onEnable=function(){this.playAnim()},s.onRemove=function(){},s.initView=function(){this.validateNow(),this.stageWidth=GameConst.stage.stageWidth,this.stageHeight=GameConst.stage.stageHeight,this.scene1.visible=!0,this.initGuizi0X=this.guizi0.x,this.initGuizi1X=this.guizi1.x,this.initGuizi2X=this.guizi2.x,this.initMan0X=this.man0.x,this.man_talk1.alpha=0;var e=GameConst.stage.stageWidth;this.guizi0.x=e,this.guizi1.x=e,this.guizi2.x=e,this.man0.x=e,this.scene2.visible=!1,this.logo.x=-this.logo.width,this.posDesk.y=this.stageHeight,this.man1.y=this.stageHeight-this.man1.height,this.man1.x=this.stageWidth,this.man1_talk.y=this.man1.y-200,this.man1_talk.alpha=0,this.door.x=-this.door.width,this.door.y=this.man1.y-306,this.doorClip.mask=this.doorClipMask,this.godGroup.visible=!1,this.godGroup.y=this.man1.y-606,this.startBtn.alpha=0,this.ruleBtn.alpha=0,this.godTalk.alpha=0,this.ruleGroup.visible=!1},s.playAnim=function(){var e=this;egret.Tween.get(this.clockGroup).to({y:130,scaleX:.7,scaleY:.7},300),egret.Tween.get(this.guizi0).wait(200).to({x:this.initGuizi0X},500,egret.Ease.backOut),egret.Tween.get(this.guizi1).wait(400).to({x:this.initGuizi1X},500,egret.Ease.backOut),egret.Tween.get(this.guizi2).wait(600).to({x:this.initGuizi2X},500,egret.Ease.backOut),egret.Tween.get(this.man0).wait(700).to({x:this.initMan0X},500,egret.Ease.getBackOut(1)),egret.Tween.get(this.man_talk1).wait(1300).to({alpha:1},1e3).to({alpha:0},1e3).call(function(){e.playGuiZiBack()})},s.playGuiZiBack=function(){egret.Tween.get(this.clockGroup).to({y:-this.clockGroup.height},500,egret.Ease.backIn),egret.Tween.get(this.man0).to({x:this.stageWidth+this.man0.width},300,egret.Ease.getBackIn(1)),egret.Tween.get(this.guizi0).wait(200).to({x:this.stageWidth+this.guizi0.width},500,egret.Ease.backIn),egret.Tween.get(this.guizi1).wait(400).to({x:this.stageWidth+this.guizi1.width},500,egret.Ease.backIn),egret.Tween.get(this.guizi2).wait(600).to({x:this.stageWidth+this.guizi2.width},500,egret.Ease.backIn),egret.Tween.get(this).wait(900).call(this.playCountMoney)},s.playCountMoney=function(){this.scene2.visible=!0;var e=this;egret.Tween.get(this.logo).to({x:(this.stageWidth-this.logo.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.door).wait(100).to({x:(this.stageWidth-this.door.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.posDesk).wait(300).to({y:this.stageHeight-this.posDesk.height+50},500,egret.Ease.getBackOut(1.2)),egret.Tween.get(this.man1).wait(500).to({x:(this.stageWidth-this.man1.width)/2},500,egret.Ease.backOut),egret.Tween.get(this.man1_talk).wait(1200).to({alpha:1},800).wait(500).call(function(){e.playGodEnter()})},s.playGodEnter=function(){egret.Tween.get(this.man1).to({alpha:0},1e3),egret.Tween.get(this.posDesk).to({alpha:0},1e3),egret.Tween.get(this.man1_talk).to({alpha:0},1e3),this.godGroup.visible=!0,egret.Tween.get(this.godHand,{loop:!0}).to({rotation:10},500).to({rotation:0},500),egret.Tween.get(this.godHead,{loop:!0}).to({y:this.godHead.y+5},500).to({y:this.godHead.y},500);var e=this.smoke0.x;egret.Tween.get(this.smoke0,{loop:!0}).to({x:e-50,alpha:.1},2e3).to({x:e,alpha:1});var t=this.smoke3.x;egret.Tween.get(this.smoke3,{loop:!0}).to({x:t-100,alpha:.1},2e3).to({x:t,alpha:1});var i=this.smoke1.x;egret.Tween.get(this.smoke1,{loop:!0}).to({x:i+50,alpha:.1},2e3).to({x:i,alpha:1});var s=this.smoke2.x;egret.Tween.get(this.smoke2,{loop:!0}).to({x:s+100,alpha:.1},2e3).to({x:s,alpha:1}),egret.Tween.get(this.doorClip).to({y:-this.doorClip.height},3e3).wait(500).call(this.playStartUIEnter,this)},s.playStartUIEnter=function(){egret.Tween.get(this.doorBg).to({alpha:0},500),egret.Tween.get(this.logo).to({alpha:0},500),egret.Tween.get(this.startBtn).wait(500).to({alpha:1},500),egret.Tween.get(this.ruleBtn).wait(500).to({alpha:1},500),egret.Tween.get(this.godTalk).wait(1e3).to({alpha:1},500),this.ruleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRuleBtnTouch,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtnTouch,this)},s.onRuleBtnTouch=function(){this.ruleGroup.visible=!0,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTouch,this),this.jiaohuoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJiaoHuoBtnTouch,this)},s.onCloseBtnTouch=function(){this.ruleGroup.visible=!1,this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtnTouch,this)},s.onJiaoHuoBtnTouch=function(){window.location.href=""},s.onStartBtnTouch=function(){LayerManager.getInstance().runScene(GameManager.getInstance().gameScene)},t}(BaseScene);egret.registerClass(HomeScene,"HomeScene");var PreloadScene=function(e){function t(){e.call(this,"PreloadSceneSkin")}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this)},s.setProgress=function(e){this.inited&&(this.progressLabel.text=e.toString())},t}(BaseScene);egret.registerClass(PreloadScene,"PreloadScene");var ResultScene=function(e){function t(){e.call(this,"ResultSceneSkin"),this.resultUIList=new Array,this.resultUILimit=10}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this),this.initView()},s.onEnable=function(){this.scoreGroup.visible=!0,this.scoreGroup.y=(GameConst.stage.stageHeight-this.scoreGroup.height)/2,this.wrongPacket.visible=!1,this.resultGroup.visible=!1,this.textBg0.alpha=0,this.textBg1.alpha=0,this.textBg2.alpha=0,this.secLabel.alpha=0,this.rateLabel.alpha=0,this.curScoreLabel.alpha=0,this.historyScoreLabel.alpha=0;for(var e=0;e<this.resultUILimit;e++){var t=this.resultUIList[e];t.clear(),t.parent&&this.scrollerGroup.removeChild(t)}this.no1.parent&&this.no1.parent.removeChild(this.no1),this.no2.parent&&this.no2.parent.removeChild(this.no2),this.no3.parent&&this.no3.parent.removeChild(this.no3);var i=GameManager.getInstance().gameScene.bWin;if(0==i){this.wrongPacket.visible=!0,this.wrongPacket.alpha=1;var s=this;egret.Tween.get(this.wrongPacket).wait(1200).to({alpha:0},800).call(function(){s.showScore()},this)}else this.showScore();this.againBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgainBtnTouch,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareBtnTouch,this)},s.onRemove=function(){},s.initView=function(){this.validateNow(),this.scrollerGroup.y=(GameConst.stage.stageHeight-this.scrollerGroup.height)/2;for(var e=0;e<this.resultUILimit;e++){var t=new ResultUI;t.x=0,t.y=t.height*e,this.resultUIList.push(t),this.scrollerGroup.addChild(t)}},s.onAgainBtnTouch=function(){LayerManager.getInstance().runScene(GameManager.getInstance().gameScene)},s.onShareBtnTouch=function(){},s.showScore=function(){var e=GameManager.getInstance().gameScene;this.secLabel.text=(e.timeLimit-e.curTime).toString(),this.curScoreLabel.text=e.score.toString(),egret.Tween.get(this.textBg0).to({alpha:1},1e3),egret.Tween.get(this.secLabel).to({alpha:1},1e3),egret.Tween.get(this.curScoreLabel).to({alpha:1},1e3),GameConst.historyScore=GameConst.historyScore>e.score?GameConst.historyScore:e.score,this.historyScoreLabel.text=GameConst.historyScore.toString(),egret.Tween.get(this.textBg1).wait(1e3).to({alpha:1},1e3),egret.Tween.get(this.historyScoreLabel).wait(1e3).to({alpha:1},1e3),this.rateLabel.text="99",egret.Tween.get(this.textBg2).wait(2e3).to({alpha:1},1e3),egret.Tween.get(this.rateLabel).wait(2e3).to({alpha:1},1e3),egret.Tween.get(this).wait(3200).call(this.showResult,this),this.submitScore()},s.showResult=function(){egret.Tween.get(this.textBg0).to({alpha:0},500),egret.Tween.get(this.secLabel).to({alpha:0},500),egret.Tween.get(this.curScoreLabel).to({alpha:0},500);var e=this.titleBg.height-80;egret.Tween.get(this.scoreGroup).wait(800).to({y:e},500);var t=this;egret.Tween.get(this.resultGroup).wait(1300).call(function(){t.resultGroup.visible=!0})},s.submitScore=function(){var e=SingleHttp.getInstance();e.completeHandler=this.completeHandler,e.errorHandler=this.errorHandler;var t="",i="money="+GameManager.getInstance().gameScene.score;e.send(t,egret.HttpMethod.POST,i,this);for(var s,n,a=[{score:1234,headUrl:"resource/assets/rule_bg.png"},{score:1234,headUrl:"resource/assets/rule_bg.png"},{score:1234,headUrl:"resource/assets/rule_bg.png"},{score:1234,headUrl:"resource/assets/rule_bg.png"},{score:1234,headUrl:"resource/assets/rule_bg.png"},{score:1234,headUrl:"resource/assets/rule_bg.png"},{score:1234,headUrl:"resource/assets/rule_bg.png"}],r=a.length,o=0;r>o;o++)s=a[o],n=this.resultUIList[o],n.setLabel(s.score),n.setHead(s.headUrl),n.y=110*o,this.scrollerGroup.addChild(n);r>=1&&this.scrollerGroup.addChild(this.no1),r>=2&&this.scrollerGroup.addChild(this.no2),r>=3&&this.scrollerGroup.addChild(this.no3)},s.completeHandler=function(e){var t=e.rankList;if(t){for(var i,s,n=t.length,a=0;n>a;a++)i=t[a],s=this.resultUIList[a],s.setLabel(i.score),s.setHead(i.headUrl),s.y=110*a,this.scrollerGroup.addChild(s);n>=1&&this.scrollerGroup.addChild(this.no1),n>=2&&this.scrollerGroup.addChild(this.no2),n>=3&&this.scrollerGroup.addChild(this.no3)}},s.errorHandler=function(){console.log("提交分数错误")},t}(BaseScene);egret.registerClass(ResultScene,"ResultScene");var PacketUI=function(e){function t(){e.call(this),this.texureList=new Array,this.scoreList=new Array,this.touchEnabled=!0,this.packetBg=new egret.Bitmap,this.packetValue=new egret.Bitmap,this.addChild(this.packetBg),this.addChild(this.packetValue),this.bgTexture=RES.getRes("packetbg"),this.packet0=RES.getRes("packet_write"),this.packet10=RES.getRes("packet10"),this.packet20=RES.getRes("packet20"),this.packet30=RES.getRes("packet30_png"),this.packet50=RES.getRes("packet50"),this.packet80=RES.getRes("packet80_png"),this.packet100=RES.getRes("packet100"),this.texureList.push(this.packet10,this.packet20,this.packet30,this.packet50,this.packet80,this.packet100),this.scoreList.push(0,10,20,30,50,80,100)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.randomSkin=function(e,t){var i=NumberTool.getRandomInt(e,t);0==i?(this.packetBg.texture=this.packet0,this.packetValue.texture=null):(this.packetBg.texture=this.bgTexture,this.packetValue.texture=this.texureList[i-1]),this.score=this.scoreList[i],this.packetBg.width=175,this.packetBg.height=272,this.anchorOffsetX=this.packetBg.width/2,this.anchorOffsetY=this.packetBg.height/2,this.packetValue.y=20,this.packetValue.x=(this.width-this.packetValue.width)/2+10},s.shoot=function(){this.rotation=NumberTool.getRandomInt(-30,30);var e=1500+500*Math.random(),t=1500,i=this.rotation*Math.PI/180,s=GameConst.stage.stageWidth/2+t*Math.sin(i),n=GameConst.stage.stageHeight-t*Math.cos(i);egret.Tween.get(this).to({x:s,y:n},e)},s.recycle=function(){this.rotation=0,this.parent&&this.parent.removeChild(this),egret.Tween.removeTweens(this),ObjectPool.getPool(t.NAME).returnObject(this)},t.NAME="PacketUI",t}(egret.DisplayObjectContainer);egret.registerClass(PacketUI,"PacketUI");var ResultUI=function(e){function t(){e.call(this,"ResultUISkin")}__extends(t,e);var i=(__define,t),s=i.prototype;return s.componentCreated=function(){e.prototype.componentCreated.call(this),this.headBm=new egret.Bitmap,this.headBm.width=80,this.headBm.height=80,this.headGroup.addChild(this.headBm),this.headBm.mask=this.headMask},s.setLabel=function(e){this.scoreLabel.text=e.toString()},s.setHead=function(e){var t=new egret.ImageLoader;t.addEventListener(egret.Event.COMPLETE,this.loadCompleteHandler,this),t.load(e)},s.loadCompleteHandler=function(e){var t=e.currentTarget;this.headBm.bitmapData=t.data},s.clear=function(){if(this.scoreLabel.text="",this.headGroup.numChildren>0){var e=this.headGroup.getChildAt(0);e.bitmapData=null}},t}(BaseUI);egret.registerClass(ResultUI,"ResultUI");var Main=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage22222,this)},s.onAddToStage22222=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage22222,this)},s.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},s.onThemeLoadComplete=function(){LoadManager.getInstance().loadGroup("preload",this,this.onPreloadComplete)},s.onPreloadComplete=function(e){this.preloadScene=new PreloadScene,this.addChild(this.preloadScene),LoadManager.getInstance().loadGroup("game",this,this.onGameComplete,this.onGameProgress)},s.onGameProgress=function(e){var t=Math.floor(e.itemsLoaded/e.itemsTotal*100/20)+1;t>5&&(t=5),this.preloadScene.setProgress(t)},s.onGameComplete=function(){this.removeChild(this.preloadScene),this.preloadScene=null,GameManager.getInstance().startup(this)},t}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,s){function n(e){t.call(s,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);